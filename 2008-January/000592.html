<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Iris-commit] [IRIS] r1777 - in /trunk: data/models/textures/tex_267.png data/models/textures/tex_35.png data/models/textures/tex_568.png lua/filter/filter.granny.lua lua/lib.debugmenu.lua lua/lib.loading.lua lua/lib.mainmenu.lua lua/lib.static.lua
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/iris-commit/2008-January/index.html" >
   <LINK REL="made" HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r1777%20-%20in%20/trunk%3A%0A%20data/models/textures/tex_267.png%20data/models/textures/tex_35.png%0A%20data/models/textures/tex_568.png%20lua/filter/filter.granny.lua%0A%20lua/lib.debugmenu.lua%20lua/lib.loading.lua%20lua/lib.mainmenu.lua%0A%20lua/lib.static.lua&In-Reply-To=%3C20080116191012.BFC961C18724%40zwischenwelt.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000591.html">
   <LINK REL="Next"  HREF="000593.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Iris-commit] [IRIS] r1777 - in /trunk: data/models/textures/tex_267.png data/models/textures/tex_35.png data/models/textures/tex_568.png lua/filter/filter.granny.lua lua/lib.debugmenu.lua lua/lib.loading.lua lua/lib.mainmenu.lua lua/lib.static.lua</H1>
    <B>no-reply at zwischenwelt.org</B> 
    <A HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r1777%20-%20in%20/trunk%3A%0A%20data/models/textures/tex_267.png%20data/models/textures/tex_35.png%0A%20data/models/textures/tex_568.png%20lua/filter/filter.granny.lua%0A%20lua/lib.debugmenu.lua%20lua/lib.loading.lua%20lua/lib.mainmenu.lua%0A%20lua/lib.static.lua&In-Reply-To=%3C20080116191012.BFC961C18724%40zwischenwelt.org%3E"
       TITLE="[Iris-commit] [IRIS] r1777 - in /trunk: data/models/textures/tex_267.png data/models/textures/tex_35.png data/models/textures/tex_568.png lua/filter/filter.granny.lua lua/lib.debugmenu.lua lua/lib.loading.lua lua/lib.mainmenu.lua lua/lib.static.lua">no-reply at zwischenwelt.org
       </A><BR>
    <I>Wed Jan 16 20:10:12 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000591.html">[Iris-commit] [IRIS] r1776 - /trunk/lua/lib.debugmenu.lua
</A></li>
        <LI>Next message: <A HREF="000593.html">[Iris-commit] [IRIS] r1778 - in /trunk: data/config.lua.dist	lua/lib.3d.cam.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#592">[ date ]</a>
              <a href="thread.html#592">[ thread ]</a>
              <a href="subject.html#592">[ subject ]</a>
              <a href="author.html#592">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: sience
Date: Wed Jan 16 20:10:12 2008
New Revision: 1777

Log:
-some textures converted from 8bit to 24bit
-u_art loader and checks outcommentd

Modified:
    trunk/data/models/textures/tex_267.png
    trunk/data/models/textures/tex_35.png
    trunk/data/models/textures/tex_568.png
    trunk/lua/filter/filter.granny.lua
    trunk/lua/lib.debugmenu.lua
    trunk/lua/lib.loading.lua
    trunk/lua/lib.mainmenu.lua
    trunk/lua/lib.static.lua

Modified: trunk/data/models/textures/tex_267.png
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
Binary files - no diff available.

Modified: trunk/data/models/textures/tex_35.png
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
Binary files - no diff available.

Modified: trunk/data/models/textures/tex_568.png
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
Binary files - no diff available.

Modified: trunk/lua/filter/filter.granny.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/filter/filter.granny.lua (original)
+++ trunk/lua/filter/filter.granny.lua Wed Jan 16 20:10:12 2008
@@ -1,4 +1,6 @@
 -- ID Mapping (ArtID to GrannyID)
+-- TODO: add individual Scaling for Grannys
+
 gGrannyFilter =3D {}
 =

 -- FILTER: Grannys

Modified: trunk/lua/lib.debugmenu.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.debugmenu.lua (original)
+++ trunk/lua/lib.debugmenu.lua Wed Jan 16 20:10:12 2008
@@ -13,10 +13,9 @@
 --gDebugMenuEnableAnim =3D true
 gDebugMenuAnimIndex =3D -1 -- (-1) shows rest pos
 gDebugMenuAnimIndex =3D 0
-gDebugMenuModelIndex =3D 1
-gDebugMenuModel =3D { artid=3D400, content=3D{} }
+gDebugMenuModelIndex =3D 1	-- start with first model in gDebugMenuModelTab=
le
 gDebugMenuModelName =3D &quot;&quot;
-gDebugMenuModelTable =3D {}
+
 gDebugMenuMainGfxPos =3D {-0.5,0.5,-0.15}
 =

 function RepairEquipIndex (arr) =

@@ -29,13 +28,130 @@
 =

 --[[
 --player characters with equipment
-gDebugMenuModelTable =3D {
+gDebugTestMobiles =3D {
 	-- male
 	{artid=3D401, content=3D({{artid=3D5899,animid=3D477},{artid=3D5422,animi=
d=3D430},{artid=3D5399,animid=3D434},{artid=3D5435,animid=3D466},{artid=3D8=
251,animid=3D700},{artid=3D3701,animid=3D422},})},
 	--female
 	{artid=3D400, content=3D({{artid=3D5905,animid=3D476},{artid=3D5422,animi=
d=3D430},{artid=3D7933,animid=3D435},{artid=3D5909,animid=3D406},{artid=3D5=
441,animid=3D490},{artid=3D3701,animid=3D422},{artid=3D8251,animid=3D700},}=
)},
+
+	{artid=3D hex2num(&quot;5&quot;) , content=3D{}},		--birds_eagle
+	{artid=3D hex2num(&quot;39&quot;) , content=3D{}},	--mongbats_mongbat
+	{artid=3D hex2num(&quot;105&quot;) , content=3D{}},	--dragons_wyrm_ancient
+
+	-- llamas_llama_pack - broken (crash) -&gt; mapped to id: 220 (grannyfilter)
+	{artid=3D 292 , content=3D{}},
+	-- k=C3=A4fer - broken animation
+	{artid=3D hex2num(&quot;0xA9&quot;) , content=3D{}},
+	--791 broken horse
+	{artid=3D hex2num(&quot;0x317&quot;), content=3D{}},
+
+	{artid=3D	hex2num(&quot;0xB1&quot;) , content=3D{}}, -- 177 broken
+	{artid=3D	hex2num(&quot;0x72&quot;) , content=3D{}}, -- 114 broken =

+	{artid=3D	hex2num(&quot;0x73&quot;) , content=3D{}},  -- 115 broken
+	{artid=3D	hex2num(&quot;0x75&quot;) , content=3D{}}, -- 117 broken
+
+	{artid=3D hex2num(&quot;0xD5&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0xF1&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0xF3&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0xCC&quot;) , content=3D{}}, -- 204, broken horse
+	{artid=3D	hex2num(&quot;0xC8&quot;) , content=3D{}}, -- 200 : standard horse
+	{artid=3D	hex2num(&quot;0xE2&quot;) , content=3D{}}, -- 226 broken
+	{artid=3D	hex2num(&quot;0xE4&quot;) , content=3D{}}, -- 228 broken
+	{artid=3D hex2num(&quot;0xFC&quot;), content=3D{}},
+	{artid=3D	hex2num(&quot;0xDC&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0xD2&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0xDA&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0xDB&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0xD5&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0x90&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0x74&quot;) , content=3D{}},  -- 116 broken
+	{artid=3D	hex2num(&quot;0xB2&quot;) , content=3D{}},  -- 178 broken
+	{artid=3D	hex2num(&quot;0x84&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0xB3&quot;) , content=3D{}},  -- 179 broken
+	{artid=3D	hex2num(&quot;0xBB&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0xBC&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0x317&quot;) , content=3D{}}, -- brokenanim
+	{artid=3D	hex2num(&quot;0x31A&quot;) , content=3D{}}, -- brokenanim
+	{artid=3D	hex2num(&quot;0x31F&quot;) , content=3D{}}, -- brokenanim
+	{artid=3D	hex2num(&quot;0xBE&quot;) , content=3D{}},  -- 190 broken
+	{artid=3D hex2num(&quot;0x11C&quot;) , content=3D{}}, -- 284 anim broken, scale bro=
ken..
+	{artid=3D	hex2num(&quot;0xFB&quot;) , content=3D{}}, =

+
+	{artid=3D400,hue=3D33780, content=3D{[4]=3D{artid=3D5422,hue=3D1728,animi=
d=3D430},[26]=3D{artid=3D3701,hue=3D0,animid=3D422},[16]=3D{artid=3D8269,hu=
e=3D1147,animid=3D906},[27]=3D{artid=3D3701,hue=3D0,animid=3D422},[17]=3D{a=
rtid=3D8059,hue=3D1652,animid=3D913},[11]=3D{artid=3D8252,hue=3D1147,animid=
=3D701},[12]=3D{artid=3D5435,hue=3D0,animid=3D466},[21]=3D{artid=3D3701,hue=
=3D0,animid=3D422},}},
+	{artid=3D400,hue=3D33780, content=3D{[26]=3D{artid=3D3701,hue=3D0,animid=
=3D422},[16]=3D{artid=3D8269,hue=3D1147,animid=3D906},[27]=3D{artid=3D3701,=
hue=3D0,animid=3D422},[17]=3D{artid=3D8059,hue=3D1652,animid=3D913},[11]=3D=
{artid=3D8252,hue=3D1147,animid=3D701},[12]=3D{artid=3D5435,hue=3D0,animid=
=3D466},[21]=3D{artid=3D3701,hue=3D0,animid=3D422},}},
+	{artid=3D400,hue=3D33780, content=3D{[27]=3D{artid=3D3701,hue=3D0,animid=
=3D422},[17]=3D{artid=3D8059,hue=3D1652,animid=3D913},[11]=3D{artid=3D8252,=
hue=3D1147,animid=3D701},[12]=3D{artid=3D5435,hue=3D0,animid=3D466},[21]=3D=
{artid=3D3701,hue=3D0,animid=3D422},}},
+	{artid=3D400,hue=3D33780, content=3D{[11]=3D{artid=3D8252,hue=3D1147,anim=
id=3D701},[12]=3D{artid=3D5435,hue=3D0,animid=3D466},[21]=3D{artid=3D3701,h=
ue=3D0,animid=3D422},}},
+
+	{artid=3D400, content=3D{}},
+	{artid=3D400, content=3D{[1]=3D{artid=3D3932,animid=3D631},[2]=3D{artid=
=3D7107,animid=3D993},[4]=3D{artid=3D5137,animid=3D529},[6]=3D{artid=3D9797=
,animid=3D682},[7]=3D{artid=3D5140,animid=3D530},[19]=3D{artid=3D5136,animi=
d=3D528},[16]=3D{artid=3D8256,animid=3D800},[21]=3D{artid=3D3701,animid=3D4=
22},[13]=3D{artid=3D5141,animid=3D527},[29]=3D{artid=3D3708,animid=3D0},[11=
]=3D{artid=3D8266,animid=3D903},}},
+	{artid=3D401, content=3D{}},
+	{artid=3D401, content=3D{[1]=3D{artid=3D3932,animid=3D631},[2]=3D{artid=
=3D7107,animid=3D993},[4]=3D{artid=3D5137,animid=3D529},[6]=3D{artid=3D9797=
,animid=3D682},[7]=3D{artid=3D5140,animid=3D530},[19]=3D{artid=3D5136,animi=
d=3D528},[16]=3D{artid=3D8256,animid=3D800},[21]=3D{artid=3D3701,animid=3D4=
22},[13]=3D{artid=3D5141,animid=3D527},[29]=3D{artid=3D3708,animid=3D0},[11=
]=3D{artid=3D8266,animid=3D903},}},
+	{artid=3D014, content=3D{}},
+	{artid=3D778, content=3D{}},
+	{artid=3D401, content=3D{[1]=3D{artid=3D3932,animid=3D631},[2]=3D{artid=
=3D7107,animid=3D993},[4]=3D{artid=3D5137,animid=3D529},[6]=3D{artid=3D9797=
,animid=3D682},[7]=3D{artid=3D5140,animid=3D530},[19]=3D{artid=3D5136,animi=
d=3D528},[16]=3D{artid=3D8256,animid=3D800},[21]=3D{artid=3D3701,animid=3D4=
22},[13]=3D{artid=3D5141,animid=3D527},[29]=3D{artid=3D3708,animid=3D0},[11=
]=3D{artid=3D8266,animid=3D903},}},
+	{artid=3D401, content=3D{[1]=3D{artid=3D3932,animid=3D631},[4]=3D{artid=
=3D5137,animid=3D529},[6]=3D{artid=3D9797,animid=3D682},[7]=3D{artid=3D5140=
,animid=3D530},[19]=3D{artid=3D5136,animid=3D528},[16]=3D{artid=3D8256,anim=
id=3D800},[21]=3D{artid=3D3701,animid=3D422},[13]=3D{artid=3D5141,animid=3D=
527},[29]=3D{artid=3D3708,animid=3D0},[11]=3D{artid=3D8266,animid=3D903},}},
+	{artid=3D401, content=3D({{artid=3D3932,animid=3D631},{artid=3D7107,animi=
d=3D993},{artid=3D5137,animid=3D529},{artid=3D9797,animid=3D682},{artid=3D5=
140,animid=3D530},{artid=3D5136,animid=3D528},{artid=3D8256,animid=3D800},{=
artid=3D3701,animid=3D422},{artid=3D5141,animid=3D527},{artid=3D3708,animid=
=3D0},{artid=3D8266,animid=3D903},})},
+
+	{artid=3D400, content=3D({{artid=3D3519,animid=3D972},})},
+	{artid=3D400, content=3D({{artid=3D3519,animid=3D972},{artid=3D5901,animi=
d=3D479},{artid=3D5422,animid=3D430},{artid=3D5399,animid=3D434},{artid=3D5=
907,animid=3D404},{artid=3D3701,animid=3D422},{artid=3D8252,animid=3D701},}=
)},
+	{artid=3D987, content=3D({{artid=3D5182,animid=3D624},{artid=3D5903,animi=
d=3D480},{artid=3D5399,animid=3D434},{artid=3D5130,animid=3D565},{artid=3D5=
397,animid=3D468},{artid=3D3701,animid=3D422},{artid=3D7939,animid=3D469},}=
)},
+	{artid=3D401, content=3D({{artid=3D2594,animid=3D500},{artid=3D5899,animi=
d=3D477},{artid=3D7933,animid=3D435},{artid=3D5431,animid=3D455},{artid=3D5=
397,animid=3D468},{artid=3D5441,animid=3D490},{artid=3D8261,animid=3D710},{=
artid=3D3701,animid=3D422},})},
+	{artid=3D401, content=3D({{artid=3D2594,animid=3D500},{artid=3D5905,animi=
d=3D476},{artid=3D5399,animid=3D434},{artid=3D5431,animid=3D455},{artid=3D5=
441,animid=3D490},{artid=3D3701,animid=3D422},{artid=3D8262,animid=3D712},}=
)},
+	{artid=3D401, content=3D({{artid=3D5899,animid=3D477},{artid=3D5422,animi=
d=3D430},{artid=3D5399,animid=3D434},{artid=3D5435,animid=3D466},{artid=3D8=
251,animid=3D700},{artid=3D3701,animid=3D422},})},
+	{artid=3D400, content=3D({{artid=3D5905,animid=3D476},{artid=3D5422,animi=
d=3D430},{artid=3D7933,animid=3D435},{artid=3D5909,animid=3D406},{artid=3D5=
441,animid=3D490},{artid=3D3701,animid=3D422},{artid=3D8251,animid=3D700},}=
)},
+	{artid=3D400, content=3D({{artid=3D5899,animid=3D477},{artid=3D5422,animi=
d=3D430},{artid=3D7933,animid=3D435},{artid=3D8266,animid=3D903},{artid=3D3=
701,animid=3D422},})},
+
+	-- meshes only crash when using vertex-shader
+	{artid=3D040, content=3D{}},
+	{artid=3D	hex2num(&quot;0x76&quot;) , content=3D{}},
+	{artid=3D	hex2num(&quot;0x77&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0x78&quot;) , content=3D{}},
+	{artid=3D	hex2num(&quot;0x79&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0x3C&quot;) , content=3D{}}, =

+	{artid=3D	hex2num(&quot;0xC8&quot;) , content=3D{}}, =

+	{artid=3D hex2num(&quot;0x123&quot;) , content=3D{}},
+	{artid=3D199, content=3D{}},
+	{artid=3D225, content=3D{}}, -- timberwolf
+	{artid=3D256, content=3D{}},
+	{artid=3D	hex2num(&quot;0x319&quot;) , content=3D{}},
+	{artid=3D400,hue=3D33780, content=3D{
+		{artid=3Dhex2num(&quot;0x3EA2&quot;),layer=3DkLayer_Mount},
+		[4]=3D{artid=3D5422,hue=3D1728,animid=3D430},[26]=3D{artid=3D3701,hue=3D=
0,animid=3D422},
+		[16]=3D{artid=3D8269,hue=3D1147,animid=3D906},[27]=3D{artid=3D3701,hue=
=3D0,animid=3D422},
+		[17]=3D{artid=3D8059,hue=3D1652,animid=3D913},[11]=3D{artid=3D8252,hue=
=3D1147,animid=3D701},
+		[21]=3D{artid=3D3701,hue=3D0,animid=3D422},}},   =

+	{artid=3D401, content=3D({{artid=3Dhex2num(&quot;0x3EA2&quot;),layer=3DkLayer_Mount=
},{artid=3D5899,animid=3D477},{artid=3D5422,animid=3D430},{artid=3D5399,ani=
mid=3D434},{artid=3D5435,animid=3D466},{artid=3D8251,animid=3D700},{artid=
=3D3701,animid=3D422},})},
+	{artid=3D400, content=3D({{artid=3Dhex2num(&quot;0x3EA2&quot;),layer=3DkLayer_Mount=
},{artid=3D5899,animid=3D477},{artid=3D5422,animid=3D430},{artid=3D5399,ani=
mid=3D434},{artid=3D5435,animid=3D466},{artid=3D8251,animid=3D700},{artid=
=3D3701,animid=3D422},})},
+
+	{artid=3D2011, content=3D{{animid=3D2002}}}, -- 02:feet 11:ulegs
+	{artid=3D1466, content=3D{}}, -- flimmer, need culling? (fixed)
+	{artid=3D1700, content=3D{}}, -- hair, texcoords or normals broken ? (fix=
ed)
+	{artid=3D500, content=3D{}}, -- lantern, texcoords broken ?! (fixed)
+	{artid=3D468, content=3D{}}, -- cape, texcoords broken ? culling? (fixed)
+	{artid=3D1468, content=3D{}}, -- cape, texcoords broken ? culling? (fixed)
+	{artid=3D490, content=3D{}}, -- sash, texcoords broken ? culling? (fixed)
+	{artid=3D1490, content=3D{}},  -- sash, texcoords broken ? culling? (fixe=
d)
+
+	{artid=3D1924, content=3D{{animid=3D3012}}},
+	{artid=3D3604, content=3D{{animid=3D3012}}},
+	{artid=3D1925, content=3D{{animid=3D3012}}},
+	{artid=3D3605, content=3D{{animid=3D3012}}},
+
+	{artid=3D3006, content=3D{}}, -- female lower legs, sience was having pro=
blem with them, 2 submeshes !
+	{artid=3D2013, content=3D{}},
+	{artid=3D2009, content=3D{}},
+	{artid=3D2012, content=3D{}},
+	{artid=3D3013, content=3D{}},
+	{artid=3D3009, content=3D{}},
+	{artid=3D3012, content=3D{}},
+	{artid=3D3009, content=3D{}},
+	{artid=3D3012, content=3D{}},
+	{artid=3D3009, content=3D{}},
+	{artid=3D3012, content=3D{}},
+	{artid=3D3009, content=3D{}},
+	{artid=3D3012, content=3D{}},
 }
---]]
+]]--
 =

 --creatures
 --used regular expression to make these &quot;^(\d+)(.*?\s){8}(.*?)[\s]{0,}$&quot; a=
nd replace with &quot;{artid=3D$1 , content=3D{}}, \t--$3&quot; in PSpad
@@ -222,7 +338,7 @@
 	{artid=3D125 , content=3D{}}, 	--mages_evil_mage_master
 	{artid=3D126 , content=3D{}}, 	--mages_evil_mage_master
 	{artid=3D770 , content=3D{}}, 	--Meer_Mage
-	{artid=3D771 , content=3D{}}, 	--Meer_Warrior
+--	{artid=3D771 , content=3D{}}, 	--Meer_Warrior
 	{artid=3D797 , content=3D{}}, 	--mf_dragon_fire
 	{artid=3D798 , content=3D{}}, 	--mf_dragon_rust
 	{artid=3D39 , content=3D{}}, 	--mongbats_mongbat
@@ -414,9 +530,11 @@
 function AnimInvertMode () return 1,0 end
 =

 function DebugMenuShowModel ()
+	local index =3D gDebugMenuModelIndex
+
 	if (gDebugBodyGfx) then gDebugBodyGfx:Destroy() end
 	if (gDebugRootGfx) then gDebugRootGfx:Destroy() gDebugRootGfx =3D nil end
-	if (gDebugRootGfx2) then gDebugRootGfx2:Destroy() gDebugRootGfx =3D nil e=
nd
+	if (gDebugRootGfx2) then gDebugRootGfx2:Destroy() gDebugRootGfx2 =3D nil =
end
 	gDebugRootGfx =3D CreateRootGfx3D()
 	gDebugRootGfx2 =3D CreateRootGfx3D()
 	=

@@ -424,7 +542,7 @@
 	=

 	-- granny =

 	if (gCurDebugMode =3D=3D kDebugMode_Granny) then
-		local mobile =3D gDebugMenuModel
+		local mobile =3D gDebugMenuModelTable[index]
 		if (not mobile) then return end
 		RepairEquipIndex(mobile.content)
 		AddFadeLines(sprintf(&quot;DebugMenuShowModel model=3D%04x(=3D%d) anim=3D%d[%=
s] %s&quot;,mobile.artid,mobile.artid,gDebugMenuAnimIndex,GetAnimName(mobile.art=
id,gDebugMenuAnimIndex) or &quot;&quot;, gDebugMenuModelName or &quot;&quot;))
@@ -571,10 +689,12 @@
 		gDebugMenuAnimIndex =3D gDebugMenuAnimIndex + 1  DebugMenuShowModel()
 		end end end)
 		=

-	Bind(&quot;f1&quot;, function (state) if (not gActiveEditText) then if (state &gt; 0) =
then =

+	Bind(&quot;f1&quot;, function (state) if (not gActiveEditText) then if (state &gt; 0) =
then
+		--TODO: close ShowDebugMenuArtList(0,kDebugMode_Static)
 		gCurDebugMode =3D gCurDebugMode + 1
-		if (gCurDebugMode &gt;=3D kDebugMode_Online) then gCurDebugMode =3D kDebugM=
ode_Granny end
-		gDebugMenuAnimIndex =3D 0 gDebugMenuModelIndex =3D 0 DebugMenuShowModel()
+		if (gCurDebugMode &gt; kDebugMode_Static) then gCurDebugMode =3D kDebugMode=
_Granny end
+		gDebugMenuAnimIndex =3D 0 gDebugMenuModelIndex =3D 1
+		DebugMenuShowModel()
 		end end end)
 		=

 	Bind(&quot;f2&quot;, function (state) if (not gActiveEditText) then if (state &gt; 0) =
then =

@@ -620,6 +740,8 @@
 			f:close()
 		end
 		end end end)
+	=

+	ShowDebugMenuToolbox()
 end
 =

 function StepDebugMenu ()
@@ -637,13 +759,11 @@
 -- iMaxW,iMaxH : can be nil for unlimited size
 function MakeUOArtImageForDialog (iTileTypeID, iHue, iMaxW, iMaxH) =

 	iHue =3D iHue or 0
-	local iTranslatedTileTypeID =3D SeasonalStaticTranslation(iTileTypeID, gS=
easonSetting)
 	-- we have to add 16384 for fallbacks
-	iTranslatedTileTypeID =3D iTranslatedTileTypeID + 16384
-
-	local matname =3D GetArtMat(iTranslatedTileTypeID,iHue)
+	iTileTypeID =3D iTileTypeID + 16384
+	local matname =3D GetArtMat(iTileTypeID,iHue)
 	local isotilew =3D 44 / math.sqrt(2)
-	local w,h =3D GetArtSize(iTranslatedTileTypeID,iHue)
+	local w,h =3D GetArtSize(iTileTypeID,iHue)
 	if (not w or w =3D=3D 0) then w =3D isotilew end
 	if (not h or h =3D=3D 0) then h =3D isotilew end
 	local tw,th =3D texsize(w),texsize(h)
@@ -654,6 +774,19 @@
 	local u1,v1,u2,v2 =3D offx/tw,offy/th,(offx+w)/tw,(offy+h)/th
 	matname =3D (string.len(matname) &gt; 0) and matname or &quot;BaseWhiteNoLighting&quot;
 	return {type=3D&quot;Img2&quot;,	w=3Dw,h=3Dh,matname=3Dmatname, u1=3Du1,v1=3Dv1,u2=
=3Du2,v2=3Dv2}
+end
+
+--TODO: add check for statics
+function checkGlobals(debugmenumodelindex)
+	if (debugmenumodelindex &lt;=3D 1) then return 1 end
+
+	-- if in grannymode, check if index is out of array
+	if (gCurDebugMode =3D=3D kDebugMode_Granny) then
+		local maxmodelindex =3D table.getn(gDebugMenuModelTable)
+		if (gDebugMenuModelIndex &gt;=3D maxmodelindex) then return maxmodelindex e=
nd
+	end
+
+	return debugmenumodelindex
 end
 =

 function ShowDebugMenuArtList (iStart, debugmode)
@@ -716,19 +849,24 @@
 --notes: works, but crashes if index is out of table range (mystiqq)
 function ShowDebugMenuToolbox()
 	--return if the dialog is already open
-	if (gDebugMenuToolboxDialog ~=3D nil) then
-		return
-	end
-
-	local vw,vh =3D GetViewportSize()
-	local x,y =3D vw / 2, vh / 2
+	if (gDebugMenuToolboxDialog) then return end
 =

 	--for updating edit boxes on the fly, &quot;binds&quot; control name to global vari=
able. see UpdateEditText function
 	local textControls =3D function()
+			local debugmodelartid =3D 1
+			local debugmodelname =3D &quot;&quot;
+			if (gCurDebugMode =3D=3D kDebugMode_Granny) then
+				debugmodelartid =3D gDebugMenuModelTable[gDebugMenuModelIndex].artid
+				local modelinfo =3D GetGrannyModelInfo(debugmodelartid)
+				debugmodelname =3D modelinfo.modelname
+			else
+				debugmodelname =3D GetStaticTileTypeName(gDebugMenuModelIndex) or &quot;unk=
nown&quot;
+				debugmodelartid =3D gDebugMenuModelIndex
+			end
 			local tmp =3D {
-				cModelArtID =3D gDebugMenuModel.artid,
-				cModelIdx =3D gDebugMenuModelIndex,
-				cModelName =3D gDebugMenuModelName
+				cModelArtID =3D debugmodelartid,
+				cModelIdx	=3D gDebugMenuModelIndex,
+				cModelName	=3D debugmodelname
 			}
 			return tmp
 		end
@@ -745,55 +883,18 @@
 		},
 		{
 			{type=3D&quot;Label&quot;,	text=3D&quot;Art ID&quot;},
-			{type=3D&quot;Button&quot;,text=3D&quot;-&quot;,onMouseDown=3Dfunction (widget)
-					--get the edit text field
-					local tmp =3D tonumber(widget.dialog.controls[&quot;cModelArtID&quot;].plaintex=
t) - 1
-					local modeltable =3D {}
-					modeltable[&quot;artid&quot;], modeltable[&quot;content&quot;] =3D ((tmp ~=3D nil) and tm=
p or 0), {}
-					--load model (globals)
-					DebugMenuLoadModel(modeltable)
-					--update edit field(s)
-					UpdateEditText(widget, textControls())
-					--show/update the model
-					DebugMenuShowModel()
-				end
-			}, =

+			{type=3D&quot;Label&quot;,	text=3D&quot;&quot;},
 			{type=3D&quot;EditText&quot;,	w=3D40,h=3D16,text=3D&quot;&quot;,controlname=3D&quot;cModelArtID&quot;=
},
-			{type=3D&quot;Button&quot;,text=3D&quot;+&quot;,onMouseDown=3Dfunction (widget)
-					--get the edit text field
-					local tmp =3D tonumber(widget.dialog.controls[&quot;cModelArtID&quot;].plaintex=
t) + 1
-					local modeltable =3D {}
-					modeltable[&quot;artid&quot;], modeltable[&quot;content&quot;] =3D ((tmp ~=3D nil) and tm=
p or 0), {}
-					--load model (globals)
-					DebugMenuLoadModel(modeltable)
-					--update edit field(s)
-					UpdateEditText(widget, textControls())
-					--show/update the model
-					DebugMenuShowModel()
-				end
-			}, =

-			{type=3D&quot;Button&quot;,text=3D&quot;Set&quot;,onMouseDown=3Dfunction (widget)
-					--get the edit text field
-					local tmp =3D tonumber(widget.dialog.controls[&quot;cModelArtID&quot;].plaintex=
t)
-					local modeltable =3D {}
-					modeltable[&quot;artid&quot;], modeltable[&quot;content&quot;] =3D ((tmp ~=3D nil) and tm=
p or 0), {}
-					--load model (globals)
-					DebugMenuLoadModel(modeltable)
-					--update edit field(s)
-					UpdateEditText(widget, textControls())
-					--show/update the model
-					DebugMenuShowModel()
-				end
-			},
-			{type=3D&quot;EditText&quot;,	w=3D80,h=3D16,text=3D&quot;&quot;,controlname=3D&quot;cModelName&quot;},
+			{type=3D&quot;Label&quot;,	text=3D&quot;&quot;},
+			{type=3D&quot;Label&quot;,	text=3D&quot;&quot;},
+			{type=3D&quot;EditText&quot;,	w=3D100,h=3D16,text=3D&quot;&quot;,controlname=3D&quot;cModelName&quot;=
},
 		},
 		{
 			{type=3D&quot;Label&quot;,	text=3D&quot;Table Index&quot;},
 			{type=3D&quot;Button&quot;,text=3D&quot;-&quot;,onMouseDown=3Dfunction (widget)
 					--get the edit text field
-					gDebugMenuModelIndex =3D tonumber(widget.dialog.controls[&quot;cModelIdx&quot;]=
.plaintext) - 1
-					--load model (globals)
-					DebugMenuLoadModel(gDebugMenuModelTable[gDebugMenuModelIndex])
+					gDebugMenuModelIndex=3DcheckGlobals( tonumber(widget.dialog.controls[=
&quot;cModelIdx&quot;].plaintext) - 1 )
+
 					--update edit field(s)
 					UpdateEditText(widget, textControls())
 					--show/update the model
@@ -803,9 +904,8 @@
 			{type=3D&quot;EditText&quot;,	w=3D40,h=3D16,text=3D&quot;&quot;,controlname=3D&quot;cModelIdx&quot;},
 			{type=3D&quot;Button&quot;,text=3D&quot;+&quot;,onMouseDown=3Dfunction (widget)
 					--get the edit text field
-					gDebugMenuModelIndex =3D tonumber(widget.dialog.controls[&quot;cModelIdx&quot;]=
.plaintext) + 1
-					--load model (globals)
-					DebugMenuLoadModel(gDebugMenuModelTable[gDebugMenuModelIndex])
+					gDebugMenuModelIndex=3DcheckGlobals( tonumber(widget.dialog.controls[=
&quot;cModelIdx&quot;].plaintext) + 1 )
+
 					--update edit field(s)
 					UpdateEditText(widget, textControls())
 					--show/update the model
@@ -814,9 +914,8 @@
 			}, =

 			{type=3D&quot;Button&quot;,text=3D&quot;Get&quot;,onMouseDown=3Dfunction (widget)
 					--get the edit text field
-					gDebugMenuModelIndex =3D tonumber(widget.dialog.controls[&quot;cModelIdx&quot;]=
.plaintext)
-					--load model (globals)
-					DebugMenuLoadModel(gDebugMenuModelTable[gDebugMenuModelIndex])
+					gDebugMenuModelIndex=3DcheckGlobals( tonumber(widget.dialog.controls[=
&quot;cModelIdx&quot;].plaintext) )
+
 					--update edit field(s)
 					UpdateEditText(widget, textControls())
 					--show/update the model
@@ -837,31 +936,18 @@
 			}, =

 		},
 	}	--end rows
-	=

-	=

-	=

-	gDebugMenuToolboxDialog =3D guimaker.MakeTableDlg(rows,x,y,true,true, gGu=
iDefaultStyleSet,&quot;window&quot;)
+
+--	local vw,vh =3D GetViewportSize()
+--	local x,y =3D vw / 2, vh / 2
+
+	gDebugMenuToolboxDialog =3D guimaker.MakeTableDlg(rows,10,10,true,true, g=
GuiDefaultStyleSet,&quot;window&quot;)
 	--fill the edit text boxes
 	UpdateEditText(gDebugMenuToolboxDialog.rootwidget, textControls())
 	-- center the window
-	x =3D x - (gDebugMenuToolboxDialog.rootwidget.gfx:GetWidth() / 2)
-	y =3D y - (gDebugMenuToolboxDialog.rootwidget.gfx:GetHeight() / 2)
-	gDebugMenuToolboxDialog.rootwidget.gfx:SetPos(x,y)
+--	x =3D x - (gDebugMenuToolboxDialog.rootwidget.gfx:GetWidth() / 2)
+--	y =3D y - (gDebugMenuToolboxDialog.rootwidget.gfx:GetHeight() / 2)
+--	gDebugMenuToolboxDialog.rootwidget.gfx:SetPos(10,10)
 	gDebugMenuToolboxDialog.rootwidget:UpdateClip()
-end
-
---load model table (artid, content), see gDebugMenuModelTable
-function DebugMenuLoadModel (model_table)
-	local modelinfo =3D GetGrannyModelInfo(model_table.artid)
-	--check whether the id is valid &amp; model exists
-	if (not modelinfo) then =

-		print(&quot;DebugMenuLoadModel&quot;, &quot;Invalid model&quot;, model_table.artid) =

-		return
-	end
-	gDebugMenuModel =3D {} --prevent referencing
-	--load model info to globals
-	gDebugMenuModel =3D model_table
-	gDebugMenuModelName =3D modelinfo.modelname
 end
 =

 --Update edit text fields in 'widget' using table &quot;controlname=3Dvalue,...&quot;

Modified: trunk/lua/lib.loading.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.loading.lua (original)
+++ trunk/lua/lib.loading.lua Wed Jan 16 20:10:12 2008
@@ -6,7 +6,7 @@
 gLoadingProfileLastAction =3D false
 =

 -- loader for uo-art materials
-gManualArtMaterialLoader =3D nil
+--gManualArtMaterialLoader =3D nil
 =

 -- store global uni font infos
 gUniFontHeight =3D {}
@@ -44,8 +44,8 @@
 		LoadingProfile(&quot;init ArtMapLoader&quot;)
 		gArtMapLoader =3D CreateArtMapLoader(gArtMapLoaderType,CorrectPath( Addf=
ilepath(gArtidxFile) ),CorrectPath( Addfilepath(gArtFile) ))
 =

-		LoadingProfile(&quot;init ManualArtMaterialLoader&quot;)
-		gManualArtMaterialLoader =3D CreateManualArtMaterialLoader(&quot;uo_art_%i&quot;,&quot;=
tex_base_alpha&quot;,gArtMapLoader,true,true,false)
+--		LoadingProfile(&quot;init ManualArtMaterialLoader&quot;)
+--		gManualArtMaterialLoader =3D CreateManualArtMaterialLoader(&quot;uo_art_%i&quot;=
,&quot;tex_base_alpha&quot;,gArtMapLoader,true,true,false)
 	end
 		=

 	if (gGumpLoaderType) then

Modified: trunk/lua/lib.mainmenu.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.mainmenu.lua (original)
+++ trunk/lua/lib.mainmenu.lua Wed Jan 16 20:10:12 2008
@@ -299,7 +299,6 @@
 			-- todo : reinit ogre here ? might loose already loaded textures =3D(
 		end	=

 		end } })
---	table.insert(rows,{ {type=3D&quot;Button&quot;,text=3D&quot;#debug&quot;,onLeftClick=3Dfunc=
tion () StopMainMenu() StartDebugMenu() end } })
 	table.insert(rows,{ {type=3D&quot;Button&quot;,text=3D&quot;#exit&quot;,onLeftClick=3Dfunctio=
n () Terminate() end } })
 =

 	MainMenuSetBackground_Sky()

Modified: trunk/lua/lib.static.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.static.lua (original)
+++ trunk/lua/lib.static.lua Wed Jan 16 20:10:12 2008
@@ -111,7 +111,7 @@
 				-- load Mesh here
 				if ( OgreMeshAvailable(meshname) ) then
 					printdebug(&quot;static&quot;,&quot;Meshloader:&quot;,iTranslatedTileTypeID,iHue,meshname)
-
+--[[
 					-- create unavailable uo_art material
 					if (gArtMapLoader and gManualArtMaterialLoader) then
 						local t =3D OgreLoadedMeshTextures(meshname)
@@ -124,6 +124,7 @@
 						-- set false, if no ui_art material can be created
 						printdebug(&quot;static&quot;,sprintf(&quot;mesh cannot be loaded -&gt; temp. disabled=
 (false) meshname=3D%s iTranslatedTileTypeID=3D%d&quot;,meshname, iTranslatedTil=
eTypeID))
 					end
+]]--
 				else
 					meshname =3D false
 					printdebug(&quot;static&quot;,&quot;mesh cannot be loaded -&gt; temp. disabled (false) =
&quot;,meshname, iTranslatedTileTypeID)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000591.html">[Iris-commit] [IRIS] r1776 - /trunk/lua/lib.debugmenu.lua
</A></li>
	<LI>Next message: <A HREF="000593.html">[Iris-commit] [IRIS] r1778 - in /trunk: data/config.lua.dist	lua/lib.3d.cam.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#592">[ date ]</a>
              <a href="thread.html#592">[ thread ]</a>
              <a href="subject.html#592">[ subject ]</a>
              <a href="author.html#592">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/iris-commit">More information about the Iris-commit
mailing list</a><br>
</body></html>
