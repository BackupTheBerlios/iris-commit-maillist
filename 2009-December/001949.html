<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Iris-commit] [IRIS] r3189 - in /trunk: lua/lib.granny.debug.lua lua/lib.uodragdrop.lua lua/main.lua lua/widgets/widget.uotext.lua scripts/luabindheader.lua
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/iris-commit/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r3189%20-%20in%20/trunk%3A%20lua/lib.granny.debug.lua%0A%20lua/lib.uodragdrop.lua%20lua/main.lua%20lua/widgets/widget.uotext.lua%0A%20scripts/luabindheader.lua&In-Reply-To=%3C20091217231028.DD9277A9816B%40simon%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001948.html">
   <LINK REL="Next"  HREF="001950.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Iris-commit] [IRIS] r3189 - in /trunk: lua/lib.granny.debug.lua lua/lib.uodragdrop.lua lua/main.lua lua/widgets/widget.uotext.lua scripts/luabindheader.lua</H1>
    <B>no-reply at zwischenwelt.org</B> 
    <A HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r3189%20-%20in%20/trunk%3A%20lua/lib.granny.debug.lua%0A%20lua/lib.uodragdrop.lua%20lua/main.lua%20lua/widgets/widget.uotext.lua%0A%20scripts/luabindheader.lua&In-Reply-To=%3C20091217231028.DD9277A9816B%40simon%3E"
       TITLE="[Iris-commit] [IRIS] r3189 - in /trunk: lua/lib.granny.debug.lua lua/lib.uodragdrop.lua lua/main.lua lua/widgets/widget.uotext.lua scripts/luabindheader.lua">no-reply at zwischenwelt.org
       </A><BR>
    <I>Fri Dec 18 00:10:28 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001948.html">[Iris-commit] [IRIS] r3188 - /trunk/premake.lua
</A></li>
        <LI>Next message: <A HREF="001950.html">[Iris-commit] [IRIS] r3190 - /trunk/lua/main.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1949">[ date ]</a>
              <a href="thread.html#1949">[ thread ]</a>
              <a href="subject.html#1949">[ subject ]</a>
              <a href="author.html#1949">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: ghoulsblade
Date: Fri Dec 18 00:10:28 2009
New Revision: 3189

Log:
fadelines using new guisys and uofont now, chattabs is infront now,  uodrag=
drop : hold alt to avoid stacking, useful for vendor restocking/decoration

Modified:
    trunk/lua/lib.granny.debug.lua
    trunk/lua/lib.uodragdrop.lua
    trunk/lua/main.lua
    trunk/lua/widgets/widget.uotext.lua
    trunk/scripts/luabindheader.lua

Modified: trunk/lua/lib.granny.debug.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.granny.debug.lua (original)
+++ trunk/lua/lib.granny.debug.lua Fri Dec 18 00:10:28 2009
@@ -150,8 +150,8 @@
 									}
 =

 function cDebugGrannyMenu:MakeNewGranny (artid)
-	artid =3D 791 -- beetle
-	--~ artid =3D 200 -- horse
+	--~ artid =3D 791 -- beetle
+	artid =3D 200 -- horse
 	=

 	gDebugCategories.granny 	=3D true
 	local folder =3D &quot;/cavern/uoml_freshinstall.4.x/Models/Animals/&quot;
@@ -160,7 +160,9 @@
 	print(&quot;=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D MakeNewGranny&quot;)
 	local filepath =3D GetGrannyFilePath(artid)
 	--~ filepath =3D folder..&quot;Giant_Beetle_Walk.grn&quot;
-	--~ filepath =3D folder..&quot;Equines_Horse_Dappled_Brown_Walk.grn&quot;
+	--~ filepath =3D folder..&quot;Equines_Horse_Dappled_Brown_Walk.grn&quot;    =

+
+
 	print(&quot;granny path for artid&quot;,artid,filepath)
 	local grn =3D cGrannyFile:New()
 	grn:LoadFile(filepath)
@@ -205,32 +207,51 @@
 	=

 	--~ MyDump(Object.mesh_list.mesh)
 	local mesh =3D Object.mesh_list.mesh
-	local point_container =3D mesh.point_block.point_container
-	MyGrannyDump(point_container.points.list_points,&quot;point&quot;)
-	MyGrannyDump(point_container.normals.list_normals,&quot;normal&quot;)
-	if (point_container.texture_container.texcoords) then
-		print(&quot;texcoords:unknown:&quot;,	point_container.texture_container.texcoords.=
unknown)
-		MyGrannyDump(point_container.texture_container.texcoords.list_texcoords,=
&quot;texcoord&quot;)
-	end
-	=

-	print(&quot;weights:&quot;,SmartDump(MyFilterFields(mesh.weights)))
-	MyGrannyDump(mesh.weights.list_weightchunks,&quot;weight&quot;,nil,3)
-	MyGrannyDump(mesh.polygons.list_polygons,&quot;polygon&quot;)
-	MyGrannyDump(Object.boneTies1.childs,&quot;boneTies1:boneobject&quot;)
+	local point_container =3D mesh and mesh.point_block.point_container
+	=

+	if (point_container) then
+		MyGrannyDump(point_container.points.list_points,&quot;point&quot;)
+		MyGrannyDump(point_container.normals.list_normals,&quot;normal&quot;)
+		if (point_container.texture_container.texcoords) then
+			print(&quot;texcoords:unknown:&quot;,	point_container.texture_container.texcoords=
.unknown)
+			MyGrannyDump(point_container.texture_container.texcoords.list_texcoords=
,&quot;texcoord&quot;)
+		end
+	end
+	=

+	if (mesh) then =

+		print(&quot;weights:&quot;,SmartDump(MyFilterFields(mesh.weights)))
+		MyGrannyDump(mesh.weights.list_weightchunks,&quot;weight&quot;,nil,3)
+		MyGrannyDump(mesh.polygons.list_polygons,&quot;polygon&quot;)
+	end
+	=

+	MyGrannyDump(Object.boneTies1.childs,&quot;boneTies1:boneobject&quot;,nil,3)
 	MyGrannyDump(Object.bones.skeleton.bonelist.childs,&quot;bone&quot;,&quot;bone&quot;)
 	local btcont =3D Object.boneTies2.boneties_container
-	local a =3D btcont.bone_objptrs_container.bone_objptr
-	local b =3D btcont.bonetie_container.bonetie_group.bonetie_list
+	local a =3D	btcont.bone_objptrs_container.bone_objptr
+	local b =3D	btcont.bonetie_container and =

+				btcont.bonetie_container.bonetie_group and =

+				btcont.bonetie_container.bonetie_group.bonetie_list
+	--[[
+        &lt;boneTies2&gt;
+            &lt;boneties_container&gt;
+                &lt;bone_objptrs_container&gt;
+                    &lt;bone_objptr iBoneTie2ID=3D&quot;1&quot;&gt;
+                        &lt;bone_objptrs iNum=3D&quot;36&quot;&gt;
+                            &lt;BoneTies2 35=3D&quot;9&quot; 29=3D&quot;7&quot; 1=3D&quot;24&quot; 3=3D&quot;22&quot;=
 2=3D&quot;23&quot; 5=3D&quot;26&quot; 4=3D&quot;27&quot; =

+	]]--
 	print(&quot;iBoneTie2ID=3D&quot;,a.iBoneTie2ID,&quot;bone_objptrs.iNum=3D&quot;,a.bone_objptr=
s.iNum)
-	MyGrannyDump(a.bone_objptrs.BoneTies2,&quot;bt2:bone_objptr&quot;)
-	MyGrannyDump(b.childs,&quot;bt2:bonetie&quot;,&quot;bonetie&quot;)
+	MyGrannyDump(a and a.bone_objptrs.BoneTies2,&quot;bt2:bone_objptr&quot;)
+	MyGrannyDump(b and b.childs,&quot;bt2:bonetie&quot;,&quot;bonetie&quot;)
 	function MyPrintField (obj,fieldname) print(fieldname,obj[fieldname]) end
-	MyPrintField(Object.texture_list.texture,&quot;iTextureID&quot;)
-	MyPrintField(Object.texture_list.texture.texture_sublist.texture_poly.tex=
ture_poly_list,&quot;iElementSize&quot;)
-	MyPrintField(Object.texture_list.texture.texture_sublist.texture_poly.tex=
ture_poly_list,&quot;iNum&quot;)
-	MyGrannyDump(Object.texture_list.texture.texture_sublist.texture_poly.tex=
ture_poly_list.list_texpoly_normal,&quot;list_texpoly_normal&quot;)
-	--~ for k,entry in pairs(Object.texture_list.texture.texture_sublist.text=
ure_poly.texture_poly_list.list_texpoly_normal) do assert(k-1 =3D=3D entry.=
iUnknown) end -- todo : add as sanity check
-	=

+	if (Object and Object.texture_list and Object.texture_list.texture) then
+		MyPrintField(Object.texture_list.texture,&quot;iTextureID&quot;)
+		if (Object.texture_list.texture.texture_sublist) then
+			MyPrintField(Object.texture_list.texture.texture_sublist.texture_poly.t=
exture_poly_list,&quot;iElementSize&quot;)
+			MyPrintField(Object.texture_list.texture.texture_sublist.texture_poly.t=
exture_poly_list,&quot;iNum&quot;)
+			MyGrannyDump(Object.texture_list.texture.texture_sublist.texture_poly.t=
exture_poly_list.list_texpoly_normal,&quot;list_texpoly_normal&quot;)
+			--~ for k,entry in pairs(Object.texture_list.texture.texture_sublist.te=
xture_poly.texture_poly_list.list_texpoly_normal) do assert(k-1 =3D=3D entr=
y.iUnknown) end -- todo : add as sanity check
+		end
+	end
 	=

 	=

 	-- TODO : testrun for asserts on all granny files
@@ -337,51 +358,8 @@
 		sub:setVertexData(vertexData)
 		sub:setIndexData(indexData)
 		=

-		--[[
-		=

-		-- prepare vertex buffer
-		local vd =3D CreateVertexData()
-		sub:setVertexData(vd)
-		vd:setVertexCount(iComboVertexCount)
-		vd:setVertexDecl(vdecl:GetOgreVertexDecl())
-		=

-		VertexDeclaration* decl =3D sub-&gt;vertexData-&gt;vertexDeclaration;
-		VertexBufferBinding* bind =3D sub-&gt;vertexData-&gt;vertexBufferBinding;
-		int offset =3D 0;
-		offset +=3D decl-&gt;addElement(0, offset, VET_FLOAT3, VES_POSITION).getSiz=
e();
-		offset +=3D decl-&gt;addElement(0, offset, VET_FLOAT3, VES_NORMAL).getSize(=
);
-		if (bUseColors)		offset +=3D decl-&gt;addElement(0, offset, VET_COLOUR, VES=
_DIFFUSE).getSize();
-		if (bUseTexCoords)	offset +=3D decl-&gt;addElement(0, offset, VET_FLOAT2, V=
ES_TEXTURE_COORDINATES, 0).getSize();
-		HardwareVertexBufferSharedPtr vbuf =3D HardwareBufferManager::getSinglet=
on().createVertexBuffer(
-			offset,iComboVertexCount,HardwareBuffer::HBU_STATIC_WRITE_ONLY);
-		bind-&gt;setBinding(0, vbuf);
-					=

-		// write vertices
-		assert(myVertices.size() =3D=3D vbuf-&gt;getSizeInBytes());
-		vbuf-&gt;writeData(0,myVertices.size(),myVertices.HackGetRawReader(), true);
-		=

-
-		// prepare index buffer
-		int iIndexCount =3D pLoaderSubMesh.mPolygons.second * 3;
-		HardwareIndexBufferSharedPtr ibuf =3D HardwareBufferManager::getSingleto=
n().
-			createIndexBuffer(HardwareIndexBuffer::IT_16BIT,iIndexCount,HardwareBuf=
fer::HBU_STATIC_WRITE_ONLY);
-		sub-&gt;indexData-&gt;indexBuffer =3D ibuf;
-		sub-&gt;indexData-&gt;indexCount =3D iIndexCount;
-		sub-&gt;indexData-&gt;indexStart =3D 0;
-		=

-		--~ write indices
-		assert(myIndices.size() =3D=3D ibuf-&gt;getSizeInBytes());
-		ibuf-&gt;writeData(0, myIndices.size(),myIndices.HackGetRawReader(), true);
-		=

-		]]--
-		=

-		=

-		=

 		--~ now ogre stuff : vertexbuffer,renderop,renderable,movable
-		=

-		=

 		--~ local robmovable =3D CreateRobMovable()
-		=

 		--~ local robrenderable =3D CreateRobRenderable(robmovable)
 		--~ robmovable:AddRenderable(robrenderable)
 		=

@@ -429,14 +407,30 @@
 		end
 		]]--
 		=

-		--~ // todo : calc for whole mesh, not only for this submesh
-		--~ // calculate bounds
-		--~ pOgreMesh:_setBounds(AxisAlignedBox(vMin.x,vMin.y,vMin.z,vMax.x,vMax=
.y,vMax.z), true);
-		--~ pOgreMesh:_setBoundingSphereRadius(mymax(Vector3(vMin.x,vMin.y,vMin.=
z).length(),Vector3(vMax.x,vMax.y,vMax.z).length()));
+		--~ calculate bounds,  todo : calc for whole mesh, not only for this sub=
mesh
 		local r =3D math.sqrt(fSquareRadius)
 		pOgreMesh:_setBounds({-r,-r,-r,r,r,r},false)
 		pOgreMesh:_setBoundingSphereRadius(r)
 	end
+	=

+	=

+	local bIsEmptyMesh =3D true
+	local bHasBoneWeights =3D false
+	for k,submesh in ipairs(Object.mesh_list.childs or {}) do
+		if (submesh.weights and submesh.weights.list_weightchunks and #submesh.w=
eights.list_weightchunks &gt; 0) then bHasBoneWeights =3D true end
+		if (submesh.polygons and submesh.polygons.list_polygons and #submesh.pol=
ygons.list_polygons &gt; 0) then bIsEmptyMesh =3D false end
+	end
+	if (bIsEmptyMesh) then return false end
+	=

+	local pSkeleton
+	if (bHasBoneWeights) then =

+		--~ local szSkeletonName =3D GetUniqueName()
+		--~ CreateSkeleton : pSkeleton =3D SkeletonManager_create(szSkeletonName=
,Ogre::ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME,true);
+		--~ local pSkeleton =3D SkeletonManager_load(szSkeletonName)
+		--~ if (pSkeleton) then pMesh:setSkeletonName(pSkeleton:getName()) asser=
t(szSkeletonName =3D=3D pSkeleton:getName()) end  -- getname !=3D name i th=
ink, there was something weird here
+	end
+	=

+	=

 	=

 	local sMeshName =3D GetUniqueName() or &quot;MyGrannyMeshName01&quot;
 	local pOgreMesh =3D MeshManager_createManual(sMeshName)
@@ -445,9 +439,11 @@
 	=

 	--~ local mesh			=3D Object.mesh_list.childs[1] -- .mesh*26
 	--~ local texture_poly	=3D Object.texture_list.texture.texture_sublist.ch=
ilds[1] -- .texture_poly -- *26
-	for k,mesh in ipairs(Object.mesh_list.childs) do
-		local texture_poly =3D Object.texture_list.texture.texture_sublist.child=
s[k]
-		MyMakeGrannyGfx(mesh,texture_poly,pOgreMesh) =

+	if (Object.mesh_list) then =

+		for k,submesh in ipairs(Object.mesh_list.childs or {}) do
+			local texture_poly =3D Object.texture_list.texture.texture_sublist.chil=
ds[k]
+			MyMakeGrannyGfx(submesh,texture_poly,pOgreMesh) =

+		end
 	end
 	=

 	pOgreMesh:load(false)
@@ -455,8 +451,7 @@
 	local sceneManager =3D GetSceneManager()
 	local sEntityName =3D GetUniqueName()
 	local entity =3D sceneManager:createEntity(sEntityName,sMeshName)
-		--~ //~ LUABIND_DIRECTWRAP_RETURN_ONE_NAMEADD(			PushEntity*,									cr=
eateEntity,										,(ParamString(L,2),ParamString(L,3))	);
-		=

+	=

 	local gfx =3D CreateRootGfx3D()
 	local scenenode =3D gfx:GetSceneNode()
 	scenenode:attachObject(entity)
@@ -466,46 +461,197 @@
 =

 =

 =

-function GannyLoader2_LoadGrannyAsOgreMesh (pGrannyLoader,szMatName,szMesh=
Name,szSkeletonName) -- pGrannyLoader:cGrannyLoader_i2*
-	local bIsEmptyMesh =3D true
-	local bHasBoneWeights =3D false
-	for k,submesh in ipairs(pGrannyLoader.mSubMeshes) do =

-		if (submesh.mWeights.second &gt; 0) then bHasBoneWeights =3D true end
-		if (submesh.mPolygons.second &gt; 0) then bIsEmptyMesh =3D false end
-	end
-	if (bIsEmptyMesh) then return false end
-
-	local pMesh =3D MeshManager_createManual(szMeshName)
-	pMesh:_setBounds({0,0,0,0,0,0}, true)
-	pMesh:_setBoundingSphereRadius(0)
-	=

-	local pSkeleton
-	if (bHasBoneWeights) then =

-		local pSkeleton =3D SkeletonManager_load(szSkeletonName)
-		if (pSkeleton) then pMesh:setSkeletonName(pSkeleton:getName()) assert(sz=
SkeletonName =3D=3D pSkeleton:getName()) end  -- getname !=3D name i think,=
 there was something weird here
-	end
-	=

-	local mpGrannyLoader	=3D pGrannyLoader
-	local mpMesh			=3D pMesh
-	local mpSkeleton		=3D pSkeleton
-	local msMatName			=3D szMatName
-	local miCurrentSubMesh	=3D 0
-	local miTargetSubMesh	=3D 0
-	for k,submesh in ipairs(pGrannyLoader.mSubMeshes) do
-		-- bla
-	end
-	pMesh:load()
-	return true
-end
-
-
 --[[
-	=

-	mpMesh-&gt;_setBounds(AxisAlignedBox(vMin.x,vMin.y,vMin.z,vMax.x,vMax.y,vMax=
.z), true);
-	mpMesh-&gt;_setBoundingSphereRadius(mymax(Vector3(vMin.x,vMin.y,vMin.z).leng=
th(),Vector3(vMax.x,vMax.y,vMax.z).length()));
-end
-
-                                                                          =
                                                                           =

+  cGrannyFile:LoadFile    /cavern/uoml_freshinstall.4.x/Models/Animals/Equ=
ines_Horse_Dappled_Brown_Walk.grn                          =

+text    1/42    &quot;__Standard&quot;                                              =
                                                         =

+text    2/42    &quot;__FileName&quot;                                              =
                                                         =

+text    3/42    &quot;R:\content\Game\Fauna\Creatures\Equines\Max\Anim\equines_=
horse_dappled_brown_walk.max&quot;                            =

+text    4/42    &quot;__ObjectName&quot;                                            =
                                                         =

+text    5/42    &quot;Bip01 L Finger0&quot;                                         =
                                                         =

+text    6/42    &quot;__Description&quot;                                           =
                                                         =

+text    7/42    &quot;Bip01 L Hand&quot;                                            =
                                                         =

+text    8/42    &quot;Bip01 R Clavicle&quot;                                        =
                                                         =

+text    9/42    &quot;Bip01 Tail&quot;                                              =
                                                         =

+text    10/42   &quot;Bip01 R UpperArm&quot;                                        =
                                                         =

+text    11/42   &quot;Bip01 R Calf&quot;                                            =
                                                         =

+boneTies1:boneobject    1/36    {childs=3D{[1]=3D{iID=3D3				},},}        =
                                                                           =
                            =

+boneTies1:boneobject    2/36    {childs=3D{[1]=3D{iID=3D1				},},}        =
                                                                           =
                            =

+boneTies1:boneobject    3/36    {childs=3D{[1]=3D{iID=3D2				},},}        =
                                                                           =
                            =

+boneTies1:boneobject    4/36    {childs=3D{[1]=3D{iID=3D9=3D0x09		},},}   =
                                                                           =
                            =

+boneTies1:boneobject    5/36    {childs=3D{[1]=3D{iID=3D21=3D0x15		},},}  =
                                                                           =
                            =

+boneTies1:boneobject    6/36    {childs=3D{[1]=3D{iID=3D16=3D0x10		},},}  =
                                                                           =
                            =

+boneTies1:boneobject    7/36    {childs=3D{[1]=3D{iID=3D6				},},}        =
                                                                           =
                            =

+boneTies1:boneobject    8/36    {childs=3D{[1]=3D{iID=3D19=3D0x13		},},}  =
                                                                           =
                            =

+boneTies1:boneobject    9/36    {childs=3D{[1]=3D{iID=3D8				},},}        =
                                                                           =
                            =

+boneTies1:boneobject    10/36   {childs=3D{[1]=3D{iID=3D12=3D0x0c		},},}  =
                                                                           =
                            =

+boneTies1:boneobject    11/36   {childs=3D{[1]=3D{iID=3D13=3D0x0d		},},}  =
                                                                           =
       =

+bone    1/36    {fTranslate=3D{[1]=3D0,[2]=3D0,[0]=3D0,},iParent=3D0,fMatr=
ix=3D{[1]=3D0,[2]=3D0,[3]=3D0,[4]=3D1,[5]=3D0,[6]=3D0,[7]=3D0,[8]=3D1,[0]=
=3D1,},fQuaternion=3D{[1]=3D0,[2]=3D0,[3]=3D1,[0]=3D0,},}                  =
                                                                           =
                                                           =

+bone    2/36    {fTranslate=3D{[1]=3D-0.000461,[2]=3D0,[0]=3D0,},iParent=
=3D0,fMatrix=3D{[1]=3D0,[2]=3D0,[3]=3D0,[4]=3D1,[5]=3D0,[6]=3D0,[7]=3D0,[8]=
=3D1,[0]=3D1,},fQuaternion=3D{[1]=3D0,[2]=3D0,[3]=3D1,[0]=3D0,},}          =
                                                                           =
                                                           =

+bone    3/36    {fTranslate=3D{[1]=3D0.473461,[2]=3D1.085400,[0]=3D-0.0089=
64,},iParent=3D1,fMatrix=3D{[1]=3D0.000000,[2]=3D-0.000000,[3]=3D0.000000,[=
4]=3D1,[5]=3D0.000000,[6]=3D0.000000,[7]=3D0.000000,[8]=3D1,[0]=3D1,},fQuat=
ernion=3D{[1]=3D0.003099,[2]=3D-0.710178,[3]=3D0.704009,[0]=3D0.003072,},} =
                                                         =

+bone    4/36    {fTranslate=3D{[1]=3D-0.000033,[2]=3D-0.003174,[0]=3D-0.00=
3688,},iParent=3D2,fMatrix=3D{[1]=3D-0.000000,[2]=3D0.000000,[3]=3D-0.00000=
0,[4]=3D1,[5]=3D-0.000000,[6]=3D-0.000000,[7]=3D-0.000000,[8]=3D1,[0]=3D1,}=
,fQuaternion=3D{[1]=3D0.517145,[2]=3D0.482246,[3]=3D-0.482246,[0]=3D0.51714=
4,},}                                                    =

+bone    5/36    {fTranslate=3D{[1]=3D0.146758,[2]=3D-0.011366,[0]=3D0.1625=
39,},iParent=3D3,fMatrix=3D{[1]=3D-0.000000,[2]=3D-0.000000,[3]=3D0.000000,=
[4]=3D1.000000,[5]=3D-0.000000,[6]=3D-0.000000,[7]=3D-0.000000,[8]=3D1.0000=
00,[0]=3D1,},fQuaternion=3D{[1]=3D0.002761,[2]=3D0.789323,[3]=3D0.611798,[0=
]=3D0.051632,},}                                         =

+bone    6/36    {fTranslate=3D{[1]=3D-0.000356,[2]=3D0.000014,[0]=3D0.3835=
26,},iParent=3D4,fMatrix=3D{[1]=3D0.000000,[2]=3D0.000000,[3]=3D0.000000,[4=
]=3D1,[5]=3D-0.000000,[6]=3D0.000000,[7]=3D0.000000,[8]=3D1,[0]=3D1,},fQuat=
ernion=3D{[1]=3D0.045910,[2]=3D-0.092244,[3]=3D0.994571,[0]=3D-0.014532,},}=
                                                         =

+bone    7/36    {fTranslate=3D{[1]=3D-0.000114,[2]=3D-0.000003,[0]=3D0.455=
237,},iParent=3D5,fMatrix=3D{[1]=3D-0.000000,[2]=3D0.000000,[3]=3D-0.000000=
,[4]=3D1.000000,[5]=3D0.000000,[6]=3D-0.000000,[7]=3D0.000000,[8]=3D1.00000=
0,[0]=3D1.000000,},fQuaternion=3D{[1]=3D-0.024543,[2]=3D-0.170306,[3]=3D0.9=
85055,[0]=3D0.007792,},}                                 =

+bone    8/36    {fTranslate=3D{[1]=3D-0.000084,[2]=3D0.000000,[0]=3D0.1522=
19,},iParent=3D6,fMatrix=3D{[1]=3D0.000000,[2]=3D0.000000,[3]=3D0.000000,[4=
]=3D1,[5]=3D-0.000000,[6]=3D0.000000,[7]=3D-0.000000,[8]=3D1.000000,[0]=3D1=
.000000,},fQuaternion=3D{[1]=3D0.001701,[2]=3D-0.513025,[3]=3D0.858372,[0]=
=3D0.000739,},}
+bone    9/36    {fTranslate=3D{[1]=3D-0.000251,[2]=3D0.000001,[0]=3D0.2238=
47,},iParent=3D7,fMatrix=3D{[1]=3D-0.000000,[2]=3D0.000000,[3]=3D-0.000000,=
[4]=3D1,[5]=3D-0.000000,[6]=3D-0.000000,[7]=3D-0.000000,[8]=3D1.000000,[0]=
=3D1.000000,},fQuaternion=3D{[1]=3D0.004809,[2]=3D0.141923,[3]=3D0.989864,[=
0]=3D-0.001989,},}
+bone    10/36   {fTranslate=3D{[1]=3D0.000000,[2]=3D-0.000000,[0]=3D0.3291=
82,},iParent=3D8,fMatrix=3D{[1]=3D0.000000,[2]=3D0.000000,[3]=3D0.000000,[4=
]=3D1,[5]=3D-0.000000,[6]=3D0.000000,[7]=3D-0.000000,[8]=3D1.000000,[0]=3D1=
.000000,},fQuaternion=3D{[1]=3D-0.015708,[2]=3D-0.107925,[3]=3D0.993487,[0]=
=3D-0.032989,},}
+bone    11/36   {fTranslate=3D{[1]=3D0.007118,[2]=3D-0.078183,[0]=3D0.0431=
31,},iParent=3D9=3D0x09,fMatrix=3D{[1]=3D0.000000,[2]=3D-0.000000,[3]=3D-0.=
000000,[4]=3D1,[5]=3D-0.000000,[6]=3D-0.000000,[7]=3D-0.000000,[8]=3D1.0000=
00,[0]=3D1,},fQuaternion=3D{[1]=3D-0.004665,[2]=3D-0.190827,[3]=3D0.981608,=
[0]=3D-0.003001,},}
+iBoneTie2ID=3D    1       bone_objptrs.iNum=3D      36
+bt2:bone_objptr 1/36    24=3D0x18
+bt2:bone_objptr 2/36    23=3D0x17
+bt2:bone_objptr 3/36    22=3D0x16
+bt2:bone_objptr 4/36    27=3D0x1b
+bt2:bone_objptr 5/36    26=3D0x1a
+bt2:bone_objptr 6/36    25=3D0x19
+bt2:bone_objptr 7/36    30=3D0x1e
+bt2:bone_objptr 8/36    29=3D0x1d
+bt2:bone_objptr 9/36    28=3D0x1c
+bt2:bone_objptr 10/36   33=3D0x21
+bt2:bone_objptr 11/36   32=3D0x20
+bt2:bonetie     !!NIL!!
+iTextureID      1
+obj     1/36    {[2]=3D3,[4]=3D5,[6]=3D0,}	-- 3=3D4/42 &quot;__ObjectName&quot;    	=
5=3D6/42    &quot;__Description&quot; =

+obj     2/36    {[2]=3D3,[4]=3D7,[6]=3D0,}    =

+obj     3/36    {[2]=3D3,[4]=3D8,[6]=3D0,}
+obj     4/36    {[2]=3D3,[4]=3D9=3D0x09,[6]=3D0,}
+obj     5/36    {[2]=3D3,[4]=3D10=3D0x0a,[6]=3D0,}
+obj     6/36    {[2]=3D3,[4]=3D11=3D0x0b,[6]=3D0,}
+obj     7/36    {[2]=3D3,[4]=3D12=3D0x0c,[6]=3D0,}
+obj     8/36    {[2]=3D3,[4]=3D13=3D0x0d,[6]=3D0,}
+obj     9/36    {[2]=3D3,[4]=3D14=3D0x0e,[6]=3D0,}
+obj     10/36   {[2]=3D3,[4]=3D15=3D0x0f,[6]=3D0,}
+obj     11/36   {[2]=3D3,[4]=3D16=3D0x10,[6]=3D0,}
+]]--
+
+--[[
+cGrannyFile:LoadFile    /home/ghoul/Desktop/cavern/uoml/Models/Animals/Equ=
ines_Horse_Dappled_Brown_Lod2.grn                                          =
         =

+text    1/46    &quot;__Standard&quot;                                              =
                                                                           =
         =

+text    2/46    &quot;__FileName&quot;                                              =
                                                                           =
         =

+text    3/46    &quot;r:\content\game\fauna\creatures\equines\max\equines_horse=
_dappled_brown_lod2.max&quot;                                                   =
         =

+text    4/46    &quot;__ObjectName&quot;                                            =
                                                                           =
         =

+text    5/46    &quot;Equines_Horse_Dappled_Brown&quot;                             =
                                                                           =
         =

+text    6/46    &quot;__Description&quot;                                           =
                                                                           =
         =

+text    7/46    &quot;Bip01 Spine1&quot;                                            =
                                                                           =
         =

+text    8/46    &quot;master_equines_horse_dappled_brown&quot;                      =
                                                                           =
         =

+text    9/46    &quot;__Root&quot;                                                  =
                                                                           =
         =

+text    10/46   &quot;Bip01 Pelvis&quot;                                            =
                                                                           =
         =

+text    11/46   &quot;Bip01&quot;                                                   =
                                                                           =
         =

+point   1/223   {y=3D0.547549,x=3D-0.281395,z=3D1.035676,}                =
                                                                           =
               =

+point   2/223   {y=3D0.341187,x=3D-0.279739,z=3D0.754919,}                =
                                                                           =
               =

+point   3/223   {y=3D-0.344653,x=3D-0.253881,z=3D1.039981,}               =
                                                                           =
               =

+point   4/223   {y=3D0.520265,x=3D-0.246531,z=3D1.201591,}                =
                                                                           =
               =

+point   5/223   {y=3D0.243041,x=3D-0.243713,z=3D1.043599,}                =
                                                                           =
               =

+point   6/223   {y=3D-0.604263,x=3D-0.233141,z=3D0.808763,}               =
                                                                           =
               =

+point   7/223   {y=3D-0.345181,x=3D-0.222155,z=3D0.888647,}               =
                                                                           =
               =

+point   8/223   {y=3D-0.638878,x=3D-0.220125,z=3D0.967547,}               =
                                                                           =
               =

+point   9/223   {y=3D0.309630,x=3D-0.214871,z=3D1.149054,}                =
                                                                           =
               =

+point   10/223  {y=3D-0.460259,x=3D-0.212234,z=3D0.739967,}               =
                                                                           =
               =

+point   11/223  {y=3D0.311111,x=3D-0.222721,z=3D0.150869,}                =
                                                                           =
                                 =

+weights:        {unknown_b=3D2,wnum=3D223=3D0xdf,unknown_a=3D32=3D0x20,lis=
t_weightchunks=3Dtable: 0x952e858,}                                        =
                     =

+weight  1/223   {iNumBones=3D1,list_pairs=3D{[1]=3D{iWeightBoneIndex=3D0,f=
Weight=3D1,},},}                                                           =
                   =

+weight  2/223   {iNumBones=3D1,list_pairs=3D{[1]=3D{iWeightBoneIndex=3D0,f=
Weight=3D1,},},}                                                           =
                   =

+weight  3/223   {iNumBones=3D1,list_pairs=3D{[1]=3D{iWeightBoneIndex=3D1,f=
Weight=3D1,},},}                                                           =
                   =

+weight  4/223   {iNumBones=3D1,list_pairs=3D{[1]=3D{iWeightBoneIndex=3D2,f=
Weight=3D1,},},}                                                           =
                   =

+weight  5/223   {iNumBones=3D2,list_pairs=3D{[1]=3D{iWeightBoneIndex=3D0,f=
Weight=3D0.500000,},[2]=3D{iWeightBoneIndex=3D2,fWeight=3D0.500000,},},}   =
                         =

+weight  6/223   {iNumBones=3D1,list_pairs=3D{[1]=3D{iWeightBoneIndex=3D3,f=
Weight=3D1,},},}                                                           =
                   =

+weight  7/223   {iNumBones=3D2,list_pairs=3D{[1]=3D{iWeightBoneIndex=3D3,f=
Weight=3D0.500000,},[2]=3D{iWeightBoneIndex=3D4,fWeight=3D0.500000,},},}   =
                         =

+weight  8/223   {iNumBones=3D1,list_pairs=3D{[1]=3D{iWeightBoneIndex=3D1,f=
Weight=3D1,},},}                                                           =
                   =

+weight  9/223   {iNumBones=3D1,list_pairs=3D{[1]=3D{iWeightBoneIndex=3D2,f=
Weight=3D1,},},}                                                           =
                   =

+weight  10/223  {iNumBones=3D2,list_pairs=3D{[1]=3D{iWeightBoneIndex=3D3,f=
Weight=3D0.500000,},[2]=3D{iWeightBoneIndex=3D5,fWeight=3D0.500000,},},}   =
                         =

+weight  11/223  {iNumBones=3D1,list_pairs=3D{[1]=3D{iWeightBoneIndex=3D6,f=
Weight=3D1,},},}                                                           =
                   =

+polygon 1/442   {iVertex=3D{[1]=3D83=3D0x53,[2]=3D72=3D0x48,[0]=3D82=3D0x5=
2,},iNormal=3D{[1]=3D83=3D0x53,[2]=3D72=3D0x48,[0]=3D82=3D0x52,},}         =
                                     =

+polygon 2/442   {iVertex=3D{[1]=3D134=3D0x86,[2]=3D148=3D0x94,[0]=3D140=3D=
0x8c,},iNormal=3D{[1]=3D134=3D0x86,[2]=3D148=3D0x94,[0]=3D140=3D0x8c,},}   =
                                     =

+polygon 3/442   {iVertex=3D{[1]=3D158=3D0x9e,[2]=3D139=3D0x8b,[0]=3D148=3D=
0x94,},iNormal=3D{[1]=3D158=3D0x9e,[2]=3D139=3D0x8b,[0]=3D148=3D0x94,},}   =
                                     =

+polygon 4/442   {iVertex=3D{[1]=3D82=3D0x52,[2]=3D72=3D0x48,[0]=3D87=3D0x5=
7,},iNormal=3D{[1]=3D82=3D0x52,[2]=3D72=3D0x48,[0]=3D87=3D0x57,},}         =
                                     =

+polygon 5/442   {iVertex=3D{[1]=3D87=3D0x57,[2]=3D84=3D0x54,[0]=3D121=3D0x=
79,},iNormal=3D{[1]=3D87=3D0x57,[2]=3D84=3D0x54,[0]=3D121=3D0x79,},}       =
                                     =

+polygon 6/442   {iVertex=3D{[1]=3D134=3D0x86,[2]=3D121=3D0x79,[0]=3D138=3D=
0x8a,},iNormal=3D{[1]=3D134=3D0x86,[2]=3D121=3D0x79,[0]=3D138=3D0x8a,},}   =
                                     =

+polygon 7/442   {iVertex=3D{[1]=3D84=3D0x54,[2]=3D119=3D0x77,[0]=3D121=3D0=
x79,},iNormal=3D{[1]=3D84=3D0x54,[2]=3D119=3D0x77,[0]=3D121=3D0x79,},}     =
                                     =

+polygon 8/442   {iVertex=3D{[1]=3D138=3D0x8a,[2]=3D159=3D0x9f,[0]=3D148=3D=
0x94,},iNormal=3D{[1]=3D138=3D0x8a,[2]=3D159=3D0x9f,[0]=3D148=3D0x94,},}   =
                                     =

+polygon 9/442   {iVertex=3D{[1]=3D138=3D0x8a,[2]=3D119=3D0x77,[0]=3D144=3D=
0x90,},iNormal=3D{[1]=3D138=3D0x8a,[2]=3D119=3D0x77,[0]=3D144=3D0x90,},}   =
                                     =

+polygon 10/442  {iVertex=3D{[1]=3D120=3D0x78,[2]=3D134=3D0x86,[0]=3D140=3D=
0x8c,},iNormal=3D{[1]=3D120=3D0x78,[2]=3D134=3D0x86,[0]=3D140=3D0x8c,},}   =
                                     =

+polygon 11/442  {iVertex=3D{[1]=3D148=3D0x94,[2]=3D139=3D0x8b,[0]=3D140=3D=
0x8c,},iNormal=3D{[1]=3D148=3D0x94,[2]=3D139=3D0x8b,[0]=3D140=3D0x8c,},}   =
                                            =

+boneTies1:boneobject    1/37    {childs=3D{[1]=3D{iID=3D6,		},},}         =
                                          =

+boneTies1:boneobject    2/37    {childs=3D{[1]=3D{iID=3D2,		},},}         =
                                          =

+boneTies1:boneobject    3/37    {childs=3D{[1]=3D{iID=3D7,		},},}         =
                                         =

+boneTies1:boneobject    4/37    {childs=3D{[1]=3D{iID=3D4,		},},}         =
                                         =

+boneTies1:boneobject    5/37    {childs=3D{[1]=3D{iID=3D3,		},},}         =
                                         =

+boneTies1:boneobject    6/37    {childs=3D{[1]=3D{iID=3D8,		},},}         =
                                         =

+boneTies1:boneobject    7/37    {childs=3D{[1]=3D{iID=3D5,		},},}         =
                                         =

+boneTies1:boneobject    8/37    {childs=3D{[1]=3D{iID=3D15=3D0x0f,	},},}  =
                                          =

+boneTies1:boneobject    9/37    {childs=3D{[1]=3D{iID=3D9=3D0x09,	},},}   =
                                          =

+boneTies1:boneobject    10/37   {childs=3D{[1]=3D{iID=3D10=3D0x0a,	},},}  =
                                          =

+boneTies1:boneobject    11/37   {childs=3D{[1]=3D{iID=3D11=3D0x0b,	},},}  =
                                                                           =
                    =

+bone    1/37    {fTranslate=3D{[1]=3D0,[2]=3D0,[0]=3D0,},iParent=3D0,fMatr=
ix=3D{[1]=3D0,[2]=3D0,[3]=3D0,[4]=3D1,[5]=3D0,[6]=3D0,[7]=3D0,[8]=3D1,[0]=
=3D1,},fQuaternion=3D{[1]=3D0,[2]=3D0,[3]=3D1,[0]=3D0,},}                  =
                                                                           =
                                                           =

+bone    2/37    {fTranslate=3D{[1]=3D-0.000461,[2]=3D0,[0]=3D0,},iParent=
=3D0,fMatrix=3D{[1]=3D0,[2]=3D0,[3]=3D0,[4]=3D1,[5]=3D0,[6]=3D0,[7]=3D0,[8]=
=3D1,[0]=3D1,},fQuaternion=3D{[1]=3D0,[2]=3D0,[3]=3D1,[0]=3D0,},}          =
                                                                           =
                                                           =

+bone    3/37    {fTranslate=3D{[1]=3D0.473461,[2]=3D1.060614,[0]=3D-0.0000=
00,},iParent=3D1,fMatrix=3D{[1]=3D0.000000,[2]=3D0.000000,[3]=3D0.000000,[4=
]=3D1,[5]=3D0.000000,[6]=3D-0.000000,[7]=3D0.000000,[8]=3D1,[0]=3D1.000000,=
},fQuaternion=3D{[1]=3D0.003085,[2]=3D-0.707100,[3]=3D0.707101,[0]=3D0.0030=
85,},}                                                   =

+bone    4/37    {fTranslate=3D{[1]=3D-0.000001,[2]=3D-0.003174,[0]=3D-0.00=
3688,},iParent=3D2,fMatrix=3D{[1]=3D-0.000000,[2]=3D0.000000,[3]=3D-0.00000=
0,[4]=3D1,[5]=3D0.000000,[6]=3D0.000000,[7]=3D-0.000000,[8]=3D1,[0]=3D1,},f=
Quaternion=3D{[1]=3D-0.500000,[2]=3D-0.500000,[3]=3D0.500001,[0]=3D-0.49999=
9,},}                                                    =

+bone    5/37    {fTranslate=3D{[1]=3D0.146738,[2]=3D-0.000000,[0]=3D0.1629=
40,},iParent=3D3,fMatrix=3D{[1]=3D-0.000000,[2]=3D0.000000,[3]=3D0.000000,[=
4]=3D1.000000,[5]=3D0.000000,[6]=3D0.000000,[7]=3D0.000000,[8]=3D1,[0]=3D1.=
000000,},fQuaternion=3D{[1]=3D0.000102,[2]=3D0.769173,[3]=3D0.639041,[0]=3D=
-0.000088,},}                                            =

+bone    6/37    {fTranslate=3D{[1]=3D0.187062,[2]=3D-0.188280,[0]=3D-0.114=
344,},iParent=3D4,fMatrix=3D{[1]=3D0.000000,[2]=3D-0.000000,[3]=3D0.000000,=
[4]=3D1,[5]=3D0.000000,[6]=3D-0.000000,[7]=3D-0.000000,[8]=3D1,[0]=3D1,},fQ=
uaternion=3D{[1]=3D0.355465,[2]=3D-0.038615,[3]=3D-0.060378,[0]=3D0.931938,=
},}                                                      =

+bone    7/37    {fTranslate=3D{[1]=3D-0.000359,[2]=3D-0.000000,[0]=3D0.383=
541,},iParent=3D4,fMatrix=3D{[1]=3D0.000000,[2]=3D0.000000,[3]=3D-0.000000,=
[4]=3D1,[5]=3D0.000000,[6]=3D0.000000,[7]=3D0.000000,[8]=3D1,[0]=3D1,},fQua=
ternion=3D{[1]=3D0.000000,[2]=3D-0.069757,[3]=3D0.997564,[0]=3D-0.000000,},=
}                                                        =

+bone    8/37    {fTranslate=3D{[1]=3D-0.000077,[2]=3D0.000000,[0]=3D0.4551=
83,},iParent=3D6,fMatrix=3D{[1]=3D-0.000000,[2]=3D0.000000,[3]=3D0.000000,[=
4]=3D1,[5]=3D0.000000,[6]=3D0.000000,[7]=3D0.000000,[8]=3D1,[0]=3D1,},fQuat=
ernion=3D{[1]=3D-0.000001,[2]=3D-0.428783,[3]=3D0.903408,[0]=3D-0.000004,},=
}                                                        =

+bone    9/37    {fTranslate=3D{[1]=3D-0.142090,[2]=3D-0.112536,[0]=3D-0.02=
4633,},iParent=3D7,fMatrix=3D{[1]=3D0.000000,[2]=3D0.000000,[3]=3D0.000000,=
[4]=3D1.000000,[5]=3D0.000000,[6]=3D0.000000,[7]=3D0.000000,[8]=3D1.000000,=
[0]=3D1.000000,},fQuaternion=3D{[1]=3D0.536666,[2]=3D-0.535021,[3]=3D-0.426=
220,[0]=3D0.494044,},}                                   =

+bone    10/37   {fTranslate=3D{[1]=3D-0.000000,[2]=3D0.000000,[0]=3D0.3523=
91,},iParent=3D8,fMatrix=3D{[1]=3D0.000000,[2]=3D-0.000000,[3]=3D0.000000,[=
4]=3D1,[5]=3D-0.000000,[6]=3D0.000000,[7]=3D-0.000000,[8]=3D1.000000,[0]=3D=
1.000000,},fQuaternion=3D{[1]=3D-0.525638,[2]=3D0.472182,[3]=3D0.501046,[0]=
=3D0.499702,},}                                          =

+bone    11/37   {fTranslate=3D{[1]=3D-0.000000,[2]=3D0.000000,[0]=3D0.2616=
71,},iParent=3D9=3D0x09,fMatrix=3D{[1]=3D0.000000,[2]=3D0.000000,[3]=3D-0.0=
00000,[4]=3D1.000000,[5]=3D0.000000,[6]=3D0.000000,[7]=3D0.000000,[8]=3D1,[=
0]=3D1,},fQuaternion=3D{[1]=3D-0.000000,[2]=3D-0.498851,[3]=3D0.866688,[0]=
=3D0.000000,},}                                             =

+iBoneTie2ID=3D    1       bone_objptrs.iNum=3D      37                    =
                                                                           =
             =

+bt2:bone_objptr 1/37    4                                                 =
                                                                           =
         =

+bt2:bone_objptr 2/37    5                                                 =
                                                                           =
         =

+bt2:bone_objptr 3/37    1                                                 =
                                                                           =
         =

+bt2:bone_objptr 4/37    7                                                 =
                                                                           =
         =

+bt2:bone_objptr 5/37    12=3D0x0c                                         =
                                                                           =
           =

+bt2:bone_objptr 6/37    34=3D0x22                                         =
                                                                           =
           =

+bt2:bone_objptr 7/37    2                                                 =
                                                                           =
         =

+bt2:bone_objptr 8/37    3                                                 =
                                                                           =
         =

+bt2:bone_objptr 9/37    22=3D0x16                                         =
                                                                           =
           =

+bt2:bone_objptr 10/37   20=3D0x14                                         =
                                                                           =
           =

+bt2:bone_objptr 11/37   21=3D0x15                                         =
                                                                           =
           =

+bt2:bonetie     1/33    {iBone=3D5,iUnknown=3D{[1]=3D-0.058629,[2]=3D-0.23=
7984,[3]=3D-0.162302,[4]=3D0.358194,[5]=3D0.183488,[6]=3D0.102694,[0]=3D0.3=
67406,},}                  =

+bt2:bonetie     2/33    {iBone=3D8,iUnknown=3D{[1]=3D-0.040035,[2]=3D0.008=
894,[3]=3D-0.147809,[4]=3D0.371476,[5]=3D0.125108,[6]=3D0.136732,[0]=3D0.38=
6154,},}                   =

+bt2:bonetie     3/33    {iBone=3D4,iUnknown=3D{[1]=3D-0.261872,[2]=3D-0.08=
0894,[3]=3D-0.246581,[4]=3D0.385943,[5]=3D0.416525,[6]=3D0.246485,[0]=3D0.5=
00515,},}                  =

+bt2:bonetie     4/33    {iBone=3D9=3D0x09,iUnknown=3D{[1]=3D-0.053002,[2]=
=3D-0.150285,[3]=3D-0.092842,[4]=3D0.289619,[5]=3D0.132025,[6]=3D0.142190,[=
0]=3D0.291440,},}             =

+bt2:bonetie     5/33    {iBone=3D6,iUnknown=3D{[1]=3D-0.022146,[2]=3D-0.10=
0626,[3]=3D-0.221972,[4]=3D0.312453,[5]=3D0.468180,[6]=3D0.222517,[0]=3D0.5=
55906,},}
+bt2:bonetie     6/33    {iBone=3D10=3D0x0a,iUnknown=3D{[1]=3D-0.013907,[2]=
=3D-0.233039,[3]=3D-0.070689,[4]=3D0.381548,[5]=3D0.056935,[6]=3D0.074321,[=
0]=3D0.383907,},}
+bt2:bonetie     7/33    {iBone=3D12=3D0x0c,iUnknown=3D{[1]=3D-0.027222,[2]=
=3D-0.101896,[3]=3D-0.065225,[4]=3D0.337428,[5]=3D0.090531,[6]=3D0.068422,[=
0]=3D0.346670,},}
+bt2:bonetie     8/33    {iBone=3D14=3D0x0e,iUnknown=3D{[1]=3D-0.090859,[2]=
=3D-0.000313,[3]=3D-0.060973,[4]=3D-0.007980,[5]=3D-0.000094,[6]=3D0.062011=
,[0]=3D0.091001,},}
+bt2:bonetie     9/33    {iBone=3D11=3D0x0b,iUnknown=3D{[1]=3D0.023739,[2]=
=3D-0.177858,[3]=3D-0.053214,[4]=3D0.344609,[5]=3D0.098641,[6]=3D0.038090,[=
0]=3D0.344661,},}
+bt2:bonetie     10/33   {iBone=3D13=3D0x0d,iUnknown=3D{[1]=3D-0.009283,[2]=
=3D-0.102775,[3]=3D-0.044248,[4]=3D0.176347,[5]=3D0.125947,[6]=3D0.049843,[=
0]=3D0.216987,},}
+bt2:bonetie     11/33   {iBone=3D15=3D0x0f,iUnknown=3D{[1]=3D-0.033795,[2]=
=3D-0.111544,[3]=3D-0.066103,[4]=3D0.275743,[5]=3D0.054734,[6]=3D0.055887,[=
0]=3D0.285613,},}
+iTextureID      1
+iElementSize    16
+iNum    442
+list_texpoly_normal     1/442   {iUnknown=3D0,iTexCoord=3D{[1]=3D45=3D0x2d=
,[2]=3D43=3D0x2b,[0]=3D29=3D0x1d,},}
+list_texpoly_normal     2/442   {iUnknown=3D1,iTexCoord=3D{[1]=3D31=3D0x1f=
,[2]=3D43=3D0x2b,[0]=3D29=3D0x1d,},}
+list_texpoly_normal     3/442   {iUnknown=3D2,iTexCoord=3D{[1]=3D57=3D0x39=
,[2]=3D45=3D0x2d,[0]=3D43=3D0x2b,},}
+list_texpoly_normal     4/442   {iUnknown=3D3,iTexCoord=3D{[1]=3D29=3D0x1d=
,[2]=3D43=3D0x2b,[0]=3D31=3D0x1f,},}
+list_texpoly_normal     5/442   {iUnknown=3D4,iTexCoord=3D{[1]=3D31=3D0x1f=
,[2]=3D42=3D0x2a,[0]=3D33=3D0x21,},}
+list_texpoly_normal     6/442   {iUnknown=3D5,iTexCoord=3D{[1]=3D31=3D0x1f=
,[2]=3D33=3D0x21,[0]=3D42=3D0x2a,},}
+list_texpoly_normal     7/442   {iUnknown=3D6,iTexCoord=3D{[1]=3D48=3D0x30=
,[2]=3D69=3D0x45,[0]=3D34=3D0x22,},}
+list_texpoly_normal     8/442   {iUnknown=3D7,iTexCoord=3D{[1]=3D48=3D0x30=
,[2]=3D53=3D0x35,[0]=3D43=3D0x2b,},}
+list_texpoly_normal     9/442   {iUnknown=3D8,iTexCoord=3D{[1]=3D48=3D0x30=
,[2]=3D69=3D0x45,[0]=3D75=3D0x4b,},}
+list_texpoly_normal     10/442  {iUnknown=3D9=3D0x09,iTexCoord=3D{[1]=3D17=
=3D0x11,[2]=3D31=3D0x1f,[0]=3D29=3D0x1d,},}
+list_texpoly_normal     11/442  {iUnknown=3D10=3D0x0a,iTexCoord=3D{[1]=3D4=
3=3D0x2b,[2]=3D45=3D0x2d,[0]=3D29=3D0x1d,},}
+obj     1/40    {[2]=3D3,[4]=3D5,[6]=3D0,}
+obj     2/40    {[2]=3D3,[4]=3D7,[6]=3D0,}
+obj     3/40    {[2]=3D3,[4]=3D8,[6]=3D0,}
+obj     4/40    {	   [4]=3D9=3D0x09,}
+obj     5/40    {[2]=3D3,[4]=3D10=3D0x0a,[6]=3D0,}
+obj     6/40    {[2]=3D3,[4]=3D11=3D0x0b,[6]=3D0,}
+obj     7/40    {[2]=3D3,[4]=3D12=3D0x0c,[6]=3D0,}
+obj     8/40    {[2]=3D3,[4]=3D5,[6]=3D0,}
+obj     9/40    {[2]=3D3,[4]=3D13=3D0x0d,[6]=3D0,}
+obj     10/40   {[2]=3D3,[4]=3D14=3D0x0e,[6]=3D0,}
+obj     11/40   {[2]=3D3,[4]=3D15=3D0x0f,[6]=3D0,}
+
+]]--
+
+
+
+
+
+
+
+
+--[[
+	=

 	point   				1/557   {y=3D-0.710749,x=3D-0.767177,z=3D1.416132,}          =
                                                                           =
                                                                   =

 	normal 					1/553   {y=3D0,x=3D0,z=3D0,}                                 =
                                                                           =
                                     =

 	texcoord   				1/2286  {y=3D0.082323,x=3D0.089491,z=3D0.418126,}         =
    2286/6/3 =3D 127                                                       =
                                         =


Modified: trunk/lua/lib.uodragdrop.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.uodragdrop.lua (original)
+++ trunk/lua/lib.uodragdrop.lua Fri Dec 18 00:10:28 2009
@@ -358,9 +358,12 @@
 		=

 		-- default target is container
 		local target =3D container.serial
+		local bDropOnOtherItem =3D gMousePickFoundHit and gMousePickFoundHit.hit=
type =3D=3D kMousePickHitType_ContainerItem
+		if (gKeyPressed[key_lalt]) then bDropOnOtherItem =3D false end
+		print(&quot;dragdrop:drop on container&quot;,container,target,bDropOnOtherItem)
 		=

 		-- stack this item with the same beneath?
-		if gMousePickFoundHit and gMousePickFoundHit.hittype =3D=3D kMousePickHi=
tType_ContainerItem then
+		if bDropOnOtherItem then
 			-- read out item infos
 			local arrtiletype =3D {}
 			arrtiletype =3D GetStaticTileType(item.artid)
@@ -448,6 +451,7 @@
 			Send_Equip_Item_Request(item.serial,layer,paperdoll.mobileserial)
 		end
 	elseif (gMousePickFoundHit) then
+		print(&quot;dragdrop:drop on mousepickhit&quot;)
 		x,y,z =3D GetMouseHitTileCoords()
 		local iSerial =3D GetMouseHitSerial()
 		=


Modified: trunk/lua/main.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/main.lua (original)
+++ trunk/lua/main.lua Fri Dec 18 00:10:28 2009
@@ -300,6 +300,20 @@
     print(&quot;OgreInitResLocs done&quot;)
 end
 =

+
+--###############################
+--### custom fadeline styling ###
+--###############################
+
+function FadeLine_CreateDialog		() return GetDesktopWidget():CreateChild(&quot;=
Group&quot;) end
+function FadeLine_Widget_Create		(dialog,x,y,text,h,color,font)
+	local r,g,b,a =3D unpack(color)
+	return dialog:CreateChild(&quot;UOText&quot;,{x=3Dx,y=3Dy,text=3Dtext,col=3D{r=3Dr,=
g=3Dg,b=3Db,a=3Da},bold=3Dtrue}) =

+end
+function FadeLine_Widget_SetPos		(widget,x,y) widget:SetPos(x,y) end
+function FadeLine_Widget_SetColor	(widget,r,g,b,a) widget:SetCol(r,g,b,a) =
widget:UpdateGeometry() end
+
+
 --###############################
 --###        FUNCTIONS        ###
 --###############################

Modified: trunk/lua/widgets/widget.uotext.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/widgets/widget.uotext.lua (original)
+++ trunk/lua/widgets/widget.uotext.lua Fri Dec 18 00:10:28 2009
@@ -57,8 +57,8 @@
 =

 function gWidgetPrototype.UOText:SetText (text) self:SetUOHtml(text,false)=
 end
 =

-function gWidgetPrototype.UOText:SetCol (r,g,b)
-	self.params.col =3D {r=3Dr,g=3Dg,b=3Db}
+function gWidgetPrototype.UOText:SetCol (r,g,b,a)
+	self.params.col =3D {r=3Dr,g=3Dg,b=3Db,a=3Da}
 end
 =

 function gWidgetPrototype.UOText:GetPlainText () =


Modified: trunk/scripts/luabindheader.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/scripts/luabindheader.lua (original)
+++ trunk/scripts/luabindheader.lua Fri Dec 18 00:10:28 2009
@@ -7,33 +7,45 @@
 function Main ()
 	local basepath =3D &quot;/usr/local/include/OGRE/&quot;
 	=

-	local classes =3D {		{basepath..&quot;OgreLight.h&quot;				,&quot;Light&quot;			,{&quot;MovableObj=
ect&quot;}},	=

-							{basepath..&quot;OgreSceneManager.h&quot;			,&quot;SceneManager&quot;		},
-							{basepath..&quot;OgreFrustum.h&quot;				,&quot;Frustum&quot;			},
-							{basepath..&quot;OgreCamera.h&quot;				,&quot;Camera&quot;			,{&quot;Frustum&quot;}}, -- Renderab=
le,MovableObject}
-							{basepath..&quot;OgreSceneNode.h&quot;			,&quot;SceneNode&quot;		,{&quot;Node&quot;,&quot;Renderable&quot;}=
},
-							{basepath..&quot;OgreNode.h&quot;					,&quot;Node&quot;				,{&quot;Renderable&quot;}},
-							{basepath..&quot;OgreMovableObject.h&quot;		,&quot;MovableObject&quot;	},
-							{basepath..&quot;OgreRenderable.h&quot;			,&quot;Renderable&quot;		},
-							{basepath..&quot;OgreVertexIndexData.h&quot;		,&quot;VertexData&quot;		},
-							{basepath..&quot;OgreVertexIndexData.h&quot;		,&quot;IndexData&quot;		},
+	local classes =3D {		=

 							=

-							{basepath..&quot;OgreResource.h&quot;				,&quot;Resource&quot;			},
-							{basepath..&quot;OgreSkeleton.h&quot;				,&quot;Skeleton&quot;			,{&quot;Resource&quot;}},
-							{basepath..&quot;OgreBone.h&quot;					,&quot;Bone&quot;				,{&quot;Node&quot;,&quot;Renderable&quot;}},
-							{basepath..&quot;OgreAnimation.h&quot;			,&quot;Animation&quot;		},
-							{basepath..&quot;OgreMesh.h&quot;					,&quot;Mesh&quot;				,{&quot;Resource&quot;}},
-							{basepath..&quot;OgreSubMesh.h&quot;				,&quot;SubMesh&quot;			},
-									=

-							{basepath..&quot;OgreEntity.h&quot;				,&quot;Entity&quot;			,{&quot;MovableObject&quot;}},
+							{basepath..&quot;OgreMovableObject.h&quot;		,&quot;MovableObject&quot;		,{}},
+							{basepath..&quot;OgreRenderable.h&quot;			,&quot;Renderable&quot;			,{}},
+							{basepath..&quot;OgreResource.h&quot;				,&quot;Resource&quot;				,{}},
+							{basepath..&quot;OgreNode.h&quot;					,&quot;Node&quot;					,{&quot;Renderable&quot;}},
 							=

+							{basepath..&quot;OgreLight.h&quot;				,&quot;Light&quot;				,{&quot;MovableObject&quot;}},	=

+							{basepath..&quot;OgreSceneManager.h&quot;			,&quot;SceneManager&quot;			,{}},
+							{basepath..&quot;OgreFrustum.h&quot;				,&quot;Frustum&quot;				,{}},
+							{basepath..&quot;OgreCamera.h&quot;				,&quot;Camera&quot;				,{&quot;Frustum&quot;}}, -- Rendera=
ble,MovableObject}
+							{basepath..&quot;OgreSceneNode.h&quot;			,&quot;SceneNode&quot;			,{&quot;Node&quot;,&quot;Renderable&quot;=
}},
+							{basepath..&quot;OgreVertexIndexData.h&quot;		,&quot;VertexData&quot;			,{}},
+							{basepath..&quot;OgreVertexIndexData.h&quot;		,&quot;IndexData&quot;			,{}},
+								=

+							{basepath..&quot;OgreSkeleton.h&quot;				,&quot;Skeleton&quot;				,{&quot;Resource&quot;}},
+							{basepath..&quot;OgreBone.h&quot;					,&quot;Bone&quot;					,{&quot;Node&quot;,&quot;Renderable&quot;}},
+							{basepath..&quot;OgreAnimation.h&quot;			,&quot;Animation&quot;			,{}},
+							{basepath..&quot;OgreMesh.h&quot;					,&quot;Mesh&quot;					,{&quot;Resource&quot;}},
+							{basepath..&quot;OgreSubMesh.h&quot;				,&quot;SubMesh&quot;				,{}},
+										=

+							{basepath..&quot;OgreEntity.h&quot;				,&quot;Entity&quot;				,{&quot;MovableObject&quot;}},
+							{basepath..&quot;OgreAnimationTrack.h&quot;		,&quot;AnimationTrack&quot;		,{}},
+							{basepath..&quot;OgreAnimationTrack.h&quot;		,&quot;NodeAnimationTrack&quot;	,{&quot;Animati=
onTrack&quot;}},
 							=

-							--~ {basepath..&quot;OgreRenderOperation.h&quot;		,&quot;RenderOperation&quot;},	-- cus=
tom binding made, not good for auto-bind
-							--~ {basepath..&quot;OgreHardwareVertexBuffer.h&quot;	,&quot;VertexDeclaration&quot;},	=
-- custom binding made, not good for auto-bind
+							{basepath..&quot;OgreKeyFrame.h&quot;				,&quot;KeyFrame&quot;				,{}},
+							{basepath..&quot;OgreKeyFrame.h&quot;				,&quot;NumericKeyFrame&quot;		,{&quot;KeyFrame&quot;}},
+							{basepath..&quot;OgreKeyFrame.h&quot;				,&quot;TransformKeyFrame&quot;	,{&quot;KeyFrame&quot;}},
+							{basepath..&quot;OgreKeyFrame.h&quot;				,&quot;VertexMorphKeyFrame&quot;	,{&quot;KeyFrame&quot;}=
},
+							{basepath..&quot;OgreKeyFrame.h&quot;				,&quot;VertexPoseKeyFrame&quot;	,{&quot;KeyFrame&quot;}},
+							=

+							{basepath..&quot;OgreRenderOperation.h&quot;		,&quot;RenderOperation&quot;},	-- custom =
binding made, not good for auto-bind
+							{basepath..&quot;OgreHardwareVertexBuffer.h&quot;	,&quot;VertexDeclaration&quot;},	-- c=
ustom binding made, not good for auto-bind
 							--~ GenerateBinding(RobMovable,{MovableObject})
 							--~ GenerateBinding(RobRenderable,{Renderable})
 							=

 						}
+						=

+	-- register types and prepare
 	for k,arr in pairs(classes) do
 		local filepath,classname,parentclassnames =3D unpack(arr)
 		local c =3D {}
@@ -43,13 +55,11 @@
 		_G[classname] =3D c
 	end
 	=

-	--~ RobRenderable	=3D =

-	--~ RobMovable		=3D =

-	=

 	gOutLines =3D {}
 =

 	RegisterVarTypes()
 	=

+	-- generate bindings here
 	for k,arr in pairs(classes) do
 		local filepath,classname,parentclassnames =3D unpack(arr)
 		local parentclasses =3D {}
@@ -58,8 +68,33 @@
 	end
 	=

 	-- output to file
-	local outlines =3D gOutLines
-	outlines =3D MyEqualizeTabs(outlines)
+	local outlines =3D {}
+	=

+	-- lugre_luabind_ogrehelper.h :  ParamX PushX
+	table.insert(outlines,&quot;&quot;)
+	table.insert(outlines,&quot;/// mylugre/include/lugre_luabind_ogrehelper.h :&quot;)
+	for k,arr in pairs(classes) do
+		local name =3D arr[2]
+		table.insert(outlines,&quot;LUABIND_DIRECTWRAP_HELPER_OBJECT_PREFIX(Ogre		,&quot;.=
.name..&quot;			)&quot;)
+	end
+	table.insert(outlines,&quot;&quot;)
+	table.insert(outlines,&quot;&quot;)
+	=

+	-- equalize tabs from binding to make the code look nice
+	for k,line in pairs(MyEqualizeTabs(gOutLines)) do table.insert(outlines,l=
ine) end
+	=

+	-- register classes in lua state
+	table.insert(outlines,&quot;/// lua binding&quot;)
+	table.insert(outlines,&quot;void	LuaRegister_LuaBinds_Ogre 	(lua_State *L) { P=
ROFILE&quot;)
+	table.insert(outlines,&quot;	// needed first as baseclasses&quot;)
+	for k,arr in pairs(classes) do
+		local name =3D arr[2]
+		table.insert(outlines,&quot;	cLuaBindDirect&lt;Ogre::&quot;..name..&quot;		&gt;::GetSingleton=
Ptr(new cLugreLuaBind_Ogre_&quot;..name..&quot;(		))-&gt;LuaRegister(L);&quot;)
+	end
+	table.insert(outlines,&quot;	LUABIND_QUICKWRAP_STATIC(getMaximumDepthInputValu=
e, { return PushNumber(L,Ogre::Root::getSingleton().getRenderSystem()-&gt;getM=
aximumDepthInputValue()); });&quot;)
+	table.insert(outlines,&quot;}&quot;)
+
+	=

 	outlines =3D table.concat(outlines,&quot;\n&quot;)
 	print(outlines)
 	local filepath =3D &quot;luabindheader.out&quot;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001948.html">[Iris-commit] [IRIS] r3188 - /trunk/premake.lua
</A></li>
	<LI>Next message: <A HREF="001950.html">[Iris-commit] [IRIS] r3190 - /trunk/lua/main.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1949">[ date ]</a>
              <a href="thread.html#1949">[ thread ]</a>
              <a href="subject.html#1949">[ subject ]</a>
              <a href="author.html#1949">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/iris-commit">More information about the Iris-commit
mailing list</a><br>
</body></html>
