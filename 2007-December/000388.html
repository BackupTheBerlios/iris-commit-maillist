<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Iris-commit] [IRIS] r1572 - in /trunk/data/lua: lib.buff.lua lib.static.lua net.other.lua net/net.buff.lua net/net.main.lua
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/iris-commit/2007-December/index.html" >
   <LINK REL="made" HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r1572%20-%20in%20/trunk/data/lua%3A%20lib.buff.lua%0A%20lib.static.lua%20net.other.lua%20net/net.buff.lua%20net/net.main.lua&In-Reply-To=%3C20071201204039.2A0BF1C182C6%40zwischenwelt.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000387.html">
   <LINK REL="Next"  HREF="000389.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Iris-commit] [IRIS] r1572 - in /trunk/data/lua: lib.buff.lua lib.static.lua net.other.lua net/net.buff.lua net/net.main.lua</H1>
    <B>no-reply at zwischenwelt.org</B> 
    <A HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r1572%20-%20in%20/trunk/data/lua%3A%20lib.buff.lua%0A%20lib.static.lua%20net.other.lua%20net/net.buff.lua%20net/net.main.lua&In-Reply-To=%3C20071201204039.2A0BF1C182C6%40zwischenwelt.org%3E"
       TITLE="[Iris-commit] [IRIS] r1572 - in /trunk/data/lua: lib.buff.lua lib.static.lua net.other.lua net/net.buff.lua net/net.main.lua">no-reply at zwischenwelt.org
       </A><BR>
    <I>Sat Dec  1 21:40:36 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000387.html">[Iris-commit] [IRIS] r1571 - /trunk/data/lua/lib.compass.lua
</A></li>
        <LI>Next message: <A HREF="000389.html">[Iris-commit] [IRIS] r1573 - in /trunk: data/lua/lib.gui.iris.lua data/lua/net.other.lua premake.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#388">[ date ]</a>
              <a href="thread.html#388">[ thread ]</a>
              <a href="subject.html#388">[ subject ]</a>
              <a href="author.html#388">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: sience
Date: Sat Dec  1 21:40:36 2007
New Revision: 1572

Log:
-small updates
-buff net.buff.lua added
-buff packet imlemented

Added:
    trunk/data/lua/net/net.buff.lua
Modified:
    trunk/data/lua/lib.buff.lua
    trunk/data/lua/lib.static.lua
    trunk/data/lua/net.other.lua
    trunk/data/lua/net/net.main.lua

Modified: trunk/data/lua/lib.buff.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.buff.lua (original)
+++ trunk/data/lua/lib.buff.lua Sat Dec  1 21:40:36 2007
@@ -1,2 +1,56 @@
--- <A HREF="http://update.uo.com/design_523.html">http://update.uo.com/design_523.html</A>
+--[[
+Buff/DeBuff System
+--------------------
+<A HREF="http://update.uo.com/design_523.html">http://update.uo.com/design_523.html</A>
 =

+Notes: =

+This is a submitted packet, information here is yet to be verified. Use at=
 own risk. =

+
+List of current Icon Names:
+//1001: Dismount =

+//1002: Disarm =

+//1005: Nightsight =

+//1006: Death Strike =

+//1007: Evil Omen =

+//1008: ? GumpID 0x7556 =

+//1009: ? GumpID 0x753A =

+//1010: Divine Fury =

+//1011: Enemy Of One =

+//1012: Stealth =

+//1013: Active Meditation =

+//1014: Blood Oath caster =

+//1015: Blood Oath curse =

+//1016: Corpse Skin =

+//1017: Mindrot =

+//1018: Pain Spike =

+//1019: Strangle =

+//1020: Gift of Renewal =

+//1021: Attune Weapon =

+//1022: Thunderstorm =

+//1023: Essence of Wind =

+//1024: Ethereal Voyage =

+//1025: Gift Of Life =

+//1026: Arcane Empowerment =

+//1027: Mortal Strike =

+//1028: Reactive Armor =

+//1029: Protection =

+//1030: Arch Protection =

+//1031: Magic Reflection =

+//1032: Incognito =

+//1033: Disguised =

+//1034: Animal Form =

+//1035: Polymorph =

+//1036: Invisibility =

+//1037: Paralyze =

+//1038: Poison =

+//1039: Bleed =

+//1040: Clumsy =

+//1041: Feeble Mind =

+//1042: Weaken =

+//1043: Curse =

+//1044: Mass Curse =

+//1045: Agility =

+//1046: Cunning =

+//1047: Strength =

+//1048: Bless
+]]--

Modified: trunk/data/lua/lib.static.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.static.lua (original)
+++ trunk/data/lua/lib.static.lua Sat Dec  1 21:40:36 2007
@@ -11,7 +11,7 @@
 gCustomModelCache =3D {}
 function GetModelPath(id) =

 	local cached =3D gCustomModelCache[id]
-	if (cached) then return cached end
+	if (cached ~=3D nil) then return cached end
 =

 	local base =3D id - math.mod(id,1000) + 1000
 	local relpath  =3D sprintf(&quot;models/to_%06d/mdl_%06d.mesh&quot;,base,id)
@@ -94,7 +94,7 @@
 			meshname =3D false	-- set mesh as not available
 		else =

 			printdebug(&quot;static&quot;,&quot;Static Meshloader:&quot;,iTranslatedTileTypeID,iHue,mes=
hname)
-			=

+
 			if (gManualArtMaterialLoader) then
 				-- create unavailable uo_art_ID materials
 				local path =3D GetModelPath(iTranslatedTileTypeID)
@@ -131,7 +131,8 @@
 	return w,x,y,z
 end
 =

---- preloads all available meshes for the statics
+-- preloads all available meshes for the statics
+-- Wrong !!! hueing must be taken from statics instead of tiledata
 function PreloadAllStaticMesh()
 	-- preload all models
 	if gTileTypeLoader then

Modified: trunk/data/lua/net.other.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/net.other.lua (original)
+++ trunk/data/lua/net.other.lua Sat Dec  1 21:40:36 2007
@@ -55,7 +55,6 @@
 kPacket_Generic_SubCommand_KR_HouseGumpResponse_primary	=3D hex2num(&quot;0x74&quot;=
)	--BF.2F.74 - KR Ban House Menu Gump Response
 --a.s.o. to BF.2F.80
 kPacket_Generic_SubCommand_TargetbyResource		=3D hex2num(&quot;0x30&quot;)	---BF.30 =
- KR Target By Resource Macro
-
 kPacket_Generic_SubCommand_QuestGumpRequest		=3D hex2num(&quot;0x32&quot;)	-- Client=
 -&gt; Server : Done!
 --[[
 -race_gender-packet
@@ -68,78 +67,6 @@
 WORD 	HairHue =

 WORD 	BeardId =

 WORD 	BeardHue
-
-Buff/DeBuff System
---------------------
-<A HREF="http://update.uo.com/design_523.html">http://update.uo.com/design_523.html</A>
-
-BYTE[1] Cmd
-BYTE[2] Length
-BYTE[4] Serial of player
-BYTE[2] Icon Number to show
-BYTE[2] 0x1 =3D Show, 0x0 =3D Remove. On remove byte, packet ends here.
-BYTE[4] 0x00000000
-BYTE[2] Icon Number to show.
-BYTE[2] 0x1 =3D Show
-BYTE[4] 0x00000000
-BYTE[2] Time in seconds (simple countdown without automatic remove)
-BYTE[2] 0x0000
-BYTE[1] 0x00
-BYTE[4] Cliloc ID of title of icon.
-BYTE[4] Cliloc ID for the Description of the icon. If no arguments for cli=
loc, then add 10 more bytes 0x00000000000000000000 and end packet
-BYTE[4] 0x00000000
-BYTE[2] 0x01
-BYTE[2] 0x0000
-BYTE[len(str)*2] Flipped Unicode String (&quot; &quot;+str) (To seperate the entrys =
add &quot; &quot;)
-BYTE[2] 0x01
-BYTE[2] 0x0000
-
-//1001: Dismount =

-//1002: Disarm =

-//1005: Nightsight =

-//1006: Death Strike =

-//1007: Evil Omen =

-//1008: ? GumpID 0x7556 =

-//1009: ? GumpID 0x753A =

-//1010: Divine Fury =

-//1011: Enemy Of One =

-//1012: Stealth =

-//1013: Active Meditation =

-//1014: Blood Oath caster =

-//1015: Blood Oath curse =

-//1016: Corpse Skin =

-//1017: Mindrot =

-//1018: Pain Spike =

-//1019: Strangle =

-//1020: Gift of Renewal =

-//1021: Attune Weapon =

-//1022: Thunderstorm =

-//1023: Essence of Wind =

-//1024: Ethereal Voyage =

-//1025: Gift Of Life =

-//1026: Arcane Empowerment =

-//1027: Mortal Strike =

-//1028: Reactive Armor =

-//1029: Protection =

-//1030: Arch Protection =

-//1031: Magic Reflection =

-//1032: Incognito =

-//1033: Disguised =

-//1034: Animal Form =

-//1035: Polymorph =

-//1036: Invisibility =

-//1037: Paralyze =

-//1038: Poison =

-//1039: Bleed =

-//1040: Clumsy =

-//1041: Feeble Mind =

-//1042: Weaken =

-//1043: Curse =

-//1044: Mass Curse =

-//1045: Agility =

-//1046: Cunning =

-//1047: Strength =

-//1048: Bless
 ]]--
 =

 gActWarmode =3D 0

Modified: trunk/data/lua/net/net.main.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/net/net.main.lua (original)
+++ trunk/data/lua/net/net.main.lua Sat Dec  1 21:40:36 2007
@@ -9,6 +9,7 @@
 dofile(libpath .. &quot;net/net.sound.lua&quot;)
 dofile(libpath .. &quot;net/net.login.lua&quot;)
 dofile(libpath .. &quot;net/net.skill.lua&quot;)
+dofile(libpath .. &quot;net/net.buff.lua&quot;)
 =

 -- only things that have at least 2 packets get its own file, everything e=
lse is handled here:
 dofile(libpath .. &quot;net/net.packethandlers.lua&quot;)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000387.html">[Iris-commit] [IRIS] r1571 - /trunk/data/lua/lib.compass.lua
</A></li>
	<LI>Next message: <A HREF="000389.html">[Iris-commit] [IRIS] r1573 - in /trunk: data/lua/lib.gui.iris.lua data/lua/net.other.lua premake.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#388">[ date ]</a>
              <a href="thread.html#388">[ thread ]</a>
              <a href="subject.html#388">[ subject ]</a>
              <a href="author.html#388">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/iris-commit">More information about the Iris-commit
mailing list</a><br>
</body></html>
