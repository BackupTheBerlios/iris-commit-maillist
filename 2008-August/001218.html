<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Iris-commit] [IRIS] r2413 - in /trunk: data/profiles/gfx_high.lua data/profiles/gfx_low.lua data/profiles/gfx_med.lua data/profiles/gfx_ultrahigh.lua data/profiles/gfx_ultralow.lua lua/config_declarations.lua lua/main.lua
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/iris-commit/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r2413%20-%20in%20/trunk%3A%20data/profiles/gfx_high.lua%0A%20data/profiles/gfx_low.lua%20data/profiles/gfx_med.lua%0A%20data/profiles/gfx_ultrahigh.lua%20data/profiles/gfx_ultralow.lua%0A%20lua/config_declarations.lua%20lua/main.lua&In-Reply-To=%3C20080827093420.D322E1C18259%40zwischenwelt.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001217.html">
   <LINK REL="Next"  HREF="001219.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Iris-commit] [IRIS] r2413 - in /trunk: data/profiles/gfx_high.lua data/profiles/gfx_low.lua data/profiles/gfx_med.lua data/profiles/gfx_ultrahigh.lua data/profiles/gfx_ultralow.lua lua/config_declarations.lua lua/main.lua</H1>
    <B>no-reply at zwischenwelt.org</B> 
    <A HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r2413%20-%20in%20/trunk%3A%20data/profiles/gfx_high.lua%0A%20data/profiles/gfx_low.lua%20data/profiles/gfx_med.lua%0A%20data/profiles/gfx_ultrahigh.lua%20data/profiles/gfx_ultralow.lua%0A%20lua/config_declarations.lua%20lua/main.lua&In-Reply-To=%3C20080827093420.D322E1C18259%40zwischenwelt.org%3E"
       TITLE="[Iris-commit] [IRIS] r2413 - in /trunk: data/profiles/gfx_high.lua data/profiles/gfx_low.lua data/profiles/gfx_med.lua data/profiles/gfx_ultrahigh.lua data/profiles/gfx_ultralow.lua lua/config_declarations.lua lua/main.lua">no-reply at zwischenwelt.org
       </A><BR>
    <I>Wed Aug 27 11:34:20 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001217.html">[Iris-commit] [IRIS] r2412 - in /trunk/lua: gui/gui.helper.lua	net/net.partysystem.lua
</A></li>
        <LI>Next message: <A HREF="001219.html">[Iris-commit] [IRIS] r2414 - in /trunk/lua: lib.3d.map.lua lib.mapblock.3d.dynamics.lua lib.mapblock.3d.multis.lua lib.mapblock.3d.statics.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1218">[ date ]</a>
              <a href="thread.html#1218">[ thread ]</a>
              <a href="subject.html#1218">[ subject ]</a>
              <a href="author.html#1218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: hagish
Date: Wed Aug 27 11:34:20 2008
New Revision: 2413

Log:
bugfix: config not working correctly. due to default config being med profi=
le there are no shadows.

Modified:
    trunk/data/profiles/gfx_high.lua
    trunk/data/profiles/gfx_low.lua
    trunk/data/profiles/gfx_med.lua
    trunk/data/profiles/gfx_ultrahigh.lua
    trunk/data/profiles/gfx_ultralow.lua
    trunk/lua/config_declarations.lua
    trunk/lua/main.lua

Modified: trunk/data/profiles/gfx_high.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/profiles/gfx_high.lua (original)
+++ trunk/data/profiles/gfx_high.lua Wed Aug 27 11:34:20 2008
@@ -1,8 +1,8 @@
 -- high gfx-profile has medium settings with fixed function shadow techniq=
ue
 =

-gAtlasRes =3D &quot;med&quot;
+gConfig:Set(&quot;gAtlasRes&quot;,&quot;med&quot;)
 =

-gShadowTechnique =3D &quot;texture_additive&quot;
-gStaticsCastShadows =3D true
-gDynamicsCastShadows =3D true
-gMobileCastShadows =3D true
+gConfig:Set(&quot;gShadowTechnique&quot;,&quot;texture_additive&quot;)
+gConfig:Set(&quot;gStaticsCastShadows&quot;,true)
+gConfig:Set(&quot;gDynamicsCastShadows&quot;,true)
+gConfig:Set(&quot;gMobileCastShadows&quot;,true)

Modified: trunk/data/profiles/gfx_low.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/profiles/gfx_low.lua (original)
+++ trunk/data/profiles/gfx_low.lua Wed Aug 27 11:34:20 2008
@@ -1,14 +1,14 @@
-gAtlasRes =3D &quot;low&quot;
+gConfig:Set(&quot;gAtlasRes&quot;,&quot;low&quot;)
 =

-gUseDistanceFog =3D false
+gConfig:Set(&quot;gUseDistanceFog&quot;,false)
 =

-gDisableMultiTexTerrainTransitions =3D true
+gConfig:Set(&quot;gDisableMultiTexTerrainTransitions&quot;,true)
 =

-gShadowTechnique =3D &quot;none&quot;
-gStaticsCastShadows =3D false
-gDynamicsCastShadows =3D false
-gMobileCastShadows =3D false
+gConfig:Set(&quot;gShadowTechnique&quot;,&quot;none&quot;)
+gConfig:Set(&quot;gStaticsCastShadows&quot;,false)
+gConfig:Set(&quot;gDynamicsCastShadows&quot;,false)
+gConfig:Set(&quot;gMobileCastShadows&quot;,false)
 =

-gGroundBlockLoaderType     =3D &quot;OnDemand&quot;
+gConfig:Set(&quot;gGroundBlockLoaderType&quot;,&quot;OnDemand&quot;)
 =

-gUseStaticFallbacks =3D false
+gConfig:Set(&quot;gUseStaticFallbacks&quot;,false)

Modified: trunk/data/profiles/gfx_med.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/profiles/gfx_med.lua (original)
+++ trunk/data/profiles/gfx_med.lua Wed Aug 27 11:34:20 2008
@@ -1,9 +1,9 @@
 -- medium gfx-profile has always the same settings as config.lua.dist
 =

-gAtlasRes =3D &quot;med&quot;
+gConfig:Set(&quot;gAtlasRes&quot;,&quot;med&quot;)
 =

-gShadowTechnique =3D &quot;none&quot;
-gTerrainCastShadows =3D false
-gStaticsCastShadows =3D false
-gDynamicsCastShadows =3D false
-gMobileCastShadows =3D false
+gConfig:Set(&quot;gShadowTechnique&quot;,&quot;none&quot;)
+gConfig:Set(&quot;gTerrainCastShadows&quot;,false)
+gConfig:Set(&quot;gStaticsCastShadows&quot;,false)
+gConfig:Set(&quot;gDynamicsCastShadows&quot;,false)
+gConfig:Set(&quot;gMobileCastShadows&quot;,false)

Modified: trunk/data/profiles/gfx_ultrahigh.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/profiles/gfx_ultrahigh.lua (original)
+++ trunk/data/profiles/gfx_ultrahigh.lua Wed Aug 27 11:34:20 2008
@@ -1,22 +1,22 @@
 -- ultrahigh gfx-profile uses no textureatlas and has (in future) depthsha=
dowmapping
 =

-gAtlasRes =3D &quot;none&quot;
+gConfig:Set(&quot;gAtlasRes&quot;,&quot;none&quot;)
 =

-gShadowTechnique =3D &quot;texture_additive&quot;
-gStaticsCastShadows =3D true
-gDynamicsCastShadows =3D true
-gMobileCastShadows =3D true
+gConfig:Set(&quot;gShadowTechnique&quot;,&quot;texture_additive&quot;)
+gConfig:Set(&quot;gStaticsCastShadows&quot;,true)
+gConfig:Set(&quot;gDynamicsCastShadows&quot;,true)
+gConfig:Set(&quot;gMobileCastShadows&quot;,true)
 =

-gUseCaelumSkysystem =3D true
+gConfig:Set(&quot;gUseCaelumSkysystem&quot;,true)
 =

-gArtMapLoaderType	=3D &quot;FullFile&quot;
+gConfig:Set(&quot;gArtMapLoaderType&quot;,&quot;FullFile&quot;)
 =

 -- currently doesn't work
---gUseHumanSkinShader =3D true
+--gUseHumanSkinShader&quot;,true
 =

 -- currently doesn't work
---gEnableLowDetailTerrainFarSight =3D true
---gEnableLowDetailTerrainFarSightRangeAdd =3D 2
+--gEnableLowDetailTerrainFarSight&quot;,true
+--gEnableLowDetailTerrainFarSightRangeAdd&quot;,2
 =

 -- currently doesn't work because of gUseStaticFallbacks
---gPreloadStaticMesh =3D true
+--gPreloadStaticMesh&quot;,true

Modified: trunk/data/profiles/gfx_ultralow.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/profiles/gfx_ultralow.lua (original)
+++ trunk/data/profiles/gfx_ultralow.lua Wed Aug 27 11:34:20 2008
@@ -1,22 +1,22 @@
-gAtlasRes =3D &quot;ultralow&quot;
+gConfig:Set(&quot;gAtlasRes&quot;,&quot;ultralow&quot;)
 =

-gDisableWater =3D true
+gConfig:Set(&quot;gDisableWater&quot;,true)
 =

-gUseDistanceFog =3D false
+gConfig:Set(&quot;gUseDistanceFog&quot;,false)
 =

-gDisableMultiTexTerrainTransitions =3D true
+gConfig:Set(&quot;gDisableMultiTexTerrainTransitions&quot;,true)
 =

-gShadowTechnique =3D &quot;none&quot;
-gStaticsCastShadows =3D false
-gDynamicsCastShadows =3D false
-gMobileCastShadows =3D false
+gConfig:Set(&quot;gShadowTechnique&quot;,&quot;none&quot;)
+gConfig:Set(&quot;gStaticsCastShadows&quot;,false)
+gConfig:Set(&quot;gDynamicsCastShadows&quot;,false)
+gConfig:Set(&quot;gMobileCastShadows&quot;,false)
 =

-gEnableGrannyMaterials =3D false
+gConfig:Set(&quot;gEnableGrannyMaterials&quot;,false)
 =

-gParticleEffectSystem =3D false
-gLightsources =3D false
+gConfig:Set(&quot;gParticleEffectSystem&quot;,false)
+gConfig:Set(&quot;gLightsources&quot;,false)
 =

-gUseStaticFallbacks =3D false
-gEnableFallBackBillboards_Dynamics =3D false
+gConfig:Set(&quot;gUseStaticFallbacks&quot;,false)
+gConfig:Set(&quot;gEnableFallBackBillboards_Dynamics&quot;,false)
 =

-gGroundBlockLoaderType     =3D &quot;OnDemand&quot;
+gConfig:Set(&quot;gGroundBlockLoaderType&quot;,&quot;OnDemand&quot;)

Modified: trunk/lua/config_declarations.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/config_declarations.lua (original)
+++ trunk/lua/config_declarations.lua Wed Aug 27 11:34:20 2008
@@ -131,9 +131,6 @@
 gConfig:DeclareEnum(&quot;gUseSoundSystem&quot;, &quot;sound&quot;, &quot;sound system&quot;, 'TODO', &quot;f=
mod&quot;,{&quot;fmod&quot;,&quot;openal&quot;})
 gConfig:DeclareBoolean(&quot;gUseEffect&quot;, &quot;sound&quot;, &quot;effects&quot;, 'enable/disable s=
ound effects', true)
 gConfig:DeclareBoolean(&quot;gUseMusic&quot;, &quot;sound&quot;, &quot;music&quot;, 'enable/disable musi=
c', true)
-
-gCurrentRenderer =3D Renderer3D	-- Renderer2D
-
 =

 gStatsInfoFadeLineColor =3D {0,1,1,1}
 =

@@ -485,17 +482,22 @@
 gConfig:DeclareBoolean(&quot;gShowHealthBarOverEveryMobile&quot;, &quot;gui&quot;, &quot;healthbar =
over mobile&quot;, 'TODO', false)
 =

 =

-
-
-
 -- compatibility stuff for old config system via global varibles
 =

 -- import all vars into global scope that they can be accesses as used
 gConfig:ForAllNames(function(n,t,v)
 		_G[n] =3D v
+		--~ ConfigSetGlobal(n,v)
+		--~ print(&quot;ForAllNames&quot;,n,v)
 	end)
+
+print(&quot;shadow&quot;,gShadowTechnique,gStaticsCastShadows)
 =

 -- register listener to keep the global scope up to date
 gConfig:RegisterListener(function(n,v)
 		_G[n] =3D v
+		--~ ConfigSetGlobal(n,v)
+		--~ print(&quot;RegisterListener&quot;,n,v)
 	end)
+
+gCurrentRenderer =3D Renderer3D	-- Renderer2D

Modified: trunk/lua/main.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/main.lua (original)
+++ trunk/lua/main.lua Wed Aug 27 11:34:20 2008
@@ -6,9 +6,9 @@
 datapath 			=3D gMainWorkingDir..&quot;data/&quot;
 libpath 			=3D gMainWorkingDir..&quot;lua/&quot;
 lugreluapath 		=3D gMainWorkingDir..(file_exists(gMainWorkingDir..&quot;mylugre=
&quot;) and &quot;mylugre/lua/&quot; or &quot;lugre/lua/&quot;)
+--~ gConfigPathFallback	=3D datapath..&quot;config.lua.dist&quot;
+--~ gConfigPathFallback	=3D libpath..&quot;config_declarations.lua&quot;
 gConfigPath 		=3D datapath..&quot;config.lua&quot;
---~ gConfigPathFallback	=3D datapath..&quot;config.lua.dist&quot;
-gConfigPathFallback	=3D libpath..&quot;config_declarations.lua&quot;
 gMacroPath 			=3D datapath..&quot;mymacros.lua&quot;
 gMacroPathFallback	=3D datapath..&quot;mymacros.lua.dist&quot;
 gMainPluginDir 		=3D gMainWorkingDir..&quot;plugins/&quot;
@@ -37,6 +37,7 @@
 =

 -- renderer second
 gRendererList =3D {}
+
 dofile(libpath .. &quot;lib.3d.renderer.lua&quot;)
 dofile(libpath .. &quot;lib.2d.renderer.lua&quot;)
 =

@@ -97,13 +98,15 @@
 =

 dofile(libpath .. &quot;lib.uoam.lua&quot;)
 =

+dofile(libpath .. &quot;config_declarations.lua&quot;)
+
 if (LugreActivateGlobalVarChecking) then LugreActivateGlobalVarChecking() =
end
 =

 --###############################
 --###        CONFIG           ###
 --###############################
 =

-dofile(gConfigPathFallback)
+--~ dofile(gConfigPathFallback)
 if (file_exists(gConfigPath)) then
 	-- execute local config
 	dofile(gConfigPath)
@@ -124,7 +127,6 @@
 	fp:close()
 end
 =

-
 --###############################
 --###        MACROS           ###
 --###############################
@@ -150,6 +152,7 @@
 --###      GRAPHIC-CONFIG     ###
 --###############################
 if (gGraphicProfile) then
+	print(&quot;gGraphicProfile shadow&quot;,gGraphicProfile)
 	local graphicprofile=3Ddatapath..&quot;profiles/gfx_&quot;..gGraphicProfile..&quot;.lua&quot;
 	if (file_exists(graphicprofile)) then
 		-- execute local graphicprofile


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001217.html">[Iris-commit] [IRIS] r2412 - in /trunk/lua: gui/gui.helper.lua	net/net.partysystem.lua
</A></li>
	<LI>Next message: <A HREF="001219.html">[Iris-commit] [IRIS] r2414 - in /trunk/lua: lib.3d.map.lua lib.mapblock.3d.dynamics.lua lib.mapblock.3d.multis.lua lib.mapblock.3d.statics.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1218">[ date ]</a>
              <a href="thread.html#1218">[ thread ]</a>
              <a href="subject.html#1218">[ subject ]</a>
              <a href="author.html#1218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/iris-commit">More information about the Iris-commit
mailing list</a><br>
</body></html>
