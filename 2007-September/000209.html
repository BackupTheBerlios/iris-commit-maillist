<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Iris-commit] [IRIS] r1394 - in /trunk: ./ bin/ cb/ data/ data/lua/ data/lua/gui/ data/lua/net/ data/lua/obj/
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/iris-commit/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r1394%20-%20in%20/trunk%3A%20./%20bin/%20cb/%20data/%20data/lua/%0A%20data/lua/gui/%20data/lua/net/%20data/lua/obj/&In-Reply-To=%3C20070918233247.0557B1524005%40zwischenwelt.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000208.html">
   <LINK REL="Next"  HREF="000210.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Iris-commit] [IRIS] r1394 - in /trunk: ./ bin/ cb/ data/ data/lua/ data/lua/gui/ data/lua/net/ data/lua/obj/</H1>
    <B>no-reply at zwischenwelt.org</B> 
    <A HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r1394%20-%20in%20/trunk%3A%20./%20bin/%20cb/%20data/%20data/lua/%0A%20data/lua/gui/%20data/lua/net/%20data/lua/obj/&In-Reply-To=%3C20070918233247.0557B1524005%40zwischenwelt.org%3E"
       TITLE="[Iris-commit] [IRIS] r1394 - in /trunk: ./ bin/ cb/ data/ data/lua/ data/lua/gui/ data/lua/net/ data/lua/obj/">no-reply at zwischenwelt.org
       </A><BR>
    <I>Wed Sep 19 01:32:46 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000208.html">[Iris-commit] [IRIS] r1393 - in /trunk: SConstruct	data/lua/main.lua src/main.cpp
</A></li>
        <LI>Next message: <A HREF="000210.html">[Iris-commit] [IRIS] r1395 - in /trunk: bin/	data/terrain/materials/ vc8/
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#209">[ date ]</a>
              <a href="thread.html#209">[ thread ]</a>
              <a href="subject.html#209">[ subject ]</a>
              <a href="author.html#209">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: sience
Date: Wed Sep 19 01:32:46 2007
New Revision: 1394

Log:
-soundglobals fixed for lugre
-backpack toggle fixed
-several debugprints fixed
-gz_Factor moved to lib.3d.renderer.lua
-some obsolete comments removed
-readme updated

Modified:
    trunk/README
    trunk/bin/iris2.exe
    trunk/cb/iris2.cbp
    trunk/data/config.lua.dist
    trunk/data/lua/gui/gui.paperdoll.lua
    trunk/data/lua/lib.3d.map.lua
    trunk/data/lua/lib.3d.renderer.lua
    trunk/data/lua/lib.cliloc.lua
    trunk/data/lua/lib.gfm.lua
    trunk/data/lua/lib.gui.iris.lua
    trunk/data/lua/lib.loading.lua
    trunk/data/lua/lib.sound.iris.lua
    trunk/data/lua/lib.test.lua
    trunk/data/lua/net.walk.lua
    trunk/data/lua/net/net.effect.lua
    trunk/data/lua/obj/obj.container.lua
    trunk/data/lua/obj/obj.player.lua

Modified: trunk/README
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/README (original)
+++ trunk/README Wed Sep 19 01:32:46 2007
@@ -11,6 +11,7 @@
 	- Samurai Empire and Gold Trial  (SE =3D=3D Gold)
 	- Mondain's Legacy
 	- or later.
+
 2. Install and run Ultima Online and patch it to the newest Version.
 =

 3. Run Iris2_Setup.exe
@@ -29,10 +30,10 @@
 <A HREF="http://www.fileplanet.com/150525/150000/fileinfo/Ultima-Online-Gold-15-day=">http://www.fileplanet.com/150525/150000/fileinfo/Ultima-Online-Gold-15-day=</A>
-Trial
 =

 INSTALL SEE
-<A HREF="http://www.iris2.de/">http://www.iris2.de/</A>
+<A HREF="http://iris2.de/index.php/InstallationManual">http://iris2.de/index.php/InstallationManual</A>		(English)
+<A HREF="http://iris2.de/index.php/Installations_Anleitung">http://iris2.de/index.php/Installations_Anleitung</A>	(deutsch)
 =

 =3D=3D controls =3D=3D
-
 arrow keys for moving the player
 u : walk to targetted position
 =

@@ -78,13 +79,6 @@
 -g path/to/grannyfile.grn		: prints granny dump
 -gb path/to/grannyfile.grn		: prints granny bone info
 =

-=3D=3D=3D license =3D=3D=3D
-
-see COPYING for license of our code
-
-FMOD Sound System, copyright =C2=A9 Firelight Technologies Pty, Ltd., 1994=
-2007.
-<A HREF="http://www.fmod.org/index.php/sales">http://www.fmod.org/index.php/sales</A>
-
 =3D=3D=3D debug mode =3D=3D=3D
 a : show first model and anim =

 =

@@ -115,8 +109,7 @@
 	(this is for searching and destroying billboard-like models)
 	(careful with big changes to param1, will be slow, skipping tries to load=
 all meshes in between)
 =

-=3D=3D=3D 2d-renderer and data =3D=3D=3D
-
+=3D=3D=3D 2d-Renderer and data =3D=3D=3D
 the 2DRenderer is only available as compiled .luac file, =

 it is a optional closed source plugin that is not statically linked, =

 if you don't want it, you can delete the .luac file.
@@ -134,14 +127,27 @@
 =3D=3D=3D code documentation =3D=3D=3D
 doxygen syntax has been used, might be interesting to generate documentati=
on from the sourcecode
 =

+<A HREF="http://www.zwischenwelt.org/~hagish/irisdocs/doc/html/">http://www.zwischenwelt.org/~hagish/irisdocs/doc/html/</A>
+
 =3D=3D developer =3D=3D
 Florian Fischer (SiENcE) =

 Robert Noll (Ghoulsblade) =

 Sebastian Dorda (hagish)
 R=C3=BCdiger Pakmor (Varan)
 =

-visit our wiki/website and forum at 	<A HREF="http://www.iris2.de/">http://www.iris2.de/</A>
+=3D=3D=3D other projects of the iris-ogre-developers =3D=3D=3D
+<A HREF="http://schattenkind.net/">http://schattenkind.net/</A>		- Our mainsite (a Game developer association)
+<A HREF="http://www.iris2.de/">http://www.iris2.de/</A>			- Iris Website
+<A HREF="http://sfz.schattenkind.net/">http://sfz.schattenkind.net/</A>	- Stressfree Zone (space game)
+<A HREF="http://lugre.schattenkind.net">http://lugre.schattenkind.net</A>	- Lugre	(middelware for Ogre3D, Lua, Fmod, O=
penAL, ODE, Boost)
 =

-=3D=3D=3D other projects of the iris-ogre-developers =3D=3D=3D
-<A HREF="http://schattenkind.net/">http://schattenkind.net/</A>
-<A HREF="http://sfz.schattenkind.net/">http://sfz.schattenkind.net/</A>
+=3D=3D=3D license =3D=3D=3D
+see COPYING for license of our code
+
+further take a look here:
+FMOD Sound System, copyright =C2=A9 Firelight Technologies Pty, Ltd., 1994=
-2007.
+<A HREF="http://www.fmod.org/index.php/sales">http://www.fmod.org/index.php/sales</A>
+
+Ogre3D see: README.ogre
+
+TinyXML see: README.tinyxml

Modified: trunk/bin/iris2.exe
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
Binary files - no diff available.

Modified: trunk/cb/iris2.cbp
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/cb/iris2.cbp (original)
+++ trunk/cb/iris2.cbp Wed Sep 19 01:32:46 2007
@@ -85,7 +85,7 @@
 			&lt;Add option=3D&quot;-DWIN32&quot; /&gt;
 			&lt;Add option=3D&quot;-D_WINDOWS&quot; /&gt;
 			&lt;Add option=3D&quot;-DMINGW&quot; /&gt;
-			&lt;Add option=3D'-DMAIN_WORKING_DIR=3D&quot;../&quot;' /&gt;
+			&lt;Add option=3D'-DMAIN_WORKING_DIR=3D\&quot;../\&quot;' /&gt;
 			&lt;Add option=3D&quot;-DUSE_FMOD&quot; /&gt;
 			&lt;Add directory=3D&quot;..\include&quot; /&gt;
 			&lt;Add directory=3D&quot;$(OGRE_HOME)\include&quot; /&gt;
@@ -151,6 +151,7 @@
 		&lt;Unit filename=3D&quot;..\lugre\include\lugre_shell.h&quot; /&gt;
 		&lt;Unit filename=3D&quot;..\lugre\include\lugre_smartptr.h&quot; /&gt;
 		&lt;Unit filename=3D&quot;..\lugre\include\lugre_sound.h&quot; /&gt;
+		&lt;Unit filename=3D&quot;..\lugre\include\lugre_thread.h&quot; /&gt;
 		&lt;Unit filename=3D&quot;..\lugre\include\lugre_timer.h&quot; /&gt;
 		&lt;Unit filename=3D&quot;..\lugre\include\lugre_viewport.h&quot; /&gt;
 		&lt;Unit filename=3D&quot;..\lugre\include\lugre_widget.h&quot; /&gt;
@@ -196,6 +197,8 @@
 		&lt;Unit filename=3D&quot;..\lugre\src\lugre_sound.cpp&quot; /&gt;
 		&lt;Unit filename=3D&quot;..\lugre\src\lugre_sound_L.cpp&quot; /&gt;
 		&lt;Unit filename=3D&quot;..\lugre\src\lugre_sound_fmod.cpp&quot; /&gt;
+		&lt;Unit filename=3D&quot;..\lugre\src\lugre_thread.cpp&quot; /&gt;
+		&lt;Unit filename=3D&quot;..\lugre\src\lugre_thread_L.cpp&quot; /&gt;
 		&lt;Unit filename=3D&quot;..\lugre\src\lugre_timer.cpp&quot; /&gt;
 		&lt;Unit filename=3D&quot;..\lugre\src\lugre_transform_mesh.cpp&quot; /&gt;
 		&lt;Unit filename=3D&quot;..\lugre\src\lugre_viewport_L.cpp&quot; /&gt;

Modified: trunk/data/config.lua.dist
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/config.lua.dist (original)
+++ trunk/data/config.lua.dist Wed Sep 19 01:32:46 2007
@@ -74,7 +74,7 @@
 -- Soundeffects &amp; Music
 -- gUseSoundSystem =3D &quot;openal&quot;
 gUseSoundSystem =3D &quot;fmod&quot;
-gUseSoundeffects =3D true
+gUseEffect =3D true
 gUseMusic =3D true
 =

 gCurrentRenderer =3D Renderer3D	-- Renderer2D

Modified: trunk/data/lua/gui/gui.paperdoll.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/gui/gui.paperdoll.lua (original)
+++ trunk/data/lua/gui/gui.paperdoll.lua Wed Sep 19 01:32:46 2007
@@ -197,7 +197,7 @@
 		if (bodygumpid) then
 			dialog.bodywidget =3D MakeBorderGumpPart(dialog.rootwidget,bodygumpid,9=
,19 , 0, 0, 0,skinhue)
 		else =

-			print(&quot;Open_Paperdoll : unknown bodyid &quot;,bodyid,sprintf(&quot;0x%04x&quot;,bodyid=
))
+			--print(&quot;Open_Paperdoll : unknown bodyid &quot;,bodyid,sprintf(&quot;0x%04x&quot;,body=
id))
 			-- TODO : fallback/default bodyid ?
 		end
 	=

@@ -296,7 +296,7 @@
 =

 --Send Quest, Guild Button req. to Server -&gt; Server returns a Serverside G=
ump
 function Send_AOSCommand(subcmd,player_serial)
-	print(&quot;NET: Send_AOSCommand: &quot;..subcmd..&quot; Player_Serial=3D&quot;..player_seria=
l)
+	--print(&quot;NET: Send_AOSCommand: &quot;..subcmd..&quot; Player_Serial=3D&quot;..player_ser=
ial)
 	local out =3D GetSendFIFO()
 	out:PushNetUint8(kPacket_AOS_Command)
 	if (subcmd =3D=3D kPacket_Generic_SubCommand_QuestGumpRequest) then
@@ -320,12 +320,12 @@
 	if (gPlayerBodySerial and gPaperdolls[gPlayerBodySerial]) then
 		gPaperdolls[gPlayerBodySerial]:Close()
 	else
-		printf(&quot;opening player paperdoll&quot;)
+		--printf(&quot;opening player paperdoll&quot;)
 =

 		local playermobile =3D GetPlayerMobile()
 		=

 		if (playermobile) then =

-			print(&quot;player serial&quot;,playermobile.serial)
+			--print(&quot;player serial&quot;,playermobile.serial)
 			Send_DoubleClick(playermobile.serial)
 			=

 			Send_ClientQuery(gRequest_States,playermobile.serial)

Modified: trunk/data/lua/lib.3d.map.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.3d.map.lua (original)
+++ trunk/data/lua/lib.3d.map.lua Wed Sep 19 01:32:46 2007
@@ -9,9 +9,6 @@
 Renderer3D.gbBlendOutTerrainVisible =3D true
 Renderer3D.gMapUpdateInterval =3D 100 -- update the map not every frame, d=
ecrease for fly-videos
 Renderer3D.gMaxMapBlocksLoadedPerUpdate =3D 1 -- increase for fly-videos
-
--- static Factor to rise the Z-Level for statics+dynamics
-Renderer3D.gZ_Factor =3D 0.01 --0.0090
 =

 -- the whole map cache consists of (ROBMAP_RECENTER_DIST*2)*(ROBMAP_RECENT=
ER_DIST*2)  chunks
 -- every chunk consists of ROBMAP_CHUNK_SIZE*ROBMAP_CHUNK_SIZE blocks
@@ -99,7 +96,7 @@
 end
 =

 function Renderer3D:ClearMapCache ()
-	print(&quot;ClearMapCache&quot;)
+	--print(&quot;ClearMapCache&quot;)
 	local y,row,x,chunk
 	for y,row in pairs(self.gMapChunks) do
 		for x,chunk in pairs(row) do

Modified: trunk/data/lua/lib.3d.renderer.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.3d.renderer.lua (original)
+++ trunk/data/lua/lib.3d.renderer.lua Wed Sep 19 01:32:46 2007
@@ -1,9 +1,10 @@
 Renderer3D =3D {}
 gRendererList[ &quot;Renderer3d&quot; ] =3D Renderer3D
 =

+-- static Factor to rise the Z-Level for statics+dynamics
+Renderer3D.gZ_Factor =3D 0.01 --0.0090
 		=

 gHudNamesFontSize =3D 12
-
 =

 Renderer3D.gbActive =3D false
 Renderer3D.giLastAnimStepTime =3D nil
@@ -705,8 +706,9 @@
 	-- Detect Multis
 	if item.artid &gt;=3D gMulti_ID then
 		-- Check if Serverside Multi (Custom Multi)
-		print(&quot;-----------------------------&quot;)
-		print(&quot;ARTID&quot;,item.artid,vardump(item))
+		printdebug(&quot;multi&quot;,&quot;-----------------------------&quot;)
+		printdebug(&quot;multi&quot;, sprintf(&quot;ARTID&quot;,item.artid,vardump(item)) )
+
 		if (item.lTile) then
 			printdebug(&quot;multi&quot;,&quot;Serverside Multi detected&quot;)
 			local rootgfx =3D CreateRootGfx3D()
@@ -749,7 +751,7 @@
 				local blocknum,xloc,yloc,zloc,flags
 				blocknum,xloc,yloc,zloc,flags =3D gMultiLoader:GetMultiParts(id,p)
 				=

-				--printdebug(&quot;multi&quot;,&quot;part&quot;,p,&quot;:&quot;,blocknum,xloc,yloc,zloc,flags)
+				printdebug(&quot;multi&quot;,&quot;part&quot;,p,&quot;:&quot;,blocknum,xloc,yloc,zloc,flags)
 				=

 				-- skip invisible parts
 				if flags =3D=3D 1 then
@@ -780,9 +782,6 @@
 			for k,v in pairs(item.lMultiChildGfx) do item.gfx:SetOrientation(GetSta=
ticMeshOrientation(v.artid)) end
 =

 			self:UpdateDynamicItemPos(item)
-
-			print(&quot;+++++++++++++++++++++++++&quot;)
-			print(&quot;ITEM&quot;,vardump(item))
 		else =

 			printdebug(&quot;missing&quot;,sprintf(&quot;Renderer3D:CreateDynamicGfx: failed loadi=
ng mesh for dynamic (multi): artid=3D%i z_typename=3D%s\n&quot;,item.artid or -1=
,item.z_typename or &quot;&quot;))
 		end
@@ -806,13 +805,12 @@
 			end
 =

 			-- --------------------------------------------------------------------=
-----
-			-- todo: HACK here (zadd because dynamic street-tiles dont look good fl=
ying)
+			-- todo: HACK here (zadd because dynamic street-tiles dont look good (f=
lying).)
 			if (CountMeshTriangles(meshname) &lt;=3D 4) then =

 				item.gfx:SetCastShadows(false)	-- groundtiles and item billboards shou=
ldn't cast shadows
 				if (gTileTypeLoader) then
 					if not(isSurface( GetStaticTileTypeFlags(item.artid) or 0 )) then
 						item.zadd =3D self.gDynamicZAdd
-						--print(&quot;Surface unter 4 triangles nicht zadd=3D&quot;..item.artid)
 					end
 				end
 			end
@@ -931,7 +929,7 @@
 =

 -- select the given mobile
 function Renderer3D:SelectMobile (iSerial)
-	-- print (&quot;selectmobile&quot;,iSerial)
+	printdebug(&quot;mobile&quot;,sprintf(&quot;selectmobile&quot;,iSerial))
 	self:DeselectMobile()
 	if (iSerial ~=3D 0) then
 		local mobile =3D GetMobile(iSerial)
@@ -940,8 +938,6 @@
 			-- TODO is it possible that selection is not created (mobile:Update() c=
reates selection)
 			mobile.selection:SetVisible(true)
 			giSelectedMobile =3D iSerial
-			=

-			-- CombatCreateDamageText(&quot;jupii!&quot;,mobile.xloc,mobile.yloc,mobile.zloc)
-		end
-	end
-end
+		end
+	end
+end

Modified: trunk/data/lua/lib.cliloc.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.cliloc.lua (original)
+++ trunk/data/lua/lib.cliloc.lua Wed Sep 19 01:32:46 2007
@@ -15,7 +15,7 @@
 --done reading cliloc uo/Cliloc.enu, index range from 500000 to 3011032
 =

 function GetIntLocText (intlocid,textid) =

-	print(&quot;GetIntLocText&quot;,intlocid,textid)
+	--print(&quot;GetIntLocText&quot;,intlocid,textid)
 	local intloc =3D gIntLocLoaders[intlocid]
 	return intloc and intloc:Get(textid)
 end

Modified: trunk/data/lua/lib.gfm.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.gfm.lua (original)
+++ trunk/data/lua/lib.gfm.lua Wed Sep 19 01:32:46 2007
@@ -1,7 +1,6 @@
 -- this file is for parsing the xml like data in data/gfm/
  =

 gBorderGumpIndexAdd =3D { LT=3D0,T=3D1,RT=3D2,L=3D3,M=3D4,R=3D5,LB=3D6,B=
=3D7,RB=3D8,RB_Resize=3D9 }
-
 =

 function GumpButtonSetOver		(widget) widget.gfx:SetMaterial(widget.mat_ove=
r) end
 function GumpButtonSetNormal	(widget) widget.gfx:SetMaterial(widget.mat_no=
rmal) end
@@ -197,7 +196,7 @@
 end
 =

 function GfmTest()
-	--[[
+--[[
 	-- gGumpLoader
 	--local iGumpID =3D (hex2num(&quot;0x47E&quot;)) -- small x button
 	--local iGumpID =3D (hex2num(&quot;0x1393&quot;)) -- big compass
@@ -228,7 +227,7 @@
 		--control : class=3Dbutton, name=3D'button_47e', left=3D318,270,28,21
 		--gump(): normal=3D0x47E over=3D0x47F pressed=3D0x47E
 	end
-	]]--
+]]--
 	=

 	if (true and gGumpLoader) then
 		--local path =3D &quot;data/gfm/askquit.gfm&quot;
@@ -238,7 +237,8 @@
 		--local path =3D &quot;data/gfm/connecting.gfm&quot;
 		--local path =3D &quot;data/gfm/loading.gfm&quot;
 		--local path =3D &quot;data/gfm/neterror.gfm&quot;
-		--[[local mydialog =3D CreateGumpDlgFromGfm(path)
+--[[
+		local mydialog =3D CreateGumpDlgFromGfm(path)
 		mydialog.rootwidget.gfx:SetPos(120,0)
 		local w =3D mydialog.controls[&quot;hitsbar&quot;].gfx:GetWidth()
 		local h =3D mydialog.controls[&quot;hitsbar&quot;].gfx:GetHeight()
@@ -247,18 +247,17 @@
 		mydialog.controls[&quot;hitsbar&quot;].gfx:SetDimensions(w*p,h)
 		--mydialog.controls[&quot;hitsbar&quot;].gfx:SetUV(0.0,0.0,p,1.0)
 		--GfmDump(path)
-		]]--
-	end
-	=

-	=

-	--[[
+]]--
+	end
+	=

+	=

+--[[
 	print(&quot;map_ID=3D&quot;,xmlchild(mapinfo,&quot;ID&quot;)[1])
 	print(&quot;map_NAME=3D&quot;,xmlchild(mapinfo,&quot;NAME&quot;)[1])
 	print(&quot;map_HEIGHT=3D&quot;,xmlchild(mapinfo,&quot;HEIGHT&quot;)[1])
 	print(&quot;map_SKYBOX=3D&quot;,xmlchild(mapinfo,&quot;SKYBOX&quot;)[1])
-	]]--
-end
-
+]]--
+end
 =

 function CreateGumpDlgFromGfm (path) =

 	local dialog =3D guimaker.MakeSortedDialog()
@@ -331,8 +330,6 @@
 		dialog.controls[attr.name] =3D widget
 	end
 end
-
-
 =

 function GfmDump (path)
 	print(&quot;GfmDump&quot;,path)
@@ -370,46 +367,5 @@
 			printf(&quot;\n&quot;)
 		end
 	end end
-	--[[
-	output example :
-	GfmDump datapath..&quot;gfm/neterror.gfm&quot;
-	width=3D  640
-	height=3D 480
-	control : class=3Dborder, name=3D'border_a28', left=3D126, top=3D146, wid=
th=3D409, height=3D182
-	  gump(0xA28):
-	  event():
-	control : class=3Dlabel, name=3D'message', left=3D218, top=3D230, width=
=3D221, height=3D24
-	  event():
-	  text(Unknown net error): hue=3D0x95 font=3D3 align=3Dcenter
-	control : class=3Dbutton, name=3D'button_47e', left=3D318, top=3D270, wid=
th=3D28, height=3D21
-	  gump(): normal=3D0x47E over=3D0x47F pressed=3D0x47E
-	  event(): onclick=3Dhandler_on_main
-	control : class=3Dlabel, name=3D'label', left=3D254, top=3D195, width=3D1=
55, height=3D24
-	  event():
-	  text(Network Error): hue=3D0x95 font=3D0 align=3Dcenter
-	]]--
-end
-
---[[
-&lt;?xml version=3D'1.0'?&gt;
-&lt;form width=3D'640' height=3D'480' alpha=3D'0' flags=3D'0' shape=3D''&gt;
- &lt;fade alpha=3D'0' time=3D'0'/&gt;
- &lt;event onclick=3D'' onclose=3D'' onmouseup=3D'' onmousedown=3D'' onkeypre=
ssed=3D''/&gt;
-&lt;control class=3D'border' name=3D'border_a28' left=3D'126' top=3D'146' wid=
th=3D'409' height=3D'182' freezed=3D'1' visible=3D'1' alpha=3D'0' flags=3D'=
0'&gt;
- &lt;event onclick=3D'' onclose=3D'' onmouseup=3D'' onmousedown=3D'' onkeypre=
ssed=3D''/&gt;
- &lt;gump&gt;0xA28&lt;/gump&gt;
-&lt;/control&gt;
-&lt;control class=3D'label' name=3D'message' left=3D'218' top=3D'230' width=
=3D'221' height=3D'24' freezed=3D'1' visible=3D'1' alpha=3D'0' flags=3D'0'&gt;
- &lt;event onclick=3D'' onclose=3D'' onmouseup=3D'' onmousedown=3D'' onkeypre=
ssed=3D''/&gt;
- &lt;text font=3D'3' hue=3D'0x95' align=3D'center'&gt;Unknown net error&lt;/text&gt;
-&lt;/control&gt;
-&lt;control class=3D'button' name=3D'button_47e' left=3D'318' top=3D'270' wid=
th=3D'28' height=3D'21' freezed=3D'1' visible=3D'1' alpha=3D'0' flags=3D'0'&gt;
- &lt;event onclick=3D'handler_on_main' onclose=3D'' onmouseup=3D'' onmousedow=
n=3D'' onkeypressed=3D''/&gt;
- &lt;gump normal=3D'0x47E' over=3D'0x47F' pressed=3D'0x47E'/&gt;
-&lt;/control&gt;
-&lt;control class=3D'label' name=3D'label' left=3D'254' top=3D'195' width=3D'=
155' height=3D'24' freezed=3D'1' visible=3D'1' alpha=3D'0' flags=3D'0'&gt;
- &lt;event onclick=3D'' onclose=3D'' onmouseup=3D'' onmousedown=3D'' onkeypre=
ssed=3D''/&gt;
- &lt;text font=3D'0' hue=3D'0x95' align=3D'center'&gt;Network Error&lt;/text&gt;
-&lt;/control&gt;
-&lt;/form&gt;
-]]--
+end
+

Modified: trunk/data/lua/lib.gui.iris.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.gui.iris.lua (original)
+++ trunk/data/lua/lib.gui.iris.lua Wed Sep 19 01:32:46 2007
@@ -7,8 +7,8 @@
 -- creates all this fancy gui stuff
 function GuiInit ()
 	-- create player status
-	if GetPlayerMobile() then =

-		print(&quot;########## Open Status&quot;)
+	if GetPlayerMobile() then
+		printdebug(&quot;gump&quot;,&quot;########## UpdatePlayerBodySerial (serial) was called=
 -&gt; Open Status&quot;)
 		OpenStatus(GetPlayerMobile(),0,0) =

 	end
 end

Modified: trunk/data/lua/lib.loading.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.loading.lua (original)
+++ trunk/data/lua/lib.loading.lua Wed Sep 19 01:32:46 2007
@@ -153,7 +153,7 @@
 		gMultiLoader =3D CreateMultiLoader(gMultiLoaderType,CorrectPath(gUOPath.=
.&quot;multi.idx&quot;),CorrectPath(gUOPath..&quot;multi.mul&quot;))
 	end
 	=

-	if (gSoundLoaderType and gUseSoundeffects) then
+	if (gSoundLoaderType and gUseEffect) then
 		LoadingProfile(&quot;init SoundLoader&quot;)
 		gSoundLoader =3D CreateSoundLoader(gSoundLoaderType,CorrectPath(gUOPath.=
.&quot;soundidx.mul&quot;),CorrectPath(gUOPath..&quot;sound.mul&quot;))
 		SoundInit(gUseSoundSystem,22050)

Modified: trunk/data/lua/lib.sound.iris.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.sound.iris.lua (original)
+++ trunk/data/lua/lib.sound.iris.lua Wed Sep 19 01:32:46 2007
@@ -1,9 +1,10 @@
 =

 gSoundMusicLoop =3D true
 =

+-- same like lugre:SoundPlayEffect but written for UO specific sound.mul
 function SoundPlayEffect_UO (x,y,z,effect)
 	if gSoundLoader then
-		if gSoundSystem then
+		if gUseEffect and gSoundSystem then
 			printdebug(&quot;sound&quot;,sprintf(&quot;SoundPlayEffect(%f,%f,%f,%i)\n&quot;,x,y,z,effec=
t))
 			FlushSoundEffects()
 			local e =3D CreateSoundSource3DFromEffect(gSoundSystem,gSoundLoader,x,y=
,z,effect)
@@ -25,63 +26,60 @@
 end
 =

 function SoundPlayMusicById(musicid)
-	if gUseMusic then
-		printdebug(&quot;sound&quot;,sprintf(&quot;SoundPlayMusicById(%s)\n&quot;,musicid))
-		local config =3D CorrectPath(gUOPath..&quot;Music/Digital/Config.txt&quot;)
-		local mp3 =3D nil
-		local loop =3D nil
-		local file =3D nil
+	printdebug(&quot;sound&quot;,sprintf(&quot;SoundPlayMusicById(%s)\n&quot;,musicid))
+	local config =3D CorrectPath(gUOPath..&quot;Music/Digital/Config.txt&quot;)
+	local mp3 =3D nil
+	local loop =3D nil
+	local file =3D nil
 		=

-		-- TODO : not Config.txt not available if midi only, see ticket #32
-		if ((not config) or config =3D=3D &quot;&quot; or (not file_exists(config))) then =
return end
+	-- TODO : not Config.txt not available if midi only, see ticket #32
+	if ((not config) or config =3D=3D &quot;&quot; or (not file_exists(config))) then r=
eturn end
 		=

-		-- parse uo sound config file
-		for line in io.lines(config) do
-			local id,loop,name
-			local poss =3D string.find(line,&quot; &quot;)
-			local posc =3D string.find(line,&quot;,&quot;)
+	-- parse uo sound config file
+	for line in io.lines(config) do
+		local id,loop,name
+		local poss =3D string.find(line,&quot; &quot;)
+		local posc =3D string.find(line,&quot;,&quot;)
 			=

-			if poss then
-				if posc =3D=3D nil then
-					-- no loop specified
-					loop =3D 0
-					id =3D trim(string.sub(line,0,poss-1))
-					name =3D trim(string.sub(line,poss+1))
+		if poss then
+			if posc =3D=3D nil then
+				-- no loop specified
+				loop =3D 0
+				id =3D trim(string.sub(line,0,poss-1))
+				name =3D trim(string.sub(line,poss+1))
+			else
+				loop =3D 1
+				id =3D trim(string.sub(line,0,poss-1))
+				name =3D trim(string.sub(line,poss+1,posc-1))
+			end
+			=

+			if tonumber(id) =3D=3D musicid then
+				if (string.find(string.lower(name),&quot;.mp3&quot;) =3D=3D nil) then
+					-- add mp3 suffix
+					file =3D CorrectPath(gUOPath..&quot;Music/Digital/&quot;..name..&quot;.mp3&quot;)
 				else
-					loop =3D 1
-					id =3D trim(string.sub(line,0,poss-1))
-					name =3D trim(string.sub(line,poss+1,posc-1))
+					-- mp3 suffix aready present
+					file =3D CorrectPath(gUOPath..&quot;Music/Digital/&quot;..name)
 				end
 				=

-				if tonumber(id) =3D=3D musicid then
-					if (string.find(string.lower(name),&quot;.mp3&quot;) =3D=3D nil) then
-						-- add mp3 suffix
-						file =3D CorrectPath(gUOPath..&quot;Music/Digital/&quot;..name..&quot;.mp3&quot;)
-					else
-						-- mp3 suffix aready present
-						file =3D CorrectPath(gUOPath..&quot;Music/Digital/&quot;..name)
-					end
-					=

-					printdebug(&quot;sound&quot;,sprintf(&quot;load sound id=3D%d name=3D%s loop=3D%d fi=
le=3D%s\n&quot;,id,name,loop,file))
-					=

-					if loop =3D=3D 1 then
-						gSoundMusicLoop =3D true
-					else =

-						gSoundMusicLoop =3D false
-					end
+				printdebug(&quot;sound&quot;,sprintf(&quot;load sound id=3D%d name=3D%s loop=3D%d fil=
e=3D%s\n&quot;,id,name,loop,file))
+				=

+				if loop =3D=3D 1 then
+					gSoundMusicLoop =3D true
+				else =

+					gSoundMusicLoop =3D false
 				end
 			end
 		end
-		=

-		if file and (not gSoundMusicCurrent or gSoundMusicCurrent ~=3D file) then
-			-- play it :) only if new or other sound
-			if file_exists(file) then
-				SoundPlayMusic(file)
-				gSoundMusicCurrent =3D file
-			else =

-				print(&quot;ERROR sound file not found: &quot;..file)
-			end
+	end
+	=

+	if file and (not gSoundMusicCurrent or gSoundMusicCurrent ~=3D file) then
+		-- play it :) only if new or other sound
+		if file_exists(file) then
+			SoundPlayMusic(file)
+			gSoundMusicCurrent =3D file
+		else =

+			print(&quot;ERROR sound file not found: &quot;..file)
 		end
 	end
 end
-

Modified: trunk/data/lua/lib.test.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.test.lua (original)
+++ trunk/data/lua/lib.test.lua Wed Sep 19 01:32:46 2007
@@ -139,25 +139,6 @@
 				iTileTypeID,iX,iY,iZ,iHue =3D gStaticBlockLoader:GetStatic(i) -- opera=
tes on the block that was last loaded using :Load()
 				total_static_count =3D total_static_count + 1
 				staticCounter[iTileTypeID] =3D (staticCounter[iTileTypeID] or 0) + 1
-				--[[
-				meshname =3D GetStaticMeshName(iTileTypeID,iHue)
-				if (meshname) then
-					entity =3D CreateMeshEntity(meshname)
-					local qw,qx,qy,qz =3D GetStaticMeshOrientation(iTileTypeID)
-					-- ApplyStaticEntityHue(entity,iHue)		=

-					entity:SetUserObject(1,2,3,4,5) -- for mousepicking
-					entity.x =3D originoffx+x*8+iX
-					entity.y =3D originoffy+y*8+iY
-					entity.z =3D iZ*0.1 + gZ_Factor		--0.01
-					entity.iBlockX =3D chunk_abs_x+x OBSOLETE !
-					entity.iBlockY =3D chunk_abs_y+y OBSOLETE !
-					entity.id =3D i
-					entity.iTileTypeID =3D iTileTypeID
-					entity.iHue =3D iHue
-					table.insert(chunk.lStaticEntities,entity)
-					chunk.pStaticGeometryTerrain:AddEntity(entity,entity.x,entity.y,entit=
y.z,qw,qx,qy,qz,-1,1,1)
-				end
-				]]--
 			end =

 	end end
 	=

@@ -172,8 +153,6 @@
 			print(obj.amount,sprintf(&quot;0x%04x&quot;,obj.typeid),obj.typeid,obj.typeobj.ms=
Name,polycount)
 		end
 	end
-	=

-	=

 	print(&quot;total statics &quot;,total_static_count)
 	Crash()
 end
@@ -198,7 +177,6 @@
 		fifo_out:Clear()
 	end
 end
-
 =

 -- test if lua can perform bitwise operations correctly
 function LuaBitwiseTest ()
@@ -363,7 +341,6 @@
 	Crash()
 end
 =

-
 function TestUniFontLoader()
 	print(CreateUniFontLoader)
 	l =3D CreateUniFontLoader(CorrectPath(gUOPath..&quot;unifont2.mul&quot;))

Modified: trunk/data/lua/net.walk.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/net.walk.lua (original)
+++ trunk/data/lua/net.walk.lua Wed Sep 19 01:32:46 2007
@@ -203,7 +203,7 @@
 		local dy =3D gAutoWalkY - y
 		if ((dx =3D=3D 0 and dy =3D=3D 0) or (gAutoWalkHaltBefore and math.abs(d=
x) &lt;=3D 1 and math.abs(dy) &lt;=3D 1)) then =

 			CancelAutoWalk()
-			print(&quot;autowalk canceled dx=3D&quot;..dx..&quot; dy=3D&quot;..dy)
+			printdebug(&quot;walking&quot;,&quot;autowalk canceled dx=3D&quot;..dx..&quot; dy=3D&quot;..dy)
 		else =

 			if (dx &lt; 0) then dx =3D -1 end
 			if (dx &gt; 0) then dx =3D 1 end
@@ -245,12 +245,12 @@
 function CancelAutoWalk () =

 	gAutoWalk =3D false
 	gAutoWalkHaltBefore =3D false
-	=

+
 	-- attack the follow target if warmode is activated
 	if (gActWarmode =3D=3D gWarmode_Combat) then
-		--print(&quot;#################################&quot;,gFollowMobile)
+		printdebug(&quot;walking&quot;,&quot;attack the following mobile: &quot;..gFollowMobile)
 		if (gFollowMobile ~=3D 0) then
-			printf(&quot;CancelAutoWalk Follow Attack: serial=3D0x%08x\n&quot;,gFollowMobile)
+			printdebug(&quot;walking&quot;,sprintf(&quot;CancelAutoWalk Follow Attack: serial=3D0x=
%08x\n&quot;,gFollowMobile))
 			Send_AttackReq(gFollowMobile)
 		end
 	end
@@ -268,8 +268,9 @@
 	local fastwalkkey =3D gFastwalkStack[0]
 	if (fastwalkkey) then
 		table.remove(gFastwalkStack, 0)
-		printf(&quot;FastwalkKey removed: 0x%08x\n&quot;,fastwalkkey)
-		printf(&quot;gFastwalkStack: Number: %i\n&quot;, table.getn(gFastwalkStack)+1)
+		printdebug(&quot;walking&quot;,sprintf(&quot;FastwalkKey removed: 0x%08x\n&quot;,fastwalkkey=
))
+		printdebug(&quot;walking&quot;,sprintf(&quot;gFastwalkStack: Number: %i\n&quot;, table.getn(=
gFastwalkStack)+1))
+
 		return fastwalkkey
 	else
 		return 0
@@ -307,10 +308,10 @@
 			gNextWalkTime =3D gMyTicks + CalculateWalkTimeout(bRunning)
 		end
 		=

-		-- print(&quot;WALK IS possible&quot;,timeout,gMyTicks,gNextWalkTime)
+		--printdebug(&quot;walking&quot;,sprintf(&quot;WALK IS possible&quot;,timeout,gMyTicks,gNext=
WalkTime))
 	else
 		-- to many walk requests, ill ignore this one
-		-- print(&quot;WALK NOT possible&quot;,timeout,gMyTicks,gNextWalkTime)
+		--printdebug(&quot;walking&quot;,sprintf(&quot;WALK NOT possible&quot;,timeout,gMyTicks,gNex=
tWalkTime))
 		return
 	end
 	=

@@ -468,7 +469,7 @@
 		for k,v in pairs(gMoveQueue) do pending_walk_request =3D pending_walk_re=
quest + 1 end
 		=

 		if (pending_walk_request &gt; gMaxPendingWalkRequests) then
-			print(&quot;too many walk requests pending, requesting resync&quot;)
+			printdebug(&quot;walking&quot;,&quot;too many walk requests pending, requesting resync=
&quot;)
 			Send_Movement_Resync_Request()
 		else
 			request.iSeqNum =3D gNextWalkSequenceNumber
@@ -507,11 +508,11 @@
 -- This Packet is send when Client thinks he is out of Sync (basicly: sequ=
ence doesn't fit)
 -- The proper response from the server is a Teleport packet kPacket_Telepo=
rt
 function Send_Movement_Resync_Request()
-	print(&quot;NET: Movement_Resync_Request&quot;)
+	printdebug(&quot;walking&quot;,&quot;NET: Movement_Resync_Request&quot;)
 	ResetWalkQueue()
 	if (gLastResyncRequest and gMyTicks - gLastResyncRequest &lt; gLastResyncReq=
uestTimeout) then return end
 	gLastResyncRequest =3D gMyTicks
-	print(&quot;NET: Movement_Resync_Request (sending)&quot;)
+	printdebug(&quot;walking&quot;,&quot;NET: Movement_Resync_Request (sending)&quot;)
 	local out =3D GetSendFIFO()
 	out:PushNetUint8(kPacket_Accept_Movement_Resync_Request)
 	out:PushNetUint8(0)
@@ -536,7 +537,7 @@
 			if (gLastWalkRequest.iSeqNum =3D=3D iSeqNum) then gLastWalkRequest =3D =
nil end
 		end
 	else
-		printf(&quot;NET: Accept_Movement_Resync_Request: OUTofSYNC! seqnumber : %i\n=
&quot;,iSeqNum)
+		printdebug(&quot;walking&quot;,sprintf(&quot;NET: Accept_Movement_Resync_Request: OUTof=
SYNC! seqnumber : %i\n&quot;,iSeqNum))
 		Send_Movement_Resync_Request()	-- is this correct? please test
 	end
 =

@@ -593,11 +594,11 @@
 	if (gPlayerXLoc ~=3D player_xloc or gPlayerYLoc ~=3D player_yloc or
 		gPlayerZLoc ~=3D player_zloc or gPlayerDir ~=3D player_dir) then
 =

-		printf(&quot;Block_Movement seqnumber=3D%d player_dir=3D%d\n&quot;,seqnumber,playe=
r_dir)
+		printdebug(&quot;walking&quot;,sprintf(&quot;Block_Movement seqnumber=3D%d player_dir=
=3D%d\n&quot;,seqnumber,player_dir))
 		gCurrentRenderer:ClientSideMobileAnimPlayerTeleported()
 		SetPlayerPos(player_xloc,player_yloc,player_zloc,fullplayerdir)
 	else
-		print(&quot;Player not teleported, because already on the same pos+dir&quot;)
+		printdebug(&quot;walking&quot;,&quot;Player not teleported, because already on the same=
 pos+dir&quot;)
 	end
 =

 	Send_Accept_Block_Movement(seqnumber)
@@ -622,7 +623,7 @@
 	local input =3D GetRecvFIFO()
 	local id =3D input:PopNetUint8()
 	local player_dir =3D input:PopNetUint8()
-	printf(&quot;NET (todo): Move_Player id: %i player_dir: %i\n&quot;,id, player_dir)
+	printdebug(&quot;walking&quot;,sprintf(&quot;NET (todo): Move_Player id: %i player_dir: =
%i\n&quot;,id, player_dir))
 end
 =

 --[[

Modified: trunk/data/lua/net/net.effect.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/net/net.effect.lua (original)
+++ trunk/data/lua/net/net.effect.lua Wed Sep 19 01:32:46 2007
@@ -30,9 +30,9 @@
 	effect.rendermode =3D input:PopNetUint32()
 	effect.iseffect =3D true
 	=

-	printdebug(&quot;NET&quot;, &quot;Hued_FX: artid=3D0x%04x locx=3D%i locy=3D%i locz=3D%i =
targetx=3D%i targety=3D%i targetz=3D%i effect_type=3D%s\n&quot;,
+	printdebug(&quot;net&quot;, sprintf(&quot;Hued_FX: artid=3D0x%04x locx=3D%i locy=3D%i lo=
cz=3D%i targetx=3D%i targety=3D%i targetz=3D%i effect_type=3D%s\n&quot;,
 			effect.itemid, effect.source_locx, effect.source_locy, effect.source_lo=
cz,
-			effect.target_locx, effect.target_locy, effect.target_locz, gEffectType=
s[effect.effect_type] or &quot;&quot;)
+			effect.target_locx, effect.target_locy, effect.target_locz, gEffectType=
s[effect.effect_type]) )
 	=

 	if (gParticleEffectSystem) then gCurrentRenderer:AddEffect( effect ) end
 end

Modified: trunk/data/lua/obj/obj.container.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/obj/obj.container.lua (original)
+++ trunk/data/lua/obj/obj.container.lua Wed Sep 19 01:32:46 2007
@@ -67,7 +67,7 @@
 function HandleOpenContainer	(containerdata)
 	--containerdata.serial
 	--containerdata.gumpid
-	print(&quot;# HandleOpenContainer&quot;,containerdata.serial,containerdata.gumpid)
+	--print(&quot;# HandleOpenContainer&quot;,containerdata.serial,containerdata.gumpid)
 	=

 	--Ignore Shop container - created somewhere else
 	if (containerdata.gumpid =3D=3D kGumpIDShopContainer) then

Modified: trunk/data/lua/obj/obj.player.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/obj/obj.player.lua (original)
+++ trunk/data/lua/obj/obj.player.lua Wed Sep 19 01:32:46 2007
@@ -56,7 +56,7 @@
 -- only available some time after login, see PlayerEquipmentUpdated()
 function TogglePlayerBackpack ()
 	if (gPlayerBackPack) then
-		if (IsContainerAlreadyOpen(gPlayerBackPack)) then
+		if (IsContainerAlreadyOpen(gPlayerBackPack.serial)) then
 			-- close backpack
 			CloseContainer(gPlayerBackPack.serial)
 		else


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000208.html">[Iris-commit] [IRIS] r1393 - in /trunk: SConstruct	data/lua/main.lua src/main.cpp
</A></li>
	<LI>Next message: <A HREF="000210.html">[Iris-commit] [IRIS] r1395 - in /trunk: bin/	data/terrain/materials/ vc8/
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#209">[ date ]</a>
              <a href="thread.html#209">[ thread ]</a>
              <a href="subject.html#209">[ subject ]</a>
              <a href="author.html#209">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/iris-commit">More information about the Iris-commit
mailing list</a><br>
</body></html>
