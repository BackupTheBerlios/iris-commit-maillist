<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Iris-commit] [IRIS] r2542 - in /trunk/lua: lib.uoids.lua net/net.other.lua widgets/widget.widget.uoquickcasticon.lua
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/iris-commit/2008-October/index.html" >
   <LINK REL="made" HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r2542%20-%20in%20/trunk/lua%3A%20lib.uoids.lua%0A%20net/net.other.lua%20widgets/widget.widget.uoquickcasticon.lua&In-Reply-To=%3C20081011021556.498F01C186A4%40zwischenwelt.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001346.html">
   <LINK REL="Next"  HREF="001348.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Iris-commit] [IRIS] r2542 - in /trunk/lua: lib.uoids.lua net/net.other.lua widgets/widget.widget.uoquickcasticon.lua</H1>
    <B>no-reply at zwischenwelt.org</B> 
    <A HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r2542%20-%20in%20/trunk/lua%3A%20lib.uoids.lua%0A%20net/net.other.lua%20widgets/widget.widget.uoquickcasticon.lua&In-Reply-To=%3C20081011021556.498F01C186A4%40zwischenwelt.org%3E"
       TITLE="[Iris-commit] [IRIS] r2542 - in /trunk/lua: lib.uoids.lua net/net.other.lua widgets/widget.widget.uoquickcasticon.lua">no-reply at zwischenwelt.org
       </A><BR>
    <I>Sat Oct 11 04:15:55 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001346.html">[Iris-commit] [IRIS] r2541 - in /trunk/lua: lib.2d.mobile.lua	lib.uoanim.lua
</A></li>
        <LI>Next message: <A HREF="001348.html">[Iris-commit] [IRIS] r2543 -	/trunk/lua/widgets/widget.widget.uoquickcasticon.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1347">[ date ]</a>
              <a href="thread.html#1347">[ thread ]</a>
              <a href="subject.html#1347">[ subject ]</a>
              <a href="author.html#1347">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: hagish
Date: Sat Oct 11 04:15:55 2008
New Revision: 2542

Log:
improved quick cast icons of weapon abilities -&gt; colorchange

Modified:
    trunk/lua/lib.uoids.lua
    trunk/lua/net/net.other.lua
    trunk/lua/widgets/widget.widget.uoquickcasticon.lua

Modified: trunk/lua/lib.uoids.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.uoids.lua (original)
+++ trunk/lua/lib.uoids.lua Sat Oct 11 04:15:55 2008
@@ -441,35 +441,35 @@
 -- weapon abilities (name + gumpicons)
 -- id id packet id that should be send
 glWeaponAbilities =3D {
-	[1] =3D {name=3D&quot;ARMOR_IGNORE&quot;,gumpicon=3D0x51FF+1},
-	[2] =3D {name=3D&quot;BLEED_ATTACK&quot;,gumpicon=3D0x51FF+2},
-	[3] =3D {name=3D&quot;CONCUSSION_BLOW&quot;,gumpicon=3D0x51FF+3},
-	[4] =3D {name=3D&quot;CRUSHING_BLOW&quot;,gumpicon=3D0x51FF+4},
-	[5] =3D {name=3D&quot;DISARM&quot;,gumpicon=3D0x51FF+5},
-	[6] =3D {name=3D&quot;DISMOUNT&quot;,gumpicon=3D0x51FF+6},
-	[7] =3D {name=3D&quot;DOUBLESTRIKE&quot;,gumpicon=3D0x51FF+7},
-	[8] =3D {name=3D&quot;INFECTING&quot;,gumpicon=3D0x51FF+8},
-	[9] =3D {name=3D&quot;MORTALSTRIKE&quot;,gumpicon=3D0x51FF+9},
-	[10] =3D {name=3D&quot;MOVING_SHOT&quot;,gumpicon=3D0x51FF+10},
-	[11] =3D {name=3D&quot;PARALYZING_BLOW&quot;,gumpicon=3D0x51FF+11},
-	[12] =3D {name=3D&quot;SHADOWSTRIKE&quot;,gumpicon=3D0x51FF+12},
-	[13] =3D {name=3D&quot;WHIRLWIND_STRIKE&quot;,gumpicon=3D0x51FF+13},
-	[14] =3D {name=3D&quot;RIDINGSWIPE&quot;,gumpicon=3D0x51FF+14},
-	[15] =3D {name=3D&quot;FRENZIEDWHIRLWIND&quot;,gumpicon=3D0x51FF+15},
-	[16] =3D {name=3D&quot;BLOCK&quot;,gumpicon=3D0x51FF+16},
-	[17] =3D {name=3D&quot;DEFENSEMASTERY&quot;,gumpicon=3D0x51FF+17},
-	[18] =3D {name=3D&quot;NERVESTRIKE&quot;,gumpicon=3D0x51FF+18},
-	[19] =3D {name=3D&quot;TALONSTRIKE&quot;,gumpicon=3D0x51FF+19},
-	[20] =3D {name=3D&quot;FEINT&quot;,gumpicon=3D0x51FF+20},
-	[21] =3D {name=3D&quot;DUALWIELD&quot;,gumpicon=3D0x51FF+21},
-	[22] =3D {name=3D&quot;DOUBLESHOT&quot;,gumpicon=3D0x51FF+22},
-	[23] =3D {name=3D&quot;ARMORPIERCE&quot;,gumpicon=3D0x51FF+23},
-	[24] =3D {name=3D&quot;BLADEWEAVE&quot;,gumpicon=3D0x51FF+24},
-	[25] =3D {name=3D&quot;FORCE_ARROW&quot;,gumpicon=3D0x51FF+25},
-	[26] =3D {name=3D&quot;LIGHTNING_ARROW&quot;,gumpicon=3D0x51FF+26},
-	[27] =3D {name=3D&quot;PSYCHIC_ATTACK&quot;,gumpicon=3D0x51FF+27},
-	[28] =3D {name=3D&quot;SERPENT_ARROW&quot;,gumpicon=3D0x51FF+28},
-	[29] =3D {name=3D&quot;FORCE_OF_NATURE&quot;,gumpicon=3D0x51FF+29},
+	[1] =3D {name=3D&quot;Armor Ignore&quot;,gumpicon=3D0x51FF+1},
+	[2] =3D {name=3D&quot;Bleed Attack&quot;,gumpicon=3D0x51FF+2},
+	[3] =3D {name=3D&quot;Concussion Blow&quot;,gumpicon=3D0x51FF+3},
+	[4] =3D {name=3D&quot;Crushing Blow&quot;,gumpicon=3D0x51FF+4},
+	[5] =3D {name=3D&quot;Disarm&quot;,gumpicon=3D0x51FF+5},
+	[6] =3D {name=3D&quot;Dismount&quot;,gumpicon=3D0x51FF+6},
+	[7] =3D {name=3D&quot;Doublestrike&quot;,gumpicon=3D0x51FF+7},
+	[8] =3D {name=3D&quot;Infecting&quot;,gumpicon=3D0x51FF+8},
+	[9] =3D {name=3D&quot;Mortalstrike&quot;,gumpicon=3D0x51FF+9},
+	[10] =3D {name=3D&quot;Moving Shot&quot;,gumpicon=3D0x51FF+10},
+	[11] =3D {name=3D&quot;Paralyzing Blow&quot;,gumpicon=3D0x51FF+11},
+	[12] =3D {name=3D&quot;Shadow Strike&quot;,gumpicon=3D0x51FF+12},
+	[13] =3D {name=3D&quot;Whirlwind Strike&quot;,gumpicon=3D0x51FF+13},
+	[14] =3D {name=3D&quot;Ridingwipe&quot;,gumpicon=3D0x51FF+14},
+	[15] =3D {name=3D&quot;Frenziedwhirlwind&quot;,gumpicon=3D0x51FF+15},
+	[16] =3D {name=3D&quot;Block&quot;,gumpicon=3D0x51FF+16},
+	[17] =3D {name=3D&quot;Defensemastery&quot;,gumpicon=3D0x51FF+17},
+	[18] =3D {name=3D&quot;Nervestrike&quot;,gumpicon=3D0x51FF+18},
+	[19] =3D {name=3D&quot;Talonstrike&quot;,gumpicon=3D0x51FF+19},
+	[20] =3D {name=3D&quot;Feint&quot;,gumpicon=3D0x51FF+20},
+	[21] =3D {name=3D&quot;Dualwield&quot;,gumpicon=3D0x51FF+21},
+	[22] =3D {name=3D&quot;Doubleshot&quot;,gumpicon=3D0x51FF+22},
+	[23] =3D {name=3D&quot;Armorpierce&quot;,gumpicon=3D0x51FF+23},
+	[24] =3D {name=3D&quot;Bladeweave&quot;,gumpicon=3D0x51FF+24},
+	[25] =3D {name=3D&quot;Force Arrow&quot;,gumpicon=3D0x51FF+25},
+	[26] =3D {name=3D&quot;Lightning Arrow&quot;,gumpicon=3D0x51FF+26},
+	[27] =3D {name=3D&quot;Psychic Attack&quot;,gumpicon=3D0x51FF+27},
+	[28] =3D {name=3D&quot;Serpent Arrow&quot;,gumpicon=3D0x51FF+28},
+	[29] =3D {name=3D&quot;Force Of Nature&quot;,gumpicon=3D0x51FF+29},
 }
 =

 -- weapons and they assigned weaponabilities

Modified: trunk/lua/net/net.other.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/net/net.other.lua (original)
+++ trunk/lua/net/net.other.lua Sat Oct 11 04:15:55 2008
@@ -322,6 +322,7 @@
 	-- Subcommand 0x21: (AOS) Ability icon confirm.
 	-- Note: no data, just (bf 00 05 21) =

 	if (subcmd =3D=3D kPacket_Generic_SubCommand_Ability_Icon) then	-- 0x21
+		NotifyListener(&quot;Hook_Deactivate_Ability&quot;)
 		print(&quot;ABILITY&quot;,&quot;kPacket_Generic_SubCommand_Ability_Icon&quot;)
 	end
 =


Modified: trunk/lua/widgets/widget.widget.uoquickcasticon.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/widgets/widget.widget.uoquickcasticon.lua (original)
+++ trunk/lua/widgets/widget.widget.uoquickcasticon.lua Sat Oct 11 04:15:55=
 2008
@@ -5,6 +5,8 @@
 =

 glQuickCastDialog =3D {}
 =

+gQuickCastClickedHue =3D 32
+gQuickCastNormalHue =3D 0
 =

 -- list of numbers assigned to quickcast functions
 glQuickCastHotkeys =3D {}
@@ -19,6 +21,13 @@
 	-- layout
 	if gumpid then
 		dialog =3D GetDesktopWidget():CreateChild(&quot;UOQuickCastIcon&quot;,{x=3Dx,y=3Dy=
,fun=3Dfun,name=3Dname,gumpid=3Dgumpid})
+		RegisterListener(&quot;Hook_Deactivate_Ability&quot;, function() =

+			if dialog and dialog:IsAlive() then =

+				dialog.gfx_main:ChangeParams({hue=3DgQuickCastNormalHue})
+			else
+				return true
+			end
+		end)
 	else
 		-- simple text button
 		local quickskillGump =3D gQuickskillGump
@@ -83,7 +92,10 @@
 	glQuickCastDialog[self] =3D nil
 end
 =

-function gWidgetPrototype.UOQuickCastIcon:on_mouse_left_click_double	() se=
lf.params.fun() end
+function gWidgetPrototype.UOQuickCastIcon:on_mouse_left_click_double	() =

+	self.gfx_main:ChangeParams({hue=3DgQuickCastClickedHue})
+	self.params.fun() =

+end
 function gWidgetPrototype.UOQuickCastIcon:on_mouse_left_down			() self:Bri=
ngToFront() self:StartMouseMove() end
 function gWidgetPrototype.UOQuickCastIcon:on_mouse_right_down			() self:De=
stroy() end
 =



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001346.html">[Iris-commit] [IRIS] r2541 - in /trunk/lua: lib.2d.mobile.lua	lib.uoanim.lua
</A></li>
	<LI>Next message: <A HREF="001348.html">[Iris-commit] [IRIS] r2543 -	/trunk/lua/widgets/widget.widget.uoquickcasticon.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1347">[ date ]</a>
              <a href="thread.html#1347">[ thread ]</a>
              <a href="subject.html#1347">[ subject ]</a>
              <a href="author.html#1347">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/iris-commit">More information about the Iris-commit
mailing list</a><br>
</body></html>
