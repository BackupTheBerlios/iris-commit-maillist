<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Iris-commit] [IRIS] r3411 - in /trunk/lua: lib.compass.lua lib.configdialog.lua lib.debugmenu.lua lib.desktop.lua lib.devtool.lua lib.fallback.lua lib.loading.lua lib.macrolist.lua lib.packetvideo.lua lib.static.lua main.lua profiles/gfx_ultrahigh.lua
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/iris-commit/2011-November/index.html" >
   <LINK REL="made" HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r3411%20-%20in%20/trunk/lua%3A%20lib.compass.lua%0A%20lib.configdialog.lua%20lib.debugmenu.lua%20lib.desktop.lua%20lib.devtool.lua%0A%20lib.fallback.lua%20lib.loading.lua%20lib.macrolist.lua%20lib.packetvideo.lua%0A%20lib.static.lua%20main.lua%20profiles/gfx_ultrahigh.lua&In-Reply-To=%3C20111127210832.AC7657A98531%40simon%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002149.html">
   <LINK REL="Next"  HREF="002151.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Iris-commit] [IRIS] r3411 - in /trunk/lua: lib.compass.lua lib.configdialog.lua lib.debugmenu.lua lib.desktop.lua lib.devtool.lua lib.fallback.lua lib.loading.lua lib.macrolist.lua lib.packetvideo.lua lib.static.lua main.lua profiles/gfx_ultrahigh.lua</H1>
    <B>no-reply at zwischenwelt.org</B> 
    <A HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r3411%20-%20in%20/trunk/lua%3A%20lib.compass.lua%0A%20lib.configdialog.lua%20lib.debugmenu.lua%20lib.desktop.lua%20lib.devtool.lua%0A%20lib.fallback.lua%20lib.loading.lua%20lib.macrolist.lua%20lib.packetvideo.lua%0A%20lib.static.lua%20main.lua%20profiles/gfx_ultrahigh.lua&In-Reply-To=%3C20111127210832.AC7657A98531%40simon%3E"
       TITLE="[Iris-commit] [IRIS] r3411 - in /trunk/lua: lib.compass.lua lib.configdialog.lua lib.debugmenu.lua lib.desktop.lua lib.devtool.lua lib.fallback.lua lib.loading.lua lib.macrolist.lua lib.packetvideo.lua lib.static.lua main.lua profiles/gfx_ultrahigh.lua">no-reply at zwischenwelt.org
       </A><BR>
    <I>Sun Nov 27 22:08:32 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002149.html">[Iris-commit] [IRIS] r3410 - in /trunk/data: custom/ customchars/ grannys/ mobiles/ mobiles_custom/ mobiles_custom/meshes/ mobiles_custom/models/ models/ tiles/ tiles/meshes/ tiles/models/ tiles_custom/ tiles_custom/meshes/ tiles_custom/models/
</A></li>
        <LI>Next message: <A HREF="002151.html">[Iris-commit] [IRIS] r3412 - /trunk/lua/lib.static.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2150">[ date ]</a>
              <a href="thread.html#2150">[ thread ]</a>
              <a href="subject.html#2150">[ subject ]</a>
              <a href="author.html#2150">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: sience
Date: Sun Nov 27 22:08:32 2011
New Revision: 3411

Log:
-all folder names consolidated in main.lua
-ultrahigh shadow setting fix

Modified:
    trunk/lua/lib.compass.lua
    trunk/lua/lib.configdialog.lua
    trunk/lua/lib.debugmenu.lua
    trunk/lua/lib.desktop.lua
    trunk/lua/lib.devtool.lua
    trunk/lua/lib.fallback.lua
    trunk/lua/lib.loading.lua
    trunk/lua/lib.macrolist.lua
    trunk/lua/lib.packetvideo.lua
    trunk/lua/lib.static.lua
    trunk/lua/main.lua
    trunk/lua/profiles/gfx_ultrahigh.lua

Modified: trunk/lua/lib.compass.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.compass.lua (original)
+++ trunk/lua/lib.compass.lua Sun Nov 27 22:08:32 2011
@@ -73,10 +73,10 @@
         end
     end
     gPositionMarkers =3D {}
-    LoadUOAutomapFiles(gUOAMDir, gPositionMarkers)
-end
-
-LoadUOAutomapFiles(gUOAMDir, gPositionMarkers)
+    LoadUOAutomapFiles(gUoamPath, gPositionMarkers)
+end
+
+LoadUOAutomapFiles(gUoamPath, gPositionMarkers)
 =

 function SetPositionMarker(mapindex,name,xloc,yloc,r,g,b,a)
     if not mapindex or not name or not xloc or not yloc then return end

Modified: trunk/lua/lib.configdialog.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.configdialog.lua (original)
+++ trunk/lua/lib.configdialog.lua Sun Nov 27 22:08:32 2011
@@ -214,7 +214,7 @@
 =

 function ConfigDialogPage_PacketVideo(page)
     page:AddChild(&quot;Button&quot;,{label=3D&quot;Play Iris PacketVideo (*.ipv)&quot;,on_but=
ton_click=3Dfunction ()  =

-            if (PacketVideo_Load(FileOpenDialog(gPacketVideoFileName_folde=
rpath,&quot;*.ipv&quot;,&quot;select iris packetvideo&quot;))) then PacketVideo_Playback() end
+            if (PacketVideo_Load(FileOpenDialog(gPacketVideoPath,&quot;*.ipv&quot;,&quot;=
select iris packetvideo&quot;))) then PacketVideo_Playback() end
         end})
     page:AddChild(&quot;Button&quot;,{label=3D&quot;Play Razor PacketVideo (*.rpv)&quot;,on_bu=
tton_click=3Dfunction ()  =

             if (PacketVideo_LoadRarzorPV(FileOpenDialog(&quot;.&quot;,&quot;*.rpv&quot;,&quot;selec=
t razor packetvideo&quot;))) then PacketVideo_Playback() end

Modified: trunk/lua/lib.debugmenu.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.debugmenu.lua (original)
+++ trunk/lua/lib.debugmenu.lua Sun Nov 27 22:08:32 2011
@@ -967,9 +967,9 @@
 =

 function DebugDeleteModel   (id)
     local base =3D id - math.mod(id,1000) + 1000
-    local relpath  =3D sprintf(&quot;models/to_%06d/&quot;,base)
+    local relpath  =3D sprintf(&quot;to_%06d/&quot;,base)
     local mdlname =3D GetModelName(id)
-    local mdl =3D datapath..&quot;models/&quot;..relpath..mdlname
+    local mdl =3D gDataTilesMeshesPath..relpath..mdlname
     =

     print(&quot;removing model: &quot;..mdl)
     =

@@ -985,9 +985,9 @@
     end
     =

     local base =3D id - math.mod(id,1000) + 1000
-    local relpath  =3D sprintf(&quot;models/to_%06d/&quot;,base)
+    local relpath  =3D sprintf(&quot;to_%06d/&quot;,base)
     local mdlname =3D GetModelName(id)
-    local mdl =3D datapath..&quot;models/&quot;..relpath..mdlname
+    local mdl =3D gDataTilesMeshesPath..relpath..mdlname
     =

     if not file_exists(mdl) then
         print(&quot;model file not found&quot;)
@@ -1003,19 +1003,18 @@
     print(&quot;export model and textures&quot;,artid,&quot;to data/export&quot;)
 =

     local base =3D id - math.mod(id,1000) + 1000
-    local relpath  =3D sprintf(&quot;models/to_%06d/&quot;,base)
+    local relpath  =3D sprintf(&quot;to_%06d/&quot;,base)
     local mdlname =3D GetModelName(id)
-    local mdl =3D datapath..&quot;models/&quot;..relpath..mdlname
-    local export =3D datapath..&quot;export/&quot;
-    =

-    local xmlfile =3D export..mdlname..&quot;.xml&quot;
+    local mdl =3D gDataTilesMeshesPath..relpath..mdlname
+    =

+    local xmlfile =3D gDataExportPath..mdlname..&quot;.xml&quot;
 =

     if not file_exists(mdl) then
         print(&quot;model file not found&quot;)
         return
     end
     =

-    local expmdl =3D export..mdlname
+    local expmdl =3D gDataExportPath..mdlname
 =

     -- try to rotate and adjust blender like, only possible if meshmagick =
is installed (unix)
     os.execute(&quot;cp '&quot;..mdl..&quot;' '&quot;..expmdl..&quot;'&quot;)
@@ -1033,16 +1032,16 @@
     end
 =

     -- copy material file
-    os.execute(&quot;cp '&quot;..datapath..&quot;models/materials/textures.material' '&quot;..=
datapath..&quot;export'&quot;)
+    os.execute(&quot;cp '&quot;..gDataTilesMaterialsPath..&quot;textures.material' '&quot;..gD=
ataPath..&quot;export'&quot;)
 =

     -- try to find used textures
     if file_exists(xmlfile) then
         for line in io.lines(xmlfile) do
             for name in string.gmatch(line, 'material=3D&quot;([^&quot;]+)&quot;') do
-                local texfile =3D datapath..&quot;models/textures/&quot;..name..&quot;.pn=
g&quot;
+                local texfile =3D gDataTilesTexturesPath .. name .. &quot;.png&quot;
                 if file_exists(texfile) then
-                    print(&quot;cp '&quot;..texfile..&quot;' '&quot;..export..&quot;'&quot;)
-                    os.execute(&quot;cp '&quot;..texfile..&quot;' '&quot;..export..&quot;'&quot;)
+                    print(&quot;cp '&quot;..texfile..&quot;' '&quot;..gDataExportPath..&quot;'&quot;)
+                    os.execute(&quot;cp '&quot;..texfile..&quot;' '&quot;..gDataExportPath..&quot;'=
&quot;)
                 end
             end
         end

Modified: trunk/lua/lib.desktop.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.desktop.lua (original)
+++ trunk/lua/lib.desktop.lua Sun Nov 27 22:08:32 2011
@@ -215,7 +215,7 @@
     gDesktop =3D {}
     gDesktopPositions =3D {}
     if file then
-        local path =3D gDesktopDir..file
+        local path =3D gDesktopPath..file
         if file_exists(path) then
             dofile(path)
             ReopenDesktop()
@@ -228,7 +228,7 @@
 	--~ print(&quot;#####SaveDesktop&quot;,debug.traceback())
     file =3D file or gDesktopFile
     if file then
-        local path =3D gDesktopDir..file
+        local path =3D gDesktopPath..file
         -- write to file
         local fp =3D io.open(path,&quot;w&quot;)
         if (fp) then

Modified: trunk/lua/lib.devtool.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.devtool.lua (original)
+++ trunk/lua/lib.devtool.lua Sun Nov 27 22:08:32 2011
@@ -2,8 +2,6 @@
 --[[ \brief
         contains some tools useful for development and debug
 ]]--
-
-gMeshTextureUsageFilePath =3D datapath..&quot;meshtextureusage.lua&quot;
 =

 function ShowDevTool ()
     MainMousePick()

Modified: trunk/lua/lib.fallback.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.fallback.lua (original)
+++ trunk/lua/lib.fallback.lua Sun Nov 27 22:08:32 2011
@@ -1,6 +1,5 @@
 -- manages skiplists for fallbacks and the fallback tool
 =

-gSkippedFallBackFilePath =3D datapath..&quot;skippedfallbacks.lua&quot;
 gSkippedArtBillboardFallBacks =3D {}
 =

 function InitFallBacks  ()

Modified: trunk/lua/lib.loading.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.loading.lua (original)
+++ trunk/lua/lib.loading.lua Sun Nov 27 22:08:32 2011
@@ -59,18 +59,18 @@
     -- TODO move to config or automatic best choosing
     if gAtlasRes =3D=3D &quot;med&quot; then
         ---- med res
-        dofile(datapath .. &quot;models/atlas/tex_atlas_alpha_med.lua&quot;)
-        dofile(datapath .. &quot;models/atlas/tex_atlas_med.lua&quot;)
+        dofile(gDataTilesAtlasPath .. &quot;tex_atlas_alpha_med.lua&quot;)
+        dofile(gDataTilesAtlasPath .. &quot;tex_atlas_med.lua&quot;)
         gUseTexAtlas =3D true     -- Lugre setting, only used if fastbatch=
 is active
     elseif gAtlasRes =3D=3D &quot;low&quot; then
         ---- low res
-        dofile(datapath .. &quot;models/atlas/tex_atlas_alpha_low.lua&quot;)
-        dofile(datapath .. &quot;models/atlas/tex_atlas_low.lua&quot;)
+        dofile(gDataTilesAtlasPath .. &quot;tex_atlas_alpha_low.lua&quot;)
+        dofile(gDataTilesAtlasPath .. &quot;tex_atlas_low.lua&quot;)
         gUseTexAtlas =3D true     -- Lugre setting, only used if fastbatch=
 is active
     elseif gAtlasRes =3D=3D &quot;ultralow&quot; then
         ---- ultralow res
-        dofile(datapath .. &quot;models/atlas/tex_atlas_alpha_ultralow.lua&quot;)
-        dofile(datapath .. &quot;models/atlas/tex_atlas_ultralow.lua&quot;)
+        dofile(gDataTilesAtlasPath .. &quot;tex_atlas_alpha_ultralow.lua&quot;)
+        dofile(gDataTilesAtlasPath .. &quot;tex_atlas_ultralow.lua&quot;)
         gUseTexAtlas =3D true     -- Lugre setting, only used if fastbatch=
 is active
     end
 end

Modified: trunk/lua/lib.macrolist.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.macrolist.lua (original)
+++ trunk/lua/lib.macrolist.lua Sun Nov 27 22:08:32 2011
@@ -521,11 +521,11 @@
 function MacroCmd_ZoomCompass           (zoomfactor)    if (gInGameStarted=
) then ZoomCompass(zoomfactor) end end
 function MacroCmd_ActivateNextRenderer  ()              if (gInGameStarted=
) then ActivateNextRenderer() end end
 function MacroCmd_CamChangeZoom         (zoomadd)       if (gInGameStarted=
) then gCurrentRenderer:CamChangeZoom(zoomadd) end end
-function MacroCmd_Screenshot            ()              Client_TakeScreens=
hot(gScreenshotDir) end
+function MacroCmd_Screenshot            ()              Client_TakeScreens=
hot(gScreenshotPath) end
 function MacroCmd_GridScreenshot        ()          =

     if (not gInGameStarted) then return end
     ToggleCompass()
-    Client_TakeGridScreenshot(gScreenshotDir)
+    Client_TakeGridScreenshot(gScreenshotPath)
     ToggleCompass()
 end
 =


Modified: trunk/lua/lib.packetvideo.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.packetvideo.lua (original)
+++ trunk/lua/lib.packetvideo.lua Sun Nov 27 22:08:32 2011
@@ -29,7 +29,7 @@
 gPacketVideoNoPlaybackPackets[kPacket_Logout] =3D true -- logout
 --~ gPacketVideoNoPlaybackPackets[kPacket_Open_Container] =3D true  (if sk=
ipped, no containers won't be seen)
 =

-gPacketVideoFileName_prefix		=3D gPacketVideoFileName_folderpath..&quot;myvid.&quot;
+gPacketVideoFileName_prefix		=3D gPacketVideoPath..&quot;myvid.&quot;
 gPacketVideoFileName_postfix	=3D &quot;.ipv&quot;
 =

 =

@@ -230,7 +230,7 @@
 =

 function PacketVideo_Load	(filename)
 	if (not filename) then return false end
-	local filename2 =3D gPacketVideoFileName_folderpath .. filename
+	local filename2 =3D gPacketVideoPath .. filename
 	local filename3 =3D &quot;../&quot; .. filename
 	if (file_exists(filename2)) then filename =3D filename2 end
 	if (file_exists(filename3)) then filename =3D filename3 end

Modified: trunk/lua/lib.static.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.static.lua (original)
+++ trunk/lua/lib.static.lua Sun Nov 27 22:08:32 2011
@@ -18,16 +18,16 @@
 	local cached =3D gCustomModelCache[id]
 	if (cached ~=3D nil) then print(&quot;Model already in gCustomModelCache&quot;) ret=
urn cached end
 =

-	local custompath =3D datapath..&quot;custom/models/&quot;..GetModelName(id)
+	local custompath =3D gDataCustomTilesPath..GetModelName(id)
 	if file_exists(custompath) then
 		gCustomModelCache[id] =3D custompath
 		return custompath
 	end
 =

 	local base =3D id - math.mod(id,1000) + 1000
-	local relpath  =3D sprintf(&quot;models/to_%06d/&quot;,base)
-
-	local meshpath =3D datapath..&quot;models/&quot;..relpath..GetModelName(id)
+	local relpath  =3D sprintf(&quot;to_%06d/&quot;,base)
+
+	local meshpath =3D gDataTilesMeshesPath..relpath..GetModelName(id)
 	if file_exists(meshpath) then
 		gCustomModelCache[id] =3D meshpath
 	else

Modified: trunk/lua/main.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/main.lua (original)
+++ trunk/lua/main.lua Sun Nov 27 22:08:32 2011
@@ -2,37 +2,84 @@
 --###        CONSTANTS        ###
 --###############################
 =

+-- -----------------------------------------------------------------------=
-----
 -- Iris2 Directories/Files
+-- -----------------------------------------------------------------------=
-----
 gMainWorkingDir     =3D GetMainWorkingDir and GetMainWorkingDir() or &quot;&quot;
 gBinPath			=3D gMainWorkingDir..&quot;bin/&quot;  -- bin folder with config etc
-datapath            =3D gMainWorkingDir..&quot;data/&quot;
-libpath             =3D gMainWorkingDir..&quot;lua/&quot;
-gMacroPathFallback  =3D gMainWorkingDir..&quot;lua/config_macros_declarations.l=
ua&quot;
-gMainPluginDir      =3D gMainWorkingDir..&quot;plugins/&quot;
+
+gDataPath           	=3D gMainWorkingDir..&quot;data/&quot;	-- former datapath
+gMainPluginDir      	=3D gMainWorkingDir..&quot;plugins/&quot;
+gDataTilesPath      	=3D gDataPath..&quot;tiles/&quot;
+gDataTilesAtlasPath		=3D gDataPath..&quot;tiles/atlas/&quot;
+gDataTilesMaterialsPath	=3D gDataPath..&quot;tiles/materials/&quot;
+gDataTilesMeshesPath	=3D gDataPath..&quot;tiles/meshes/&quot;
+gDataTilesTexturesPath	=3D gDataPath..&quot;tiles/textures/&quot;
+gDataExportPath     	=3D gDataPath..&quot;export/&quot;
+gDataCustomTilesPath    =3D gDataPath..&quot;tiles_custom/meshes/&quot;
+
+gMeshTextureUsageFilePath=3D gDataPath..&quot;meshtextureusage.lua&quot;
+gSkippedFallBackFilePath =3D gDataPath..&quot;skippedfallbacks.lua&quot;
+
+-- Lua Subdir
+libpath				=3D gMainWorkingDir..&quot;lua/&quot;	-- TODO: change to &quot;gScriptPath&quot;
+gMacroPathFallback  =3D libpath..&quot;config_macros_declarations.lua&quot;
 gIrisWidgetDir      =3D libpath..&quot;widgets/&quot;
 =

+-- Lugre Subdir
 lugreluapath        =3D (file_exists(gMainWorkingDir..&quot;mylugre&quot;) and gMain=
WorkingDir..&quot;mylugre/lua/&quot; or GetLugreLuaPath()) -- this is should also in =
USERHOME dir
 =

--- User Directories/Files
-gTempPath           =3D gMainWorkingDir..&quot;tmp/&quot;
-gScreenshotDir		=3D gMainWorkingDir..&quot;screenshots/&quot;
-gConfigPath         =3D gMainWorkingDir..&quot;config/&quot;
-gConfigFile         =3D &quot;config.lua&quot;
-gConfigPathFile     =3D gConfigPath..gConfigFile
-gConfigPathFile_old =3D datapath..gConfigFile         -- only as Fallback =
for old users
-gMacroFile          =3D &quot;mymacros.lua&quot;
-gMacroPathFile      =3D gConfigPath..gMacroFile
-gMacroPathFile_old  =3D datapath..gMacroFile          -- only as Fallback =
for old users
-gDesktopDir			=3D gConfigPath..&quot;desktop/&quot; -- old was data/desktop/
-gPacketVideoFileName_folderpath	=3D gMainWorkingDir..&quot;videos/&quot;
-gUOAMDir			=3D gConfigPath..&quot;uoam/&quot;
-gUoamMarkFile		=3D &quot;mark.uoam&quot;
-gUoamMarkPathFile	=3D gUOAMDir..gUoamMarkFile
-
+-- Config filename defines
+local configFile		=3D &quot;config.lua&quot;
+local macroFile			=3D &quot;mymacros.lua&quot;
+local filterFile		=3D &quot;iris.filter.lua&quot;
+local uoamMarkFile		=3D &quot;mark.uoam&quot;
+
+-- User specific directories
+local configConfigName	=3D &quot;config/&quot;
+local configScreenName	=3D &quot;screenshots/&quot;
+local configTempName	=3D &quot;tmp/&quot;
+local configVideoName	=3D &quot;video/&quot;
+
+-- Config sub-directories
+local configFolderName	=3D &quot;/.iris/&quot;
+local configDesktopName	=3D &quot;desktop/&quot;
+local configUoamName	=3D &quot;uoam/&quot;
+
+-- Config-Path
+gConfigPath         =3D gMainWorkingDir..configConfigName
+gConfigPathOrig     =3D gConfigPath		-- Path to original config template
+-- Screenshot-Path
+gScreenshotPath 	=3D gMainWorkingDir..configScreenName
+-- Temporary-Path
+gTempPath           =3D gMainWorkingDir..configTempName
+-- VideoRecording-Path
+gPacketVideoPath	=3D gMainWorkingDir..configVideoName
+
+-- Config-Path Files
+gConfigPathFile     =3D gConfigPath..configFile
+gConfigPathFile_old =3D gDataPath..configFile         -- only as Fallback =
for old users
+gMacroPathFile      =3D gConfigPath..macroFile
+gMacroPathFile_old  =3D gDataPath..macroFile          -- only as Fallback =
for old users
+gFilterFile			=3D gConfigPath..filterFile
+
+-- Config-Path SubDirs
+-- Config-Path Chars Subdir
+-- Config-Path Desktop Subdir
+gDesktopPath		=3D gConfigPath..configDesktopName	-- old was data/desktop/
+-- Config-Path Shards Subdir
+-- Config-Path UOAM Subdir
+gUoamPath			=3D gConfigPath..configUoamName
+-- Config-Path UOAM Subdir File
+gUoamMarkPathFile	=3D gUoamPath..uoamMarkFile
+
+
+-- -----------------------------------------------------------------------=
-----
+-- Global Variables
+-- -----------------------------------------------------------------------=
-----
 gSecondsSinceLastFrame =3D 0
 gInGameStarted =3D false
 gNet_State =3D false
-
 gFrameCounter =3D 0
 =

 function GetStackTrace () return _TRACEBACK() end
@@ -49,35 +96,36 @@
 		=

 		local function MyInitCheckHomeDir (home)
 			print(&quot;trying to init from home path:&quot;,home)
-			gHomeIrisPath 		=3D home..&quot;/.iris/&quot;
-			gTempPath 			=3D gHomeIrisPath..&quot;tmp/&quot;
-			gScreenshotDir		=3D gHomeIrisPath..&quot;screenshots/&quot;
-			gConfigPath 		=3D gHomeIrisPath..&quot;config/&quot;
-			gConfigPathFile     =3D gConfigPath..gConfigFile
-			gMacroPathFile      =3D gConfigPath..gMacroFile
-			gDesktopDir			=3D gConfigPath..&quot;desktop/&quot;
-			gPacketVideoFileName_folderpath	=3D gHomeIrisPath..&quot;videos/&quot; -- todo : =
text=3D'will be saved as .ipv files in iris/videos/'
-			gUOAMDir			=3D gConfigPath..&quot;uoam/&quot;
-			gUoamMarkPathFile	=3D gUOAMDir..gUoamMarkFile
+			local irisHomePath 		=3D home..configFolderName
+			gConfigPath 		=3D irisHomePath..configConfigName
+			gScreenshotPath		=3D irisHomePath..configScreenName
+			gTempPath 			=3D irisHomePath..configTempName
+			gPacketVideoPath	=3D irisHomePath..configVideoName -- todo : text=3D'wi=
ll be saved as .ipv files in ~/.iris/videos/'
+
+			gConfigPathFile     =3D gConfigPath..configFile
+			gMacroPathFile      =3D gConfigPath..macroFile
+			gDesktopPath		=3D gConfigPath..configDesktopName
+			gUoamPath			=3D gConfigPath..configUoamName
+			gUoamMarkPathFile	=3D gUoamPath..uoamMarkFile
 			=

 			-- check if config.lua is already copied
 			if (not file_exists(gConfigPathFile)) then
-				print(&quot;initializing &quot;..gHomeIrisPath)
-				mkdir(gHomeIrisPath)
+				print(&quot;initializing &quot;..irisHomePath)
+				mkdir(irisHomePath)
 				mkdir(gTempPath)
-				mkdir(gScreenshotDir)
+				mkdir(gScreenshotPath)
 				mkdir(gConfigPath)
-				mkdir(gDesktopDir)
-				mkdir(gPacketVideoFileName_folderpath)
-				mkdir(gUOAMDir)
-
-				print(&quot;Copy config from: &quot; .. gMainWorkingDir..&quot;config/&quot; .. &quot; to: &quot; ..=
 gConfigPath)
+				mkdir(gDesktopPath)
+				mkdir(gPacketVideoPath)
+				mkdir(gUoamPath)
+
+				print(&quot;Copy config from: &quot; .. gConfigPathOrig .. &quot; to: &quot; .. gConfigPat=
h)
 				-- test if config dir is writable, probably unicode filepath problem i=
f not (e.g /Data aplikaci/ with accent on i or unicode username or somethin=
g)
 				local config_write_test_path =3D gConfigPath..&quot;config-write-test.txt&quot;
 				local fp =3D io.open(config_write_test_path,&quot;wb&quot;)
 				if (fp) then =

 					fp:close()
-					CopyDir(gMainWorkingDir..&quot;config/&quot;,gConfigPath)
+					CopyDir(gConfigPathOrig,gConfigPath)
 					return true
 				else
 					print(&quot;path not writable:&quot;,config_write_test_path)
@@ -134,6 +182,7 @@
 -- utils first
 print(&quot;MainWorkingDir&quot;,gMainWorkingDir)
 print(&quot;lugreluapath&quot;,lugreluapath)
+
 dofile(lugreluapath .. &quot;lugre.lua&quot;)
 lugre_include_libs(lugreluapath)
 dofile(libpath .. &quot;lib.sound.iris.lua&quot;)
@@ -353,40 +402,38 @@
     OgreAddResLoc(mydatapath..&quot;particles/particles&quot;         ,&quot;FileSystem&quot;,=
&quot;General&quot;)
     OgreAddResLoc(mydatapath..&quot;particles/textures&quot;          ,&quot;FileSystem&quot;,=
&quot;General&quot;)
     OgreAddResLoc(mydatapath..&quot;compositors&quot;                 ,&quot;FileSystem&quot;,=
&quot;General&quot;)
-	=

-    --~ # custom materials
-    OgreAddResLoc(mydatapath..&quot;custom/materials&quot;            ,&quot;FileSystem&quot;,=
&quot;General&quot;)
-	=

-    --~ # distributet models
-    OgreAddResLoc(mydatapath..&quot;models/materials&quot;            ,&quot;FileSystem&quot;,=
&quot;General&quot;)
-    OgreAddResLoc(mydatapath..&quot;models/meta&quot;                 ,&quot;FileSystem&quot;,=
&quot;General&quot;)
-    for i=3D1,20 do OgreAddResLoc(mydatapath..&quot;models/models/&quot;..sprintf(&quot;t=
o_%03d000&quot;,i)   ,&quot;FileSystem&quot;,&quot;General&quot;) end
-    OgreAddResLoc(mydatapath..&quot;models/textures/&quot;            ,&quot;FileSystem&quot;,=
&quot;General&quot;)
-    OgreAddResLoc(mydatapath..&quot;models/atlas&quot;                ,&quot;FileSystem&quot;,=
&quot;General&quot;)
-    OgreAddResLoc(mydatapath..&quot;models/programs&quot;             ,&quot;FileSystem&quot;,=
&quot;General&quot;)
-
-    --~ # custom models
-    OgreAddResLoc(mydatapath..&quot;custom/models&quot;               ,&quot;FileSystem&quot;,=
&quot;General&quot;)
-    OgreAddResLoc(mydatapath..&quot;custom/textures&quot;             ,&quot;FileSystem&quot;,=
&quot;General&quot;)
-
-    --~ # new Terrain Shaderengine
+
+    --~ # distributet tiles
+    OgreAddResLoc(mydatapath..&quot;tiles/materials&quot;             ,&quot;FileSystem&quot;,=
&quot;General&quot;)
+    OgreAddResLoc(mydatapath..&quot;tiles/meta&quot;                  ,&quot;FileSystem&quot;,=
&quot;General&quot;)
+    for i=3D1,20 do OgreAddResLoc(mydatapath..&quot;tiles/meshes/&quot;..sprintf(&quot;to=
_%03d000&quot;,i)   ,&quot;FileSystem&quot;,&quot;General&quot;) end
+    OgreAddResLoc(mydatapath..&quot;tiles/textures/&quot;             ,&quot;FileSystem&quot;,=
&quot;General&quot;)
+    OgreAddResLoc(mydatapath..&quot;tiles/atlas&quot;                 ,&quot;FileSystem&quot;,=
&quot;General&quot;)
+    OgreAddResLoc(mydatapath..&quot;tiles/programs&quot;              ,&quot;FileSystem&quot;,=
&quot;General&quot;)
+
+    --~ # custom tiles (Folder for Mods)
+    OgreAddResLoc(mydatapath..&quot;tiles_custom/materials&quot;      ,&quot;FileSystem&quot;,=
&quot;General&quot;)
+    OgreAddResLoc(mydatapath..&quot;tiles_custom/meshes&quot;         ,&quot;FileSystem&quot;,=
&quot;General&quot;)
+    OgreAddResLoc(mydatapath..&quot;tiles_custom/textures&quot;       ,&quot;FileSystem&quot;,=
&quot;General&quot;)
+
+    --~ # distributet Terrain Shaderengine
     OgreAddResLoc(mydatapath..&quot;terrain/materials&quot;           ,&quot;FileSystem&quot;,=
&quot;General&quot;)
     OgreAddResLoc(mydatapath..&quot;terrain/programs&quot;            ,&quot;FileSystem&quot;,=
&quot;General&quot;)
     OgreAddResLoc(mydatapath..&quot;terrain/textures&quot;            ,&quot;FileSystem&quot;,=
&quot;General&quot;)
     OgreAddResLoc(mydatapath..&quot;terrain/multitex&quot;            ,&quot;FileSystem&quot;,=
&quot;General&quot;)
     OgreAddResLoc(mydatapath..&quot;terrain/multitex/parts&quot;      ,&quot;FileSystem&quot;,=
&quot;General&quot;)
 =

-    --~ # new Grannys
-    OgreAddResLoc(mydatapath..&quot;grannys/materials&quot;           ,&quot;FileSystem&quot;,=
&quot;General&quot;)
-    OgreAddResLoc(mydatapath..&quot;grannys/programs&quot;            ,&quot;FileSystem&quot;,=
&quot;General&quot;)
-
-    --~ # custom Grannys (Ogre.mesh + Ogre.skeleton)
-    OgreAddResLoc(mydatapath..&quot;customchars/materials&quot;       ,&quot;FileSystem&quot;,=
&quot;General&quot;)
-    OgreAddResLoc(mydatapath..&quot;customchars/models&quot;          ,&quot;FileSystem&quot;,=
&quot;General&quot;)
-    OgreAddResLoc(mydatapath..&quot;customchars/textures&quot;        ,&quot;FileSystem&quot;,=
&quot;General&quot;)
+    --~ # new Mobiles (Chars./Monster/Animals) - also called Grannys
+    OgreAddResLoc(mydatapath..&quot;mobiles/materials&quot;        ,&quot;FileSystem&quot;,&quot;Ge=
neral&quot;)
+    OgreAddResLoc(mydatapath..&quot;mobiles/programs&quot;         ,&quot;FileSystem&quot;,&quot;Ge=
neral&quot;)
+
+    --~ # custom Chars/Monster/Animals (Grannys) (Ogre.mesh + Ogre.skeleto=
n)
+    OgreAddResLoc(mydatapath..&quot;mobiles_custom/materials&quot; ,&quot;FileSystem&quot;,&quot;Ge=
neral&quot;)
+    OgreAddResLoc(mydatapath..&quot;mobiles_custom/meshes&quot;    ,&quot;FileSystem&quot;,&quot;Ge=
neral&quot;)
+    OgreAddResLoc(mydatapath..&quot;mobiles_custom/textures&quot;  ,&quot;FileSystem&quot;,&quot;Ge=
neral&quot;)
     =

 	if (gUOPath) then =

-		OgreAddResLoc(gUOPath..CorrectPath(&quot;Models/Maps&quot;)               ,&quot;FileSy=
stem&quot;,&quot;General&quot;)
+		OgreAddResLoc(gUOPath..CorrectPath(&quot;Models/Maps&quot;)   ,&quot;FileSystem&quot;,&quot;Gener=
al&quot;)
 	end
 =

     OgreAddResLoc(gMainWorkingDir..CorrectPath(&quot;lugre/lib/caelum/resources=
&quot;),&quot;FileSystem&quot;,&quot;Caelum&quot;)
@@ -394,12 +441,12 @@
 	if (gDebugModeTestSkeletalAnimShader or gEnableBloomShader) then =

 		local myOgreSampleMedia =3D mydatapath..&quot;ogreSampleMedia/&quot;
 		=

-		OgreAddResLoc(myOgreSampleMedia..&quot;/packs/OgreCore.zip&quot;			,&quot;Zip&quot;,&quot;Bootstr=
ap&quot;)
+		OgreAddResLoc(myOgreSampleMedia..&quot;/packs/OgreCore.zip&quot; ,&quot;Zip&quot;,&quot;Bootstrap=
&quot;)
 		=

-		OgreAddResLoc(myOgreSampleMedia..&quot;/materials/programs&quot;          ,&quot;FileSy=
stem&quot;,&quot;General&quot;)
-		OgreAddResLoc(myOgreSampleMedia..&quot;/materials/scripts&quot;           ,&quot;FileSy=
stem&quot;,&quot;General&quot;)
-		OgreAddResLoc(myOgreSampleMedia..&quot;/materials/textures&quot;          ,&quot;FileSy=
stem&quot;,&quot;General&quot;)
-		OgreAddResLoc(myOgreSampleMedia..&quot;/models&quot;                      ,&quot;FileSy=
stem&quot;,&quot;General&quot;)
+		OgreAddResLoc(myOgreSampleMedia..&quot;/materials/programs&quot; ,&quot;FileSystem&quot;,&quot;Ge=
neral&quot;)
+		OgreAddResLoc(myOgreSampleMedia..&quot;/materials/scripts&quot;  ,&quot;FileSystem&quot;,&quot;Ge=
neral&quot;)
+		OgreAddResLoc(myOgreSampleMedia..&quot;/materials/textures&quot; ,&quot;FileSystem&quot;,&quot;Ge=
neral&quot;)
+		OgreAddResLoc(myOgreSampleMedia..&quot;/models&quot;             ,&quot;FileSystem&quot;,&quot;Ge=
neral&quot;)
 	end
 =

     if gUseCaduneTree then =


Modified: trunk/lua/profiles/gfx_ultrahigh.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/profiles/gfx_ultrahigh.lua (original)
+++ trunk/lua/profiles/gfx_ultrahigh.lua Sun Nov 27 22:08:32 2011
@@ -3,7 +3,7 @@
 =

 gConfig:Set(&quot;gAtlasRes&quot;,&quot;none&quot;)
 =

-gConfig:Set(&quot;gShadowTechnique&quot;,&quot;texture_additive_integrated&quot;)
+gConfig:Set(&quot;gShadowTechnique&quot;,&quot;texture_additive&quot;)
 gConfig:Set(&quot;gStaticsCastShadows&quot;,true)
 gConfig:Set(&quot;gDynamicsCastShadows&quot;,true)
 gConfig:Set(&quot;gMobileCastShadows&quot;,true)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002149.html">[Iris-commit] [IRIS] r3410 - in /trunk/data: custom/ customchars/ grannys/ mobiles/ mobiles_custom/ mobiles_custom/meshes/ mobiles_custom/models/ models/ tiles/ tiles/meshes/ tiles/models/ tiles_custom/ tiles_custom/meshes/ tiles_custom/models/
</A></li>
	<LI>Next message: <A HREF="002151.html">[Iris-commit] [IRIS] r3412 - /trunk/lua/lib.static.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2150">[ date ]</a>
              <a href="thread.html#2150">[ thread ]</a>
              <a href="subject.html#2150">[ subject ]</a>
              <a href="author.html#2150">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/iris-commit">More information about the Iris-commit
mailing list</a><br>
</body></html>
