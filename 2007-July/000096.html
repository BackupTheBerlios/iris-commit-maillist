<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Iris-commit] [IRIS] r1280 - in /trunk/data: lua/ models/materials/ models/models/to_005000/ models/models/to_006000/ models/textures/
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/iris-commit/2007-July/index.html" >
   <LINK REL="made" HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r1280%20-%20in%20/trunk/data%3A%20lua/%20models/materials/%0A%20models/models/to_005000/%20models/models/to_006000/%20models/textures/&In-Reply-To=%3C20070709212545.62E91B145F9%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000095.html">
   <LINK REL="Next"  HREF="000097.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Iris-commit] [IRIS] r1280 - in /trunk/data: lua/ models/materials/ models/models/to_005000/ models/models/to_006000/ models/textures/</H1>
    <B>no-reply at zwischenwelt.org</B> 
    <A HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r1280%20-%20in%20/trunk/data%3A%20lua/%20models/materials/%0A%20models/models/to_005000/%20models/models/to_006000/%20models/textures/&In-Reply-To=%3C20070709212545.62E91B145F9%40localhost.localdomain%3E"
       TITLE="[Iris-commit] [IRIS] r1280 - in /trunk/data: lua/ models/materials/ models/models/to_005000/ models/models/to_006000/ models/textures/">no-reply at zwischenwelt.org
       </A><BR>
    <I>Mon Jul  9 23:25:44 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000095.html">[Iris-commit] [IRIS] r1279 -	/trunk/data/terrain/textures/jungle_large_pattern_512.dds
</A></li>
        <LI>Next message: <A HREF="000097.html">[Iris-commit] [IRIS] r1281 - in /trunk/data: lua/filter.art.lua lua/lib.3d.mousepick.lua lua/lib.3d.renderer.lua lua/lib.debugmenu.lua lua/lib.static.lua terrain/programs/terrainBase_vs.hlsl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#96">[ date ]</a>
              <a href="thread.html#96">[ thread ]</a>
              <a href="subject.html#96">[ subject ]</a>
              <a href="author.html#96">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: sience
Date: Mon Jul  9 23:25:43 2007
New Revision: 1280

Log:
-2 new blood textures
-filter.map.lua added
-some obsolete meshes deleted
-function MobileArtID2BodyID moved to filter.granny.lua

Added:
    trunk/data/lua/filter.map.lua
    trunk/data/models/textures/blood.dds   (with props)
    trunk/data/models/textures/blood_spot.dds   (with props)
Removed:
    trunk/data/models/models/to_005000/mdl_004651.mesh
    trunk/data/models/models/to_005000/mdl_004652.mesh
    trunk/data/models/models/to_005000/mdl_004653.mesh
    trunk/data/models/models/to_005000/mdl_004654.mesh
    trunk/data/models/models/to_005000/mdl_004655.mesh
Modified:
    trunk/data/lua/filter.art.lua
    trunk/data/lua/filter.granny.lua
    trunk/data/lua/lib.3d.map.lua
    trunk/data/lua/lib.models.lua
    trunk/data/lua/lib.terrain.lua
    trunk/data/lua/main.lua
    trunk/data/models/materials/textures.material
    trunk/data/models/models/to_005000/mdl_004650.mesh
    trunk/data/models/models/to_006000/mdl_005701.mesh

Modified: trunk/data/lua/filter.art.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/filter.art.lua (original)
+++ trunk/data/lua/filter.art.lua Mon Jul  9 23:25:43 2007
@@ -83,3 +83,9 @@
 gArtFilter[6683]=3D{filename=3D&quot;mdl_006681.mesh&quot;}
 gArtFilter[6684]=3D{filename=3D&quot;mdl_006681.mesh&quot;}
 gArtFilter[6685]=3D{filename=3D&quot;mdl_006681.mesh&quot;}
+
+gArtFilter[4651]=3D{filename=3D&quot;mdl_004650.mesh&quot;}
+gArtFilter[4652]=3D{filename=3D&quot;mdl_004650.mesh&quot;}
+gArtFilter[4653]=3D{filename=3D&quot;mdl_004650.mesh&quot;}
+gArtFilter[4654]=3D{filename=3D&quot;mdl_004650.mesh&quot;}
+gArtFilter[4655]=3D{filename=3D&quot;mdl_004650.mesh&quot;}

Modified: trunk/data/lua/filter.granny.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/filter.granny.lua (original)
+++ trunk/data/lua/filter.granny.lua Mon Jul  9 23:25:43 2007
@@ -1,13 +1,13 @@
---this file maps artIDs to other IDs
+-- ID Mapping (ArtID to GrannyID)
 gGrannyFilter =3D {}
 =

--- returns mapped grannyid or nil
-function FilterGranny(mobileartid)
+-- FILTER: Grannys
+function MobileArtId2BodyId(mobileartid)
 	if (gGrannyFilter[mobileartid]) then
-		printdebug(&quot;granny&quot;,&quot;TODO : Mobile 778 doesn't work -&gt; mapping to modeli=
d 16&quot;)
+		printdebug(&quot;granny&quot;,&quot;Mapping: ArtID to GrannyID &quot;,mobileartid,&quot; -&gt; &quot;,gGr=
annyFilter[mobileartid].grannyid)
 		return gGrannyFilter[mobileartid].grannyid
 	end
-	return nil
+	return mobileartid
 end
 =

 --armoire - links (2636 - offen)

Modified: trunk/data/lua/lib.3d.map.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.3d.map.lua (original)
+++ trunk/data/lua/lib.3d.map.lua Mon Jul  9 23:25:43 2007
@@ -189,7 +189,19 @@
 						entity.sz =3D sz
 						=

 						-- obsolete ??
-						-- ApplyStaticEntityHue(entity,iHue)		=

+						-- ApplyStaticEntityHue(entity,iHue)
+						if (false) then
+						local arrtiletype =3D {}
+						arrtiletype =3D GetStaticTileType(iTileTypeID)
+						if( BitwiseAND(arrtiletype.miFlags or 0,kTileDataFlag_LightSource) ~=
=3D 0 ) then
+							local x,y,z =3D Renderer3D:UOPosToLocal(entity.x,entity.y,entity.z =
* 0.1)
+							Client_AddPointLight(entity.x-0.5,entity.y-0.5,entity.z+arrtiletype=
.miHeight, 0.3,0.3,0.0, 0.3,0.3,0.0, 5.0,0.1,0.1,0.0)
+							print(&quot;statische lichtquelle artid=3D&quot;..iTileTypeID)
+							print(&quot;item.xloc+item.xadd=3D&quot;..x)
+							print(&quot;item.yloc+item.yadd=3D&quot;..y)
+							print(&quot;item.zloc+item.zadd=3D&quot;..z)
+						end
+						end		=

 						=

 						local myLayer =3D iZ
 						local myLayerStaticGeom =3D chunk.pStaticGeometryLayers[myLayer]

Modified: trunk/data/lua/lib.models.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.models.lua (original)
+++ trunk/data/lua/lib.models.lua Mon Jul  9 23:25:43 2007
@@ -297,12 +297,6 @@
 	local loader =3D LoadGranny(modelpath)
 	gGrannyModelLoaderCache[modelid] =3D loader
 	return loader
-end
-
--- ID Mapping
-function MobileArtId2BodyId (mobileartid)
-	-- FILTER: Grannys
-	return FilterGranny(mobileartid) or mobileartid
 end
 =

 -- returns array with granny-model ids for bodyparts and clothing

Modified: trunk/data/lua/lib.terrain.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.terrain.lua (original)
+++ trunk/data/lua/lib.terrain.lua Mon Jul  9 23:25:43 2007
@@ -19,16 +19,8 @@
 	--Seasonal Translation
 	local iTranslatedTileTypeID=3DTranslateTileTypeID(iTileTypeID, gSeasonSet=
ting)
 =

-	-- FILTER: Groundmaptiles (not really needed)
---	if ( gTerrainShader and (iTranslatedTileTypeID  &gt;=3D 76) and (iTranslat=
edTileTypeID &lt;=3D 112)) then
---		--iTranslatedTileTypeID=3D168
---		return &quot;&quot;
---	end
-	-- FILTER: Watermaptiles
---	if ( gTerrainShader and ((iTranslatedTileTypeID  &gt;=3D 168) and (iTransl=
atedTileTypeID &lt;=3D 171)) or
---		 ((iTranslatedTileTypeID  &gt;=3D 310) and (iTranslatedTileTypeID &lt;=3D 31=
1)) ) then
---		return &quot;&quot;
---	end
+	-- FILTER: Special Filters
+	iTranslatedTileTypeID =3D FilterMap(iTranslatedTileTypeID)
 =

 	--temporary for testing material/shader use for tiles (mystiqq)
 	if (gTerrainShader and OgreMaterialNameKnown(&quot;tileid_&quot; .. iTranslatedTile=
TypeID)) then  =


Modified: trunk/data/lua/main.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/main.lua (original)
+++ trunk/data/lua/main.lua Mon Jul  9 23:25:43 2007
@@ -79,8 +79,10 @@
 dofile(libpath .. &quot;lib.3d.mobileanim.lua&quot;)
 dofile(libpath .. &quot;lib.mount.lua&quot;)
 dofile(libpath .. &quot;lib.corpse.lua&quot;)
+
 dofile(libpath .. &quot;filter.art.lua&quot;)
 dofile(libpath .. &quot;filter.granny.lua&quot;)
+dofile(libpath .. &quot;filter.map.lua&quot;)
 =

 --can be removed from release
 dofile(libpath .. &quot;lib.meshexporter.lua&quot;)

Modified: trunk/data/models/materials/textures.material
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/models/materials/textures.material (original)
+++ trunk/data/models/materials/textures.material Mon Jul  9 23:25:43 2007
@@ -8077,13 +8077,41 @@
 	} =

 }
 =

+material tex_996 : tex_base_alpha
+{ =

+	technique
+	{ =

+		pass
+		{		=

+			texture_unit
+			{ =

+				texture blood.dds
+			}	=

+		}
+	} =

+}
+
+material tex_997 : tex_base_alpha
+{ =

+	technique
+	{ =

+		pass
+		{		=

+			texture_unit
+			{ =

+				texture blood_spot.dds
+			}	=

+		}
+	} =

+}
+
 material tex_998 : tex_base
 { =

-	technique =

-	{ =

-		pass
-		{		=

-			texture_unit =

+	technique
+	{ =

+		pass
+		{		=

+			texture_unit
 			{ =

 				texture tex_998.png
 			}	=


Modified: trunk/data/models/models/to_005000/mdl_004650.mesh
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
Binary files - no diff available.

Modified: trunk/data/models/models/to_006000/mdl_005701.mesh
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
Binary files - no diff available.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000095.html">[Iris-commit] [IRIS] r1279 -	/trunk/data/terrain/textures/jungle_large_pattern_512.dds
</A></li>
	<LI>Next message: <A HREF="000097.html">[Iris-commit] [IRIS] r1281 - in /trunk/data: lua/filter.art.lua lua/lib.3d.mousepick.lua lua/lib.3d.renderer.lua lua/lib.debugmenu.lua lua/lib.static.lua terrain/programs/terrainBase_vs.hlsl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#96">[ date ]</a>
              <a href="thread.html#96">[ thread ]</a>
              <a href="subject.html#96">[ subject ]</a>
              <a href="author.html#96">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/iris-commit">More information about the Iris-commit
mailing list</a><br>
</body></html>
