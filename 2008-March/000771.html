<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Iris-commit] [IRIS] r1959 - /trunk/lua/lib.unifont.lua
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/iris-commit/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r1959%20-%20/trunk/lua/lib.unifont.lua&In-Reply-To=%3C20080312234541.D013F1524013%40zwischenwelt.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000770.html">
   <LINK REL="Next"  HREF="000772.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Iris-commit] [IRIS] r1959 - /trunk/lua/lib.unifont.lua</H1>
    <B>no-reply at zwischenwelt.org</B> 
    <A HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r1959%20-%20/trunk/lua/lib.unifont.lua&In-Reply-To=%3C20080312234541.D013F1524013%40zwischenwelt.org%3E"
       TITLE="[Iris-commit] [IRIS] r1959 - /trunk/lua/lib.unifont.lua">no-reply at zwischenwelt.org
       </A><BR>
    <I>Thu Mar 13 00:45:41 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000770.html">[Iris-commit] [IRIS] r1958 - /trunk/lua/lib.unifont.lua
</A></li>
        <LI>Next message: <A HREF="000772.html">[Iris-commit] [IRIS] r1960 - in /trunk/lua: gui/gui.gumpparser.lua gui/gui.healthbar.lua gui/gui.paperdoll.lua lib.protocol.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#771">[ date ]</a>
              <a href="thread.html#771">[ thread ]</a>
              <a href="subject.html#771">[ subject ]</a>
              <a href="author.html#771">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: ghoulsblade
Date: Thu Mar 13 00:45:41 2008
New Revision: 1959

Log:
tweaked font example a bit

Modified:
    trunk/lua/lib.unifont.lua

Modified: trunk/lua/lib.unifont.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.unifont.lua (original)
+++ trunk/lua/lib.unifont.lua Thu Mar 13 00:45:41 2008
@@ -127,7 +127,8 @@
 	local myfont =3D {}
 	local texname,u0,v0,u1,v1,xoff,yoff,w,h =3D GetUniFontGlyph(loader,kCharC=
ode_SpaceWidthChar)
 	myfont.spacewidth =3D w
-	myfont.defaultlineh =3D 1.5 * math.max(1,h)
+	--~ myfont.defaultlineh =3D 1.5 * math.max(1,h)
+	myfont.defaultlineh =3D 20
 	myfont.GetDefaultFontSize	=3D function (self) return myfont.defaultlineh =
end
 	myfont.GetSpaceWidth		=3D function (self,iFontSize) return self.spacewidt=
h end
 	myfont.GetLineHeight		=3D function (self,iFontSize) return self.defaultli=
neh end
@@ -185,7 +186,7 @@
 function gGlyphListPrototype:AddGlyph	(texname, xmove, xoff,yoff,w,h, u0,v=
0, ux,vx, uy,vy, r,g,b,a)
 	table.insert(self.glyphs,			{texname, xmove, xoff,yoff,w,h, u0,v0, ux,vx,=
 uy,vy, r or 1,g or 1,b or 1,a or 0.5})
 end
-function gGlyphListPrototype:AddIcon	(texname, w,h, u0,v0, u1,v1, r,g,b,a)=
 self:AddGlyph(texname,w,0,0,w,h,u0,v0, u1-u0,0, 0,v1-v0, r,g,b,a) end
+function gGlyphListPrototype:AddIcon	(texname, w,h, yoff, u0,v0, u1,v1, r,=
g,b,a) self:AddGlyph(texname,w,0,yoff,w,h,u0,v0, u1-u0,0, 0,v1-v0, r,g,b,a)=
 end
 =

 function gGlyphListPrototype:ClearSpriteLists ()
 	for k,spritelist in pairs(self.spritelists) do spritelist:Destroy() end
@@ -276,15 +277,16 @@
 	local myfont_uo0	=3D CreateFontObject_UO(gUniFontLoaderList[0]) -- 0=3Dme=
dieval =

 	local myfont_uo3	=3D CreateFontObject_UO(gUniFontLoaderList[3]) -- 3=3Dde=
fault-chat
 	=

-	local mytext =3D &quot;Hallo, test 0123\nBlablubblub\nUnicode:=C3=A4=C3=B6=C3=
=BC=C3=9F=C3=84=C3=96=C3=9C(german)\nTab\t1\tTabtest\nt\t1\n\t1\n\t\t2\n\t\=
t\t3\nFont1&quot;
+	--~ local mytext =3D &quot;Hallo, test 0123\nBlablubblub\nUnicode:=C3=A4=C3=B6=
=C3=BC=C3=9F=C3=84=C3=96=C3=9C(german)\nTab\t1\tTabtest\nt\t1\n\t1\n\t\t2\n=
\t\t\t3\nFont1&quot;
+	local mytext =3D &quot;Hello, test 0123\nUnicode:=C3=A4=C3=B6=C3=BC=C3=9F=C3=
=84=C3=96=C3=9C(german)\nFont1&quot;
 	-- glyphlist:AddFontText(fontobj,text,r,g,b,a,iFontSize)
 	glyphlist:AddFontText(myfont_uo0,mytext)
 	glyphlist:AddFontText(myfont_ogre,&quot;,font2&quot;)
 	glyphlist:AddFontText(myfont_uo3,&quot;,font3\n&quot;)
 	=

 	local funchars =3D &quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1=
234567890&quot;
-	for y=3D0,4 do
-		for i=3D0,30 do
+	for y=3D0,0 do
+		for i=3D0,20 do
 			local cpos =3D math.random(string.len(funchars))
 			local c =3D string.sub(funchars,cpos,cpos)
 			local r,g,b,a =3D math.random(),math.random(),math.random(),1
@@ -296,24 +298,30 @@
 		end
 		glyphlist:AddFontText(myfont_uo3,&quot;\n&quot;)
 	end
-	glyphlist:AddFontText(myfont_uo3,&quot;Fonts &quot;)
-	glyphlist:AddFontText(myfont_uo0,&quot;and &quot;)
+	glyphlist:AddFontText(myfont_uo0,&quot;Fonts &quot;)
+	glyphlist:AddFontText(myfont_uo3,&quot;and &quot;)
 	glyphlist:AddFontText(myfont_uo3,&quot;C&quot;, 1,0,0)
 	glyphlist:AddFontText(myfont_uo3,&quot;o&quot;, 0,0,1)
 	glyphlist:AddFontText(myfont_uo3,&quot;l&quot;, 0,1,1)
 	glyphlist:AddFontText(myfont_uo3,&quot;o&quot;, 0,1,0)
 	glyphlist:AddFontText(myfont_uo3,&quot;r&quot;, 1,0,1)
 	glyphlist:AddFontText(myfont_uo3,&quot;s&quot;, 1,1,0)
-	glyphlist:AddFontText(myfont_uo0,&quot; can be&quot;)
-	glyphlist:AddFontText(myfont_uo3,&quot; mixed\n&quot;)
-	=

-	glyphlist:AddFontText(myfont_uo3,&quot;including images &quot;)
-	glyphlist:AddIcon(&quot;art_fallback.png&quot;,	16,16, 0,0, 1,1)
-	glyphlist:AddFontText(myfont_uo3,&quot; is also possible, even colored &quot;)
+	glyphlist:AddFontText(myfont_uo3,&quot; can be&quot;)
+	glyphlist:AddFontText(myfont_uo0,&quot; mixed\n&quot;)
+	=

+	glyphlist:AddFontText(myfont_uo3,&quot;you can include images &quot;)
+	--~ glyphlist:AddSpace(2)
+	--~ glyphlist:AddIcon(&quot;art_fallback.png&quot;,	18,18, 0, 0,0, 1,1)
+	local e =3D 1/8
+	glyphlist:AddIcon(&quot;compassframe_zoomin.png&quot;, 24,24, -2, e,e, 1-e,1-e)
+	glyphlist:AddFontText(myfont_uo0,&quot;12&quot;,0,1,0)
+	glyphlist:AddFontText(myfont_uo3,&quot;,\nand even color them &quot;)
 	=

 	local texname, w,h, u0,v0, u1,v1, r,g,b,a =3D &quot;guibase.png&quot;, 16,16, 0,0.5=
, 0.5,1
-	glyphlist:AddIcon(texname, w,h, u0,v0, u1,v1, 1,0,0,1) glyphlist:AddSpace=
(4)
-	glyphlist:AddIcon(texname, w,h, u0,v0, u1,v1, 0,1,0,1)
+	glyphlist:AddIcon(texname, w,h, 2, u0,v0, u1,v1, 1,1,1,1) glyphlist:AddSp=
ace(4)
+	glyphlist:AddIcon(texname, w,h, 2, u0,v0, u1,v1, 1,0,0,1) glyphlist:AddSp=
ace(4)
+	glyphlist:AddIcon(texname, w,h, 2, u0,v0, u1,v1, 0,1,0,1)
+	glyphlist:AddFontText(myfont_uo3,&quot; =3D)&quot;)
 	glyphlist:UpdateGeometry()
 end
 =



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000770.html">[Iris-commit] [IRIS] r1958 - /trunk/lua/lib.unifont.lua
</A></li>
	<LI>Next message: <A HREF="000772.html">[Iris-commit] [IRIS] r1960 - in /trunk/lua: gui/gui.gumpparser.lua gui/gui.healthbar.lua gui/gui.paperdoll.lua lib.protocol.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#771">[ date ]</a>
              <a href="thread.html#771">[ thread ]</a>
              <a href="subject.html#771">[ subject ]</a>
              <a href="author.html#771">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/iris-commit">More information about the Iris-commit
mailing list</a><br>
</body></html>
