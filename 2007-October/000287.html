<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Iris-commit] [IRIS] r1472 - in /trunk: bin/iris2.exe data/config.lua.dist data/lua/filter.granny.lua data/lua/lib.bodygfx.lua data/lua/lib.granny.lua data/lua/lib.static.lua vc8/iris.vcproj
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/iris-commit/2007-October/index.html" >
   <LINK REL="made" HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r1472%20-%20in%20/trunk%3A%20bin/iris2.exe%0A%20data/config.lua.dist%20data/lua/filter.granny.lua%20data/lua/lib.bodygfx.lua%0A%20data/lua/lib.granny.lua%20data/lua/lib.static.lua%20vc8/iris.vcproj&In-Reply-To=%3C20071011184521.F1EED1C1817C%40zwischenwelt.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000286.html">
   <LINK REL="Next"  HREF="000288.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Iris-commit] [IRIS] r1472 - in /trunk: bin/iris2.exe data/config.lua.dist data/lua/filter.granny.lua data/lua/lib.bodygfx.lua data/lua/lib.granny.lua data/lua/lib.static.lua vc8/iris.vcproj</H1>
    <B>no-reply at zwischenwelt.org</B> 
    <A HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r1472%20-%20in%20/trunk%3A%20bin/iris2.exe%0A%20data/config.lua.dist%20data/lua/filter.granny.lua%20data/lua/lib.bodygfx.lua%0A%20data/lua/lib.granny.lua%20data/lua/lib.static.lua%20vc8/iris.vcproj&In-Reply-To=%3C20071011184521.F1EED1C1817C%40zwischenwelt.org%3E"
       TITLE="[Iris-commit] [IRIS] r1472 - in /trunk: bin/iris2.exe data/config.lua.dist data/lua/filter.granny.lua data/lua/lib.bodygfx.lua data/lua/lib.granny.lua data/lua/lib.static.lua vc8/iris.vcproj">no-reply at zwischenwelt.org
       </A><BR>
    <I>Thu Oct 11 20:45:20 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000286.html">[Iris-commit] [IRIS] r1471 - in /trunk: bin/iris2.exe data/lua/filter.art.lua data/lua/lib.3d.dynamic.lua data/lua/lib.static.lua data/lua/lib.tilefreewalk.lua data/lua/lib.uoids.lua
</A></li>
        <LI>Next message: <A HREF="000288.html">[Iris-commit] [IRIS] r1473 - in /trunk/data/lua: lib.3d.cam.lua lib.tilefreewalk.lua net.walk.lua obj/obj.player.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#287">[ date ]</a>
              <a href="thread.html#287">[ thread ]</a>
              <a href="subject.html#287">[ subject ]</a>
              <a href="author.html#287">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: sience
Date: Thu Oct 11 20:45:19 2007
New Revision: 1472

Log:
-some bugfixes
-grannyoverride filter named
-new project vs8 update

Modified:
    trunk/bin/iris2.exe
    trunk/data/config.lua.dist
    trunk/data/lua/filter.granny.lua
    trunk/data/lua/lib.bodygfx.lua
    trunk/data/lua/lib.granny.lua
    trunk/data/lua/lib.static.lua
    trunk/vc8/iris.vcproj

Modified: trunk/bin/iris2.exe
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
Binary files - no diff available.

Modified: trunk/data/config.lua.dist
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/config.lua.dist (original)
+++ trunk/data/config.lua.dist Thu Oct 11 20:45:19 2007
@@ -4,7 +4,7 @@
 =

 =

 -- Client Identification String
-gClientVersion =3D &quot;6.0.2.0&quot;  -- try other version for example &quot;4.0.11c5&quot;
+gClientVersion =3D &quot;6.0.3.1&quot;  -- try other version for example &quot;4.0.11c5&quot;
 =

 gUseNewModelLoader =3D true -- use old (models.uim) or new (many mesh file=
s) model loader
 =


Modified: trunk/data/lua/filter.granny.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/filter.granny.lua (original)
+++ trunk/data/lua/filter.granny.lua Thu Oct 11 20:45:19 2007
@@ -2,7 +2,7 @@
 gGrannyFilter =3D {}
 =

 -- FILTER: Grannys
-function MobileArtId2BodyId(mobileartid)
+function GrannyOverride(mobileartid)
 	if (gGrannyFilter[mobileartid]) then
 		printdebug(&quot;granny&quot;,&quot;Mapping: ArtID to GrannyID &quot;,mobileartid,&quot; -&gt; &quot;,gGr=
annyFilter[mobileartid].grannyid)
 		return gGrannyFilter[mobileartid].grannyid
@@ -10,9 +10,8 @@
 	return mobileartid
 end
 =

---armoire - links (2636 - offen)
---2637 - geschlossen
 gGrannyFilter[987]	=3D{grannyid=3D400}
 gGrannyFilter[1987]	=3D{grannyid=3D401}
 gGrannyFilter[778]	=3D{grannyid=3D16}
 gGrannyFilter[292]	=3D{grannyid=3D220}
+gGrannyFilter[970]	=3D{grannyid=3D402}

Modified: trunk/data/lua/lib.bodygfx.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.bodygfx.lua (original)
+++ trunk/data/lua/lib.bodygfx.lua Thu Oct 11 20:45:19 2007
@@ -57,7 +57,7 @@
 	end =

 end
 =

-function gBodyGfxPrototype:GetBodyID () return self.bodyid or MobileArtId2=
BodyId(self.artid) end
+function gBodyGfxPrototype:GetBodyID () return self.bodyid or GrannyOverri=
de(self.artid) end
 =

 function gBodyGfxPrototype:CalcBodyHash ()
 	-- self.equipmentlist

Modified: trunk/data/lua/lib.granny.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.granny.lua (original)
+++ trunk/data/lua/lib.granny.lua Thu Oct 11 20:45:19 2007
@@ -140,7 +140,7 @@
 -- Models.txt : 234	2	0	FFFFFFFF	0	1.3	1.3	1.3	deer_stag
 -- Animal.lst : 0	Walk
 function GetAnimPath (mobileartid,animid) =

-	local bodyid =3D MobileArtId2BodyId(mobileartid)
+	local bodyid =3D GrannyOverride(mobileartid)
 	local modelinfo =3D GetGrannyModelInfo(bodyid)
 	if (not modelinfo) then return nil end
 	while (modelinfo.animid ~=3D 0) do modelinfo =3D GetGrannyModelInfo(model=
info.animid) end
@@ -155,7 +155,7 @@
 -- determines &quot;type&quot; (human,animal,monster,sea,other) from the second colu=
mn in the Models.txt
 -- Human.lst : 23	Horse_Walk_01
 function GetAnimName (mobileartid,animid) =

-	local bodyid =3D MobileArtId2BodyId(mobileartid)
+	local bodyid =3D GrannyOverride(mobileartid)
 	local modelinfo =3D GetGrannyModelInfo(bodyid)
 	while (modelinfo and modelinfo.animid ~=3D 0) do modelinfo =3D GetGrannyM=
odelInfo(modelinfo.animid) end
 	return modelinfo and gAnimInfoLists and gAnimInfoLists[modelinfo.typeid] =
and gAnimInfoLists[modelinfo.typeid][animid]
@@ -306,6 +306,7 @@
 =

 gGrannyMeshCache =3D {}
 function GetGrannyMeshName (modelid,skeletonname,hue)
+	modelid =3D GrannyOverride(modelid)
 	local cachename =3D modelid..&quot;_&quot;..hue
 	local cache =3D gGrannyMeshCache[cachename] =

 	if (cache ~=3D nil) then return cache end

Modified: trunk/data/lua/lib.static.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/lua/lib.static.lua (original)
+++ trunk/data/lua/lib.static.lua Thu Oct 11 20:45:19 2007
@@ -126,7 +126,7 @@
 		gLegacyModelCache[iTranslatedTileTypeID..&quot;_&quot;..iHue] =3D meshname
 	end
 =

-	if (meshname and gHueLoader) then
+	if (gHueLoader) then
 		if( TestBit(GetStaticTileTypeFlags(iTranslatedTileTypeID) or 0,kTileData=
Flag_Partial_Hue) ) then
 			printdebug(&quot;static&quot;,&quot;parthuedmodel=3D&quot;,iTranslatedTileTypeID)
 		elseif ((tonumber(iHue) &gt; 0) and (tonumber(iHue) &lt; gMaxHueValue)) then

Modified: trunk/vc8/iris.vcproj
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/vc8/iris.vcproj (original)
+++ trunk/vc8/iris.vcproj Thu Oct 11 20:45:19 2007
@@ -124,7 +124,7 @@
 				OmitFramePointers=3D&quot;true&quot;
 				EnableFiberSafeOptimizations=3D&quot;false&quot;
 				WholeProgramOptimization=3D&quot;true&quot;
-				AdditionalIncludeDirectories=3D&quot;&quot;$(INCLUDE)&quot;;&quot;$(OGRE_HO=
ME)\include\&quot;;&quot;$(OGRE_HOME)\include\OIS\&quot;;..\include\;..\inc=
lude\zlib;..\include\fmodx;..\include\lua;..\lugre\include&quot;
+				AdditionalIncludeDirectories=3D&quot;&quot;$(INCLUDE)&quot;;&quot;$(OGRE_HO=
ME)\include\&quot;;&quot;$(OGRE_HOME)\include\OIS\&quot;;..\include\;..\inc=
lude\zlib;..\include\fmodx;..\include\lua;..\lugre\include;&quot;c:\Program=
me\Microsoft Platform SDK\Include\&quot;&quot;
 				PreprocessorDefinitions=3D&quot;WIN32;USE_FMOD;MAIN_WORKING_DIR=3D\&quot;..=
/\&quot;&quot;
 				RuntimeLibrary=3D&quot;0&quot;
 				EnableEnhancedInstructionSet=3D&quot;1&quot;
@@ -147,7 +147,7 @@
 				Name=3D&quot;VCLinkerTool&quot;
 				AdditionalDependencies=3D&quot;LIBCMT.lib LIBCPMT.LIB AdvAPI32.Lib User32.L=
ib zlib.lib ws2_32.lib LibLua+CRT.lib LibLuaLib+CRT.lib OgreMain.lib OIS.li=
b fmodex_vc.lib&quot;
 				OutputFile=3D&quot;$(OutDir)\..\..\bin\iris2.exe&quot;
-				AdditionalLibraryDirectories=3D&quot;&quot;$(LIB)&quot;;&quot;$(OGRE_HOME)\=
lib\&quot;;..\libs\fmodx;..\libs\zlib;..\libs\lua&quot;
+				AdditionalLibraryDirectories=3D&quot;&quot;$(LIB)&quot;;&quot;$(OGRE_HOME)\=
lib\&quot;;..\libs\fmodx;..\libs\zlib;..\libs\lua;&quot;c:\Programme\Micros=
oft Platform SDK\Lib&quot;&quot;
 				GenerateManifest=3D&quot;true&quot;
 				IgnoreAllDefaultLibraries=3D&quot;true&quot;
 				IgnoreDefaultLibraryNames=3D&quot;&quot;
@@ -229,10 +229,6 @@
 			&lt;/File&gt;
 			&lt;File
 				RelativePath=3D&quot;..\src\huffman.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=3D&quot;..\src\legacydata.cpp&quot;
 				&gt;
 			&lt;/File&gt;
 			&lt;File


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000286.html">[Iris-commit] [IRIS] r1471 - in /trunk: bin/iris2.exe data/lua/filter.art.lua data/lua/lib.3d.dynamic.lua data/lua/lib.static.lua data/lua/lib.tilefreewalk.lua data/lua/lib.uoids.lua
</A></li>
	<LI>Next message: <A HREF="000288.html">[Iris-commit] [IRIS] r1473 - in /trunk/data/lua: lib.3d.cam.lua lib.tilefreewalk.lua net.walk.lua obj/obj.player.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#287">[ date ]</a>
              <a href="thread.html#287">[ thread ]</a>
              <a href="subject.html#287">[ subject ]</a>
              <a href="author.html#287">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/iris-commit">More information about the Iris-commit
mailing list</a><br>
</body></html>
