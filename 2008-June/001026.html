<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Iris-commit] [IRIS] r2217 - in /trunk: data/skippedfallbacks.lua lua/gui/gui.gumpparser.lua lua/gui/gui.paperdoll.lua lua/gui/gui.quit.lua lua/lib.cliloc.lua lua/lib.compass.lua lua/net/net.other.lua
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/iris-commit/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r2217%20-%20in%20/trunk%3A%20data/skippedfallbacks.lua%0A%20lua/gui/gui.gumpparser.lua%20lua/gui/gui.paperdoll.lua%20lua/gui/gui.quit.lua%0A%20lua/lib.cliloc.lua%20lua/lib.compass.lua%20lua/net/net.other.lua&In-Reply-To=%3C20080602222812.70F2C1C180E5%40zwischenwelt.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001025.html">
   <LINK REL="Next"  HREF="001027.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Iris-commit] [IRIS] r2217 - in /trunk: data/skippedfallbacks.lua lua/gui/gui.gumpparser.lua lua/gui/gui.paperdoll.lua lua/gui/gui.quit.lua lua/lib.cliloc.lua lua/lib.compass.lua lua/net/net.other.lua</H1>
    <B>no-reply at zwischenwelt.org</B> 
    <A HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r2217%20-%20in%20/trunk%3A%20data/skippedfallbacks.lua%0A%20lua/gui/gui.gumpparser.lua%20lua/gui/gui.paperdoll.lua%20lua/gui/gui.quit.lua%0A%20lua/lib.cliloc.lua%20lua/lib.compass.lua%20lua/net/net.other.lua&In-Reply-To=%3C20080602222812.70F2C1C180E5%40zwischenwelt.org%3E"
       TITLE="[Iris-commit] [IRIS] r2217 - in /trunk: data/skippedfallbacks.lua lua/gui/gui.gumpparser.lua lua/gui/gui.paperdoll.lua lua/gui/gui.quit.lua lua/lib.cliloc.lua lua/lib.compass.lua lua/net/net.other.lua">no-reply at zwischenwelt.org
       </A><BR>
    <I>Tue Jun  3 00:28:11 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001025.html">[Iris-commit] [IRIS] r2216 - in /trunk: data/config.lua.dist	lua/lib.tilefreewalk.lua
</A></li>
        <LI>Next message: <A HREF="001027.html">[Iris-commit] [IRIS] r2218 - in /trunk: bin/iris2.exe data/skippedfallbacks.lua lua/lib.mainmenu.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1026">[ date ]</a>
              <a href="thread.html#1026">[ thread ]</a>
              <a href="subject.html#1026">[ subject ]</a>
              <a href="author.html#1026">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: sience
Date: Tue Jun  3 00:28:07 2008
New Revision: 2217

Log:
-made some cleanups
-quit gump bugfixed
-skippedfallback added

Modified:
    trunk/data/skippedfallbacks.lua
    trunk/lua/gui/gui.gumpparser.lua
    trunk/lua/gui/gui.paperdoll.lua
    trunk/lua/gui/gui.quit.lua
    trunk/lua/lib.cliloc.lua
    trunk/lua/lib.compass.lua
    trunk/lua/net/net.other.lua

Modified: trunk/data/skippedfallbacks.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/data/skippedfallbacks.lua (original)
+++ trunk/data/skippedfallbacks.lua Tue Jun  3 00:28:07 2008
@@ -480,3 +480,4 @@
 RegisterSkippedArtBillboardFallBack(15955) -- 0x3e53 name=3Dtiller man
 RegisterSkippedArtBillboardFallBack(15973) -- 0x3e65 name=3Dhatch
 RegisterSkippedArtBillboardFallBack(16057) -- 0x3eb9 name=3Dhatch
+RegisterSkippedArtBillboardFallBack(2545) -- 0x09f1 name=3Dcut%s% of raw r=
ibs

Modified: trunk/lua/gui/gui.gumpparser.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/gui/gui.gumpparser.lua (original)
+++ trunk/lua/gui/gui.gumpparser.lua Tue Jun  3 00:28:07 2008
@@ -29,7 +29,7 @@
 	msg.href =3D &quot;&quot;
 =

 	if (not(textstring)) then return msg end
-
+	=

 	local bToken =3D {}
 =

 	--extract tokens
@@ -106,7 +106,7 @@
 			skipnexttoken =3D skipnexttoken - 1
 		end
 	end
-
+	=

 	printdebug(&quot;gump&quot;,&quot;HtmlParser return message: &quot;..msg.text)
 	return msg
 end
@@ -484,7 +484,7 @@
 =

 				local widget =3D MakeGumpCheckBox(curparent, check_state &gt; 0, check_no=
rm, check_down, check_x, check_y)
 				=

-				--[[
+--[[
 				if (check_state=3D=3D0) then
 					widget =3D MakeBorderGumpPart(curparent, check_norm, check_x, check_y)
 				else
@@ -508,7 +508,7 @@
 											printdebug(&quot;gump&quot;,&quot;Checkbox changed : id=3D&quot;..widget.returnmsg.=
.&quot; state=3D&quot;..widget.state)
 										end
 									  end
-									  ]]
+]]--
 				if (Clientsidemode) then dialog.controls[ bToken[8] ] =3D widget end
 				table.insert(dialog.uo_check,widget)
 =


Modified: trunk/lua/gui/gui.paperdoll.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/gui/gui.paperdoll.lua (original)
+++ trunk/lua/gui/gui.paperdoll.lua Tue Jun  3 00:28:07 2008
@@ -203,8 +203,7 @@
 	end
 =

 	-- Fallback to female
-	-- TODO : SiENcE : local gumpid =3D animid+50000
-	local gumpid =3D animid+base_id
+	local gumpid =3D animid + base_id
 	if (GetGumpMat(gumpid) =3D=3D &quot;&quot; and base_id =3D=3D kGumpBaseId_Female) t=
hen gumpid =3D animid+kGumpBaseId_Male end -- fallback to male
 	if (item.layer =3D=3D kLayer_Backpack) then gumpid =3D animid+kGumpBaseId=
_Male end -- no female backpack ;)
 =

@@ -243,14 +242,6 @@
 		gCurrentRenderer.gMousePickTippOverride =3D false
 		Client_SetBottomLine(&quot;&quot;)
 	end
-
-
-	-- SiENcE: not needed as Ticket -&gt; <A HREF="http://zwischenwelt.org/trac/iris/chan=">http://zwischenwelt.org/trac/iris/chan=</A>
geset/2062
-	-- request tooltip if there is no
---	local tt =3D AosToolTip_GetText(widget.item.serial)
---	if not tt or tt =3D=3D &quot;&quot; then
---		Send_ToolTipRequest(widget.item.serial)
---	end
 =

 	if (gTooltipSupport) then
 		widget.tooltip_offx =3D kUOToolTippOffX

Modified: trunk/lua/gui/gui.quit.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/gui/gui.quit.lua (original)
+++ trunk/lua/gui/gui.quit.lua Tue Jun  3 00:28:07 2008
@@ -17,22 +17,19 @@
 }
 quitGump.functions =3D {
  -- quitcanel
- [0]	=3D function (widget,mousebutton) if (mousebutton =3D=3D 1) then widg=
et.dialog:Close() gQuitDialog =3D nil end end,
+ [0]	=3D function (widget,mousebutton) if (mousebutton =3D=3D 1) then widg=
et.dialog:Close() gQuitDialog =3D nil  end end,
  -- quitok
  [1]	=3D function (widget,mousebutton) if (mousebutton =3D=3D 1) then Term=
inate() end end,
 }
 =

 gQuitDialog =3D nil
 function OpenQuit()
-	if gQuitDialog then
-		gQuitDialog:Close()
-		gQuitDialog =3D nil
-	else
+	if not(gQuitDialog) then
 		local dialog =3D GumpParser( quitGump, true )
 =

 		-- overwrite the onMouseDown function from gumpparser
 		dialog.onMouseDown =3D function (widget,mousebutton)
-			if (mousebutton =3D=3D 2) then widget.dialog:Close() end
+			if (mousebutton =3D=3D 2) then widget.dialog:Close() gQuitDialog =3D ni=
l end
 			if (mousebutton =3D=3D 1) then widget.dialog:BringToFront() gui.StartMo=
veDialog(widget.dialog.rootwidget) end
 		end
 		=


Modified: trunk/lua/lib.cliloc.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.cliloc.lua (original)
+++ trunk/lua/lib.cliloc.lua Tue Jun  3 00:28:07 2008
@@ -39,7 +39,7 @@
 		index =3D tonumber(index)
 		if (self.override) then res =3D self.override:Get(index) end
 		if (not res) then res =3D self.data[index] end
-		if (not res) then print(&quot;WARNING ! cliloc message &quot;..index..&quot; not found&quot;=
) end
+		--if (not res) then print(&quot;WARNING ! cliloc message &quot;..index..&quot; not foun=
d&quot;) end
 		return res
 	end
 	=


Modified: trunk/lua/lib.compass.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.compass.lua (original)
+++ trunk/lua/lib.compass.lua Tue Jun  3 00:28:07 2008
@@ -27,7 +27,7 @@
 -baker: 1514 611 3 =

 +ruins: 1586 1004 3 abandoned building
 +landmark: 478 1531 3 abandoned mage tower
-]]
+]]--
 	if file_exists(file) then
 		for line in io.lines(file) do
 			-- for w in string.gfind(jline, &quot;%S+&quot;) do

Modified: trunk/lua/net/net.other.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/net/net.other.lua (original)
+++ trunk/lua/net/net.other.lua Tue Jun  3 00:28:07 2008
@@ -249,7 +249,7 @@
 			BYTE[4] serial
 			BYTE[1] unknown // always 0 ?
 			BYTE[1] lockBits // Bits: XXSS DDII (s=3Dstrength, d=3Ddex, i=3Dint), 0=
 =3D up, 1 =3D down, 2 =3D locked
-		]]
+		]]--
 		if (party_cmd =3D=3D hex2num(&quot;0x02&quot;)) then
 			local serial =3D input:PopNetUint32()
 			local value  =3D input:PopNetUint8()


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001025.html">[Iris-commit] [IRIS] r2216 - in /trunk: data/config.lua.dist	lua/lib.tilefreewalk.lua
</A></li>
	<LI>Next message: <A HREF="001027.html">[Iris-commit] [IRIS] r2218 - in /trunk: bin/iris2.exe data/skippedfallbacks.lua lua/lib.mainmenu.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1026">[ date ]</a>
              <a href="thread.html#1026">[ thread ]</a>
              <a href="subject.html#1026">[ subject ]</a>
              <a href="author.html#1026">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/iris-commit">More information about the Iris-commit
mailing list</a><br>
</body></html>
