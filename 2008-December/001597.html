<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Iris-commit] [IRIS] r2793 - in /trunk/lua: lib.configdialog.lua	main.lua
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/iris-commit/2008-December/index.html" >
   <LINK REL="made" HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r2793%20-%20in%20/trunk/lua%3A%20lib.configdialog.lua%0A%09main.lua&In-Reply-To=%3C20081215150138.9E3731C187F1%40zwischenwelt.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001596.html">
   <LINK REL="Next"  HREF="001598.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Iris-commit] [IRIS] r2793 - in /trunk/lua: lib.configdialog.lua	main.lua</H1>
    <B>no-reply at zwischenwelt.org</B> 
    <A HREF="mailto:iris-commit%40lists.berlios.de?Subject=Re%3A%20%5BIris-commit%5D%20%5BIRIS%5D%20r2793%20-%20in%20/trunk/lua%3A%20lib.configdialog.lua%0A%09main.lua&In-Reply-To=%3C20081215150138.9E3731C187F1%40zwischenwelt.org%3E"
       TITLE="[Iris-commit] [IRIS] r2793 - in /trunk/lua: lib.configdialog.lua	main.lua">no-reply at zwischenwelt.org
       </A><BR>
    <I>Mon Dec 15 16:01:38 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001596.html">[Iris-commit] [IRIS] r2792 - in /trunk/lua: lib.debugmenu.lua lib.mount.lua lib.protocol.lua widgets/widget.uotext.lua
</A></li>
        <LI>Next message: <A HREF="001598.html">[Iris-commit] [IRIS] r2794 - /trunk/include/data_artmap.h
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1597">[ date ]</a>
              <a href="thread.html#1597">[ thread ]</a>
              <a href="subject.html#1597">[ subject ]</a>
              <a href="author.html#1597">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: ghoulsblade
Date: Mon Dec 15 16:01:37 2008
New Revision: 2793

Log:
config dialog cleaned a bit

Modified:
    trunk/lua/lib.configdialog.lua
    trunk/lua/main.lua

Modified: trunk/lua/lib.configdialog.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/lib.configdialog.lua (original)
+++ trunk/lua/lib.configdialog.lua Mon Dec 15 16:01:37 2008
@@ -13,24 +13,31 @@
 	local u0,v0,w0,w1,w2,h0,h1,h2, tcx,tcy =3D 0,0, 4,8,4, 4,8,4, 32,32
 	=

 	=

-	GuiThemeSetDefaultParam(&quot;Button&quot;,{	gfxparam_init 		=3D MakeSpritePanelPar=
am_BorderPartMatrix(GetPlainTextureGUIMat(texname),w,h,xoff,yoff, u0,v0,w0,=
w1,w2,h0,h1,h2, tcx,tcy, 1,1, false, false),
+	-- sience_window.png 64x64		w=3D16,24,24 h=3D16,16,32
+	-- sience_button.png 128x128 128x25	w=3D6,116,6 h=3D6,13,6
+	=

+	local b =3D 3
+	=

+	local gfxparam_white =3D MakeSpritePanelParam_BorderPartMatrix(GetPlainTe=
xtureGUIMat(texname),w,h,xoff,yoff, u0,v0,w0,w1,w2,h0,h1,h2, tcx,tcy, 1,1, =
false, false)
+	=

+	GuiThemeSetDefaultParam(&quot;Button&quot;,{	gfxparam_init 		=3D gfxparam_white,
 										gfxparam_in_down	=3D MakeSpritePanelParam_Mod_TexTransform(0.0,0=
.5,1,1,0),
 										gfxparam_in_up		=3D MakeSpritePanelParam_Mod_TexTransform(0.5,0.=
0,1,1,0),
 										gfxparam_out_down	=3D MakeSpritePanelParam_Mod_TexTransform(0.0,=
0.0,1,1,0),
 										gfxparam_out_up		=3D MakeSpritePanelParam_Mod_TexTransform(0.0,0=
.0,1,1,0),
-										margin_left=3D 10,
-										margin_top=3D 10,
-										margin_right=3D 10,
-										margin_bottom=3D 10,
+										margin_left=3D b,
+										margin_top=3D b,
+										margin_right=3D b,
+										margin_bottom=3D b,
 										font=3DCreateFont_UO(gUniFontLoaderList[0]),
 										textcol=3D{r=3D0,g=3D0,b=3D0},
 									})
 	=

-	GuiThemeSetDefaultParam(&quot;Window&quot;,{	gfxparam_init 		=3D MakeSpritePanelPar=
am_BorderPartMatrix(GetPlainTextureGUIMat(texname),w,h,xoff,yoff, u0,v0,w0,=
w1,w2,h0,h1,h2, tcx,tcy, 1,1, false, false),
+	GuiThemeSetDefaultParam(&quot;Window&quot;,{	gfxparam_init 		=3D gfxparam_white,
 									})
-	GuiThemeSetDefaultParam(&quot;List&quot;,{	gfxparam_init 		=3D MakeSpritePanelParam=
_BorderPartMatrix(GetPlainTextureGUIMat(texname),w,h,xoff,yoff, u0,v0,w0,w1=
,w2,h0,h1,h2, tcx,tcy, 1,1, false, false),
+	GuiThemeSetDefaultParam(&quot;List&quot;,{	gfxparam_init 		=3D gfxparam_white,
 									})
-	GuiThemeSetDefaultParam(&quot;Pane&quot;,{	gfxparam_init 		=3D MakeSpritePanelParam=
_BorderPartMatrix(GetPlainTextureGUIMat(texname),w,h,xoff,yoff, u0,v0,w0,w1=
,w2,h0,h1,h2, tcx,tcy, 1,1, false, false),
+	GuiThemeSetDefaultParam(&quot;Pane&quot;,{	gfxparam_init 		=3D gfxparam_white,
 									})
 	=

 	=

@@ -38,6 +45,7 @@
 	local kConfigDialogW =3D 400
 	local kConfigDialogH =3D 300
 	local dialog =3D GetDesktopWidget():CreateChild(&quot;Window&quot;,{w=3DkConfigDial=
ogW,h=3DkConfigDialogH})
+	gConfigDialog =3D dialog
 	dialog:SetPos(100,100)
 	--~ local btn =3D dialog:CreateContentChild(&quot;Button&quot;,{x=3D10,y=3D10,label=
=3D&quot;testbutton&quot;})
 	--~ local txt =3D dialog:CreateContentChild(&quot;UOText&quot;,{bold=3Dtrue,text=3D=
&quot;bla&quot;,x=3D10,y=3D50})
@@ -81,17 +89,38 @@
 	=

 	local alignbox	=3D dialog:CreateContentChild(&quot;AlignBox&quot;,{x=3D120,y=3D10,w=
=3DkConfigDialogW-120-10,h=3DkConfigDialogH-10-10})
 	local hbox		=3D alignbox:AddChild(&quot;HBox&quot;,{halign=3D&quot;right&quot;,valign=3D&quot;bott=
om&quot;,spacer=3D10})
-	local btn_c		=3D hbox:AddChild(&quot;Button&quot;,{label=3D&quot;Cancel&quot;})
-	local btn_ok	=3D hbox:AddChild(&quot;Button&quot;,{label=3D&quot;OK&quot;})
+	hbox:AddChild(&quot;Button&quot;,{label=3D&quot;Cancel&quot;,	on_button_click=3Dfunction () C=
onfigDialog_Close() end})
+	hbox:AddChild(&quot;Button&quot;,{label=3D&quot;Apply&quot;,	on_button_click=3Dfunction () Co=
nfigDialog_Apply() end})
+	hbox:AddChild(&quot;Button&quot;,{label=3D&quot;OK&quot;,		on_button_click=3Dfunction () Conf=
igDialog_Apply() ConfigDialog_Close() end})
 	alignbox:UpdateLayout()
 	=

-	function btn_ok:on_mouse_left_click () self:GetDialog():Destroy() end
 	list:SetSelectedIndex(1)
 end
 =

 function ConfigDialogPage_HotKey(page)
 	local group =3D page:AddWidget(CreateWidgetFromXMLString(nil,&quot;&lt;UOText bol=
d=3D1 text=3D'not yet implemented'&gt;&quot;))
+	=

+	page:AddChild(&quot;Button&quot;,{label=3D&quot;Import Razor Hotkeys&amp;Macros&quot;,on_button_c=
lick=3Dfunction ()  =

+			ImportRazorProfileDialog()
+		end})
 end
+
+function ConfigDialog_Apply		()
+	ConfigDialog_SaveToFile(gConfigPath..&quot;../default.xml&quot;)
+end
+
+function ConfigDialog_Close	() gConfigDialog:Destroy() end
+
+
+
+-- ***** ***** ***** ***** ***** xml
+
+function ConfigDialog_SaveToFile	(filepath)
+	--~ LuaXML_SaveFile(filepath,xml)
+end
+
+-- ***** ***** ***** ***** ***** pages
+
 =

 function ConfigDialogPage_Macro(page)
 	local group =3D page:AddWidget(CreateWidgetFromXMLString(nil,&quot;&lt;UOText bol=
d=3D1 text=3D'not yet implemented'&gt;&quot;))
@@ -139,6 +168,7 @@
 	page:AddChild(&quot;Button&quot;,{label=3DgPacketVideoRecording and tstop or tstart=
,on_button_click=3Dfunction (self)  =

 			PacketVideo_Recording_Toggle() self:SetText(gPacketVideoRecording and t=
stop or tstart)
 		end})
+	page:AddWidget(CreateWidgetFromXMLString(nil,&quot;&lt;UOText bold=3D1 text=3D'wi=
ll be saved as .ipv files in iris/videos/'&gt;&quot;))
 end
 =

 function ConfigDialogPage_Misc(page)

Modified: trunk/lua/main.lua
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
--- trunk/lua/main.lua (original)
+++ trunk/lua/main.lua Mon Dec 15 16:01:37 2008
@@ -12,6 +12,7 @@
 gMacroPath 			=3D datapath..&quot;mymacros.lua&quot;
 gMacroPathFallback	=3D datapath..&quot;mymacros.lua.dist&quot;
 gMainPluginDir 		=3D gMainWorkingDir..&quot;plugins/&quot;
+gConfigDirPath 		=3D gMainWorkingDir..&quot;config/&quot;
 gIrisWidgetDir 		=3D libpath..&quot;widgets/&quot;
 gTempPath			=3D datapath..&quot;tmp/&quot;
 gSecondsSinceLastFrame =3D 0


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001596.html">[Iris-commit] [IRIS] r2792 - in /trunk/lua: lib.debugmenu.lua lib.mount.lua lib.protocol.lua widgets/widget.uotext.lua
</A></li>
	<LI>Next message: <A HREF="001598.html">[Iris-commit] [IRIS] r2794 - /trunk/include/data_artmap.h
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1597">[ date ]</a>
              <a href="thread.html#1597">[ thread ]</a>
              <a href="subject.html#1597">[ subject ]</a>
              <a href="author.html#1597">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/iris-commit">More information about the Iris-commit
mailing list</a><br>
</body></html>
